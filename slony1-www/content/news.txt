---
Slony-I Quick downloads
http://main.slony.info/downloads
2014-07-07
Steven Singer

Slony-1 2.2.3 <a href="http://main.slony.info/downloads/2.2/source/slony1-2.2.3.tar.bz2">engine</a> <a href="http://main.slony.info/downloads/2.2/source/slony1-2.2.3-docs.tar.bz2">documentation</a>
<br>
Slony-1 2.1.4 <a href="http://main.slony.info/downloads/2.1/source/slony1-2.1.4.tar.bz2">engine</a> <a href="http://main.slony.info/downloads/2.1/source/slony1-2.1.4-docs-2.tar.bz2">documentation</a>
<br>
Slony-1 2.0.8 <a href="http://main.slony.info/downloads/2.0/source/slony1-2.0.8.tar.bz2">engine</a> <a href="http://main.slony.info/downloads/2.0/source/slony1-2.0.8-docs.tar.bz2">documentation</a>
<br>
Slony-1 1.2.23 <a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.23.tar.bz2">engine</a>
<a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.23-docs.tar.bz2">documentation</a>
<br/>
<!-- Please keep this item at the top of the news list -->
---
Slony 2.2.3 now available
http://main.slony.info/downloads/2.2/source/slony1-2.2.3.tar.bz2
2014-07-07
The next bug fix release in the 2.2.x series is now available.
This release includes the following bug fixes
<ul>
  <li> Bug 338 - Have ddlScript return a bigint instead of a integer</li>
  <li>fixing  Deadlock with application during minor version slony upgrade</li>
  <li>Bug 342 FAILOVER fixes for some multi-node configurations</li>
  <li> Remove HAVE_POSIX_SIGNALS from config.h</li>
  <li> Bug 344 Do not abort reading slon config values when an unrecognized one is encountered</li>
</ul>


---
Slony 2.0.8 now available
http://www.slony.info/downloads/2.0/source/slony1-2.0.8.tar.bz2
2014-04-08

Slony 2.0.8 has been released.
The final 2.0.x release is now available.
This release includes some minor bug fixes
<ul>
  <li>Bug 230 - log_timestamps was always treated as true on some platforms(AIX)</li>
  <li>Bug 233 - Fix segfault when subscribing to a set that does not exist.</li>
  <li>Bug 236 :: Fix default formatting of timestamp in logs</li>
  <li> Fix issue with FAILOVER when failing over an origin with
382           multiple sets. </li>
  <li>Bug 315 :: Fixes to the compile time include directories</li>
</ul>

---
Slony 2.2.2 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.2.tar.bz2
2014-02-11

Slony 2.2.2 has been released.
This bug fix release in the 2.2.x series includes
<ul>
  <li>Bug 327 - Fix invalid free() in the logApply trigger</li>
  <li>Include server include paths on --with-pgport builds  for slonik</li>
</ul>

---
Slony 2.2.1 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.1.tar.bz2
2013-11-04
Slony 2.2.1 has been released.
This bug fix release in the 2.2.x series includes
<ul>
<li>Fixes to the UPDATE FUNCTIONS for upgrades from releases earlier than 2.2.0</li>
<li>Fixes to the FAILOVER logic(bug 318)</li>
<li>Fixes slon to avoid constant database connection & disconnection (bug 321)</li>
<li>Fixes to CLONE PREPARE processing (bug 322) </li>
</ul>

Among other issues a full list can be found in the <a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;h=48f7dea467c4afbae816489edb3d6d3b96141e46;hb=7d8495609a53f56d0a15ecb0bfdf6b3f4c848367">release notes</a>

---
Slony 2.2.0 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.0.tar.bz2
2013-09-09

Slony 2.2.0 has been released.
This release of Slony includes the following major changes from the 2.1.x series
<ul>
<li>Shared Libraries are now named so as to allow having multiple
    versions of Slony installed simultaneously on a database cluster</li>
<li>Let DDL for EXECUTE SCRIPT to be specified inline</li>
<li>Added a RESUBSCRIBE NODE command to reshape clusters.</li>
<li>The FAILOVER process has been reworked to be more
    reliable.</li>
<li>Major "protocol" change; rather than constructing cursors to
     query logged updates, version 2.2 now uses the COPY protocol to
     stream data into log tables on subscribers.</li>
</ul>
A full list of changes can be found in the <a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;hb=52e6127d264662997e69bf0d07f947aebf4c7c61">release notes</a>


---
Slony 2.2.0 rc 1 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.0.rc1.tar.bz2
2013-08-20

The first release candidate for Slony 2.2.0 has been released.
This release candidate addresses the following issues from beta 4
<ul>
<li>
Set session_replication_role to local when applying EXECUTE SCRIPT commands 
on a replica(Bug 305)</li>
<li>Record the sequence values as part of EXECUTE SCRIPT (Bug 304)</li>
<li>Fixes to failover (Bug 310) and UPDATE FUNCTIONS (Bug 309) </li>
</ul>

---
Slony 2.1.4 now available
http://www.slony.info/downloads/2.1/source/slony1-2.1.4.tar.bz2
2013-08-16

Slony 2.1.4 a bug fix release in the 2.1 branch has been released.
This release addresses the following issues

<ul>
<li>Fixes a possible race condition during a MOVE SET where the wrong snapshot
    can be used to pull data (bug 299)</li>
<li>Adding support for PG 9.3</li>
<li>The truncate trigger is now a security definer</li>
</ul>

---
Slony 2.2.0 b5 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.0.b5.tar.bz2
2013-07-26

The next beta for Slony 2.2.0 has been released.
This beta includes the following fixes from beta 4.
<ul>
<li>Fixes for FAILOVER </li>
<li>Make test_slony_state-dbi.pl work with PG 9.2</li>
<li>log shipping apply trigger apply EXECUTE SCRIPT change</li>
<li>MOVE SET could previously pull data from the old origin with
    the wrong SYNC (Bug 299)</li>
<li>Eliminate  memory leaks in slon</li>
<li>Fixes for the 2.1 -> 2.2 upgrade procedure</li>
</ul>

---
Slony 2.2.0 b4 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.0.b4.tar.bz2
2013-06-07

The fourth beta for Slony 2.2.0 has been released.
This beta includes the following changes from beta 3. 
<ul>
<li> Support to compile against PG 9.3</li>
<li> UPDATE FUNCTIONS now works when the old shared library is gone (bug 287)</li>
<li> EXECUTE SCRIPT allows DDL to be specified inline (bug 251)</li>
<li> C functions now have the slony version embedded in their name (bug 290)</li>
<li> Fixes to cloneNodePrepare (Bug 252) and log_truncate(now security definer)

</ul>
In addition to many features and fixes included in 2.2.0 beta 3 see
<a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;h=be03be66d8f39ee148b50dadf71ddbe20a1e5ad8;hb=e3e785c93d14b009abc8424fa7e53e8b75c0f098">the release notes</a> for more details.

---
---
Slony 2.2.0 b3 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.0.b3.tar.bz2
2013-02-20

The third beta for Slony 2.2.0 has ben released.
Version 2.2.0 includes the following major changes
<ul>
<li> The storage and transport and application of the slony log (sl_log_1/sl_log_2) has changed
providing performance improvements. </li>
<li> The FAILOVER command has been made more reliable</li>
<li> Improvements in how DDL (EXECUTE SCRIPT) is sequenced within
the replication stream</li>

In addition to many bug fixes and minor improvements. See
<a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;h=9405e0e1b9059344477861f6213ff461dab6b754;hb=50958a3fb9ffd3f293236861ab8404ae88252b0f">the release notes</a> for more details.

---
Slony 2.1.3 now available
http://main.slony.info/downloads/2.1/source/slony1-2.1.3.tar.bz2
2013-02-14

A bug fix release for the Slony-I 2.1 branch has been released.
This release includes
<ul>
<li> Fixed a bug in MOVE SET that could cause data on other nodes to get out of sync</li>
<li> Removed the 'might be unsupported' working with PG 9.2</li>
<li> Fixed duplicate key detection on sl_nodelock </li>
<li> Added --with-pgport option to configure

See <a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;h=924e6db8b959a1b51562ca80860f3e238921f94f;hb=aee311a97a2b11ab4b555943ae0e49fb21c449ff">the release notes</a> for more details.

---
Slony 2.1.2 now available
http://main.slony.info/downloads/2.1/source/slony1-2.1.2.tar.bz2
2012-08-27

A bug fix release for the Slony-I 2.1 branch has been released.
This release includes
<ul>
<li> Fixed memory leak in monitor thread </li>
<li> Add an ORDER BY to the log selection query so the xid's get compressed</li>
<li> The cleanup thread should no longer block waiting on a lock </li>
<li> Fixes to work with  PostgreSQL 9.2 </li>
<li> Minor changes to makefiles and configure </li>
</ul>
See <a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob;f=README;h=496f4455be8772242a14422f9d4a25f0674ea73e;hb=61d50e9f2a416793752619764b39f3a9d7b1d99c"> the release notes</a> for more details.
---
Slony 2.2.0 b1 now available
http://www.slony.info/downloads/2.2/source/slony1-2.2.0.b1.tar.bz2
2012-06-21

The first beta for Slony 2.2.0 has ben released.
Version 2.2.0 includes the following major changes
<ul>
<li> The storage and transport and application of the slony log (sl_log_1/sl_log_2) has changed
providing performance improvements. </li>
<li> The FAILOVER command has been made more reliable</li>
<li> Improvements in how DDL (EXECUTE SCRIPT) is sequenced within
the replication stream</li>

In addition to many bug fixes and minor improvements. See 
<a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob;f=RELEASE;h=b7d490e0baed29115a7825b95469ad8d818ec954;hb=95ce397039c653a447ff783ff60abe76c4619c8f">the release notes</a> for more details.
---
Slony 2.1.1  now available
http://www.slony.info/downloads/2.1/source/slony1-2.1.1.tar.bz2
2012-02-02

A bug fix release for the Slony-I 2.1 branch has been released. 
This release includes
<ul>
<li> Improved support for using Slony with PostgreSQL 9.1</li>
<li> Fixes to the FAILOVER command with multiple sets on an origin</li>
<li> Fixes to the support for replicating TRUNCATE commands</li>
</ul>
Among other fixes. See <a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;hb=e70fbf1c542ddff9c3c4c598abf2fff5fcb26d6a">
the release notes</a> for more details.
---
Slony 1.2.23 now available
http://www.slony.info/downloads/1.2/source/slony1-1.2.23.tar.bz2
2012-02-02

The next (and probably last) release of Slony-I 1.2.x has been released.
This release includes
<ul>
<li> Fixes to FAILOVER on PostgreSQL 9.0</li>
<li> IMMUTABLE slon_quote functions</li>
<li> Fixes to typos</li>
</ul>
See <a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;hb=1449f8d653b2bf79016211b23138db9492979580"> the release notes</a> for more details.

---
Slony 2.1.0 now available
http://www.slony.info/downloads/2.1/source/slony1-2.1.0.tar.bz2
2011-10-19

The first release for Slony-I branch 2.1 has been released, in the
form of version 2.1.0.  It is a significant new version, fixing dozens
of reported bugs, and adding some significant enhancements, including:

<ul>
<li> Implicit WAIT FOR
<li> Support for adding tables in bulk
<li> Support for replicating TRUNCATE
<li> Health checks at startup
<li> Performance improvement in cases of large backlog
<li> Monitoring thread to provide better monitoring data
</ul>

See the <a href=
"http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob;f=RELEASE;h=1b27599ece8eda520d3ff2d7f054c1cea566b854;hb=01c6c6a0301bf8e6335d44bdbe90c9921fd4b133">
release notes</a> for a full list of changes in this release.
---
Slony 2.0.7 available
http://main.slony.info/downloads/2.0/source/slony1-2.0.7.tar.bz2
2011-07-29

The next minor release of Slony 2.0 is available.  Slony 2.0.7 includes a number
of bug fixes from the previous release of Slony.

<ul>
<li>Slon can better recover from dropped network connections</li>
<li>Bug #193 - vac_count not being reset to 0 was causing vacuums to be done too frequently 
by the cleanup thread</li>
<li>Bug #195 - change slon_quote_* functions to IMMUTABLE</li>
<li> Bug #204 - Fix issue with FAILOVER to a non-direct subscriber introduced in 2.0.5</li>
<li> Build system fixes including MS Visual C support and no longer requiring pgport on other platforms</li>
<li> Bug #217 - Execute script (ddlscript_complete_int) will now reconfigure the
             trigger arguments on the log trigger for any tables that needs it.</li>
</ul>
A complete list of changes can be found in the <a href="http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;hb=fc782cf8f767484f4417080865e0a1ed670236b0">release notes</a>

---
SlonyI 2.1.0.b3 available
http://www.slony.info/downloads/2.1/source/slony1-2.1.0.b3.tar.bz2
2011-07-12

The third beta release of 2.1.0 is now available.
Significant changes from the second beta include
<ul>
<li>Bug 204 - Additional failover fixes </li>
<li>Bug 218  - Changes in obtaining sl_config_lock and sl_event_locks</li>
<li>Bug 220  - Fixing order of parameters when reshaping subscribers </li>
<li>Bug 222  - Fixing issue where log trigger on new connections can block </li>
</ul>


---
Slony1-ctl 1.2.0 released
http://pgfoundry.org/projects/slony1-ctl/
2011-05-31

<P>We are proud to announce the release of a new version of
<b>slony1-ctl</b>, a collection of shell scripts aiming at simplifying
everyday administration of Slony replication.

<P> This version adds better support of localisation and a complete rewritting of
functions.

<P><a href="http://pgfoundry.org/projects/slony1-ctl/"> slony1-ctl project homepage </a>

<P> <a href="http://pgfoundry.org/frs/download.php/3075/slony1-ctl-1.2.0.tar.gz"> The package </a>

<P>Best regards,

<P>Stéphane Schildknecht
---
SlonyI 2.1.0.b2 available
http://www.slony.info/downloads/2.1/source/slony1-2.1.0.b2.tar.bz2
2011-05-27

The second beta release of 2.1.0 is now available.
Changes from the first beta include
<ul>
<li>Bug #204 -  Upgrade from 2.0.x fails under PostgreSQL 8.3</li>
<li>Bug 205  - Upgrade fails from 2.0.0, return type from cloneNode changes</li>
<li>Bug 206  - Do not perform an accidental rollback in a try block </li>
<li> Bug 208  - Fixing issues with bulk adding of tables. </li>
<li> Bug 209  - Default table ID problem</li>
<li>Bug 210  - merge set should wait for both sets to be subscribed
             before submitting the merge event. </li>
<li> Bug 211  - Modify the altperl tools so they don't enclose statements
             that wait for events inside of a 'try' block. </li>
</ul>

---
SlonyI 2.1.0.b1 available
http://www.slony.info/downloads/2.1/source/slony1-2.1.0.b1.tar.bz2
2011-05-06


<div id="outline-container-1_1" class="outline-3">
<h3 id="sec-1_1"><span class="section-number-3">1.1</span> Some items without bug numbers: </h3>
<div class="outline-text-3" id="text-1_1">

<ul>
<li>Introduced tests using the clustertest framework, consisting of two
    sets of tests:
<ul>
<li>clustertest/regression - port of the old tests in the tests directory
</li>
<li>clustertest/disorder - new simulated order entry system with a fair bit of concurrency

</li>
</ul>
</li>
<li>Configure and Makefile cleanups and improvements, including
<ul>
<li>Configure looks in common locations for some of the DocBook
      tooling, so it is less likely to require manual intervention on
      some common distributions
</li>
<li>Pick up Groff automagically
</li>
<li>Script to do virtually all the work documented in the <a href="http://slony.info/documentation/2.0/releasechecklist.html">Release Checklist</a>
</li>
</ul>
</li>
<li>Documentation updates
<ul>
<li>Reorganized sections
</li>
<li>Trend towards having version-specific documentation, rather than
      trying to have it document all versions at once
</li>
</ul>
</li>
<li>Git changes
<ul>
<li>Numerous .gitignore files set up to ignore generated files
</li>
</ul>
</li>
<li>Add a resetSession function that will reset the session state
    cached in the C stored functions.
</li>
</ul>
</div>

</div>

</div>

<div id="outline-container-1_3" class="outline-3">
<h3 id="sec-1_3"><span class="section-number-3">1.3</span> Items tracked from Bugzilla </h3>
<div class="outline-text-3" id="text-1_3">

<ul>
<li>Bug #79 - &ndash;prefix and &ndash;exec-prefix options don't function as expected

</li>
<li>Bug #90 -  Builds On Solaris with Sun C Studio fail. This also addresses
             issues building with Microsoft Visual Studio.

</li>
<li>Bug #126 - TCP KEEP alives can now be used from slon to postgresql(on by default)

</li>
<li>Bug #134 - TRUNCATE trigger usage

</li>
<li>Bug #142 - better document minimal security profile

</li>
<li>Bug #146 - Removed option to use DELETE to trim sl<sub>log</sub><sub>*</sub> tables - only support TRUNCATE

</li>
<li>Bug #152 - eliminate debugging statements from DDL processing

</li>
<li>Bug #156 - add health check at slon startup time

</li>
<li>Bug #163 - change Slony-I tables to use TIMESTAMP WITH TIME ZONE rather than WITHOUT TIME ZONE

</li>
<li>Bug #167 - change queries against sl<sub>log</sub><sub>*</sub> tables to avert slowdown when large backlog

</li>
<li>Bug #170 - remove SNMP support

</li>
<li>Bug #172 - add support for application<sub>name</sub> GUC (in recent PG such as 9.0)

</li>
<li>Bug #175 - add monitoring thread which stows activity information in sl<sub>components</sub>

</li>
<li>Bug #179 - Implicit/Automatic wait for. Slonik will now often perform an automatic
             'wait for event' when required to avoid race conditions.

</li>
<li>Bug #180 - Created a slonik DATE command

</li>
<li>Bug #181 - Support for bulk adding of tables and sequences and automatically finding
  the next available table or sequence id.

</li>
<li>Bug #185 - change functions to use named parameters

</li>
<li>Bug #187 - add newline to slon PID files

</li>
<li>Bug #188 - test harness query had subquery returning multiple tuples

</li>
<li>Bug #189 - add slonik EXIT check for exit values 0..255, as that's all that Unix accepts

</li>
<li>Bug #193 - add back reset of vac<sub>count</sub> so vacuums only done every few cleanup thread iterations

</li>
<li>Bug #195 - change slon<sub>quote</sub><sub>*</sub> functions to IMMUTABLE

</li>
<li>Bug #196 - add guard lock on sl<sub>event</sub><sub>lock</sub> to protect against events with XID going backwards

</li>
<li>Bug #198 - subscribeset() should verify that provider node exists

</li>
<li>Bug #201 - Allow command-line options to be configured from slon<sub>tools</sub>.conf

</li>
<li>Bug #204 - Fix issue with FAILOVER to a non-direct subscriber introduced in 2.0.5
</li>
</ul>

</div>
</div>

</div>

---
SlonyI 2.0.6 available
http://www.slony.info/downloads/2.0/source/slony1-2.0.6.tar.bz2
2010-12-06
Steve Singer

The next minor release in the 2.0 stream (2.0.6) has been released.
<ul>

<li>Fix for bug #158, Removing extranous '//' from the perl script</li>

<li>Fix for bug #155, slon can segfault while shutting down</li>

<li>Fix for bug #162, typenameTypeId() changes signatures in 9.1</li>

<li>Fix for bug #160, if slon gets confused waiting for its child it will exit</li>

<li>Fix for bug #159, distclean deletes the slony_logshipper flex/bison generated files</li>

<li>Fix for bug #154, previous fix did not work</li>
</ul>
---
SlonyI 1.2.22 available
http://www.slony.info/downloads/1.2/source/slony1-1.2.22.tar.bz2
2010-12-06
Steve Singer

<p>
The next minor release in the 1.2 branch (1.2.22) has been released.
<ul>
<li>Bug #118 -  Use TRUNCATE ONLY when cleaning out tables on subscribers in versions of Postgresql that require it</li>

<li>Explicit support for version 9.0</li>

<li>Removing obsolete EXTERNALLENGTH for 8.4 and 9.0</li>

<li>Bug # 138 - Fix syntax in autoconf m4 file to define GROFF</li>

<li>Fix for bug #159, distclean deletes the slony_logshipper flex/bison generated files</li>

<li>Detect docbook-utils paths on Debian,Fedora,SuSE,*BSDa</li>
</ul>

---
Feature Ideas Solicitation
http://wiki.postgresql.org/wiki/SlonyToDo
2010-11-22
Chris Browne

We're soliciting ideas and discussion about what sorts of things to
add to Slony-I.  Might be for "2.1", or "3.0", depending on how much
things change.

Being maintained on PostgreSQL developers wiki at <a href="http://wiki.postgresql.org/wiki/SlonyToDo"> SlonyToDo</a> to enable editing by developer community.
---
Slony-I 2.0.5 available
http://main.slony.info/downloads/2.0/source/slony1-2.0.5.tar.bz2
2010-10-07
Steve Singer

<p>
2.0.5 fixes more than 24 issues found from 2.0.4 and earlier versions, remedying many issues found during an extensive testing period.
<p>
The following issues visibly change Slony-I behaviour, and thus warrant extra attention from existing users:
<ul>

<li>Bug #121 SUBSCRIBE SET is now submitted against the set origin not the provider.</li>
<li>Bug #40 Slony now requires a thread-safe libpq  on all platforms. </li>
</ul>
---
Proposed Bug Management Policy
http://main.slony.info/bug-processing
2010-08-13
Chris Browne

<P> Handling of the Bugzilla instance has been a bit haphazard; there is
a proposed document on <a href="bug-processing.html"> bug management
policy</a>
---
Git Repository Now Available
http://main.slony.info/git.html
2010-07-15
Chris Browne

The migration to use <a href="http://www.git-scm.org/"> Git.</a> is
complete.

<p>A repository at <a href=
"http://git.postgresql.org/gitweb?p=slony1-engine.git;a=summary">
git.postgresql.org </a> has been set up, and populated with code
formerly in the <tt>slony1-engine</tt> CVS repository.
---
Git Repository Initialized
http://main.slony.info/git.html
2010-07-14
Chris Browne

The migration to use <a href="http://www.git-scm.org/"> Git.</a> has
begun.

<p>A repository at <a href=
"http://git.postgresql.org/gitweb?p=slony1-engine.git;a=summary">
git.postgresql.org </a> has been set up.  It is presently empty; we
expect to fill it in on 2010-07-15 with the data presently available
in CVS.
---
Slony-I 2.0.4 available
http://main.slony.info/downloads/2.0/source/slony1-2.0.4.tar.bz2
2010-06-24
Steve Singer

The next release in the 2.0 series is now ready.
<ul>
<li> Fixed script syntax error, bug #108 </li>
<li> memory corruption with large rows (introduced in 2.0.3)</li>
<li> Memory leak fixes</li>
<li> Various Documentation updates</li>
<li> Support for newer versions of flex </li>
<li> Fixes to stored procedures called by CLONE NODE FINISH (bug #119)</li>
</ul>
---
Slony-I 1.2.21  available
http://main.slony.info/downloads/1.2/source/slony1-1.2.21.tar.bz2
2010-04-09
Steve Singer

The next minor release of the Slony1 1.2 branch (1.2.21) has been released

<ul>

<li> Bug #108 - remove Emacs fodder from test scripts </li>

<li> Bug #110 - some quoting problems in Perl script </li>

<li> Free objects to eliminate memory leaks </li>

<li> Bug #55 - cannot use va_args multiple times + test case with very large
  tuple </li>

<li> SPI_getbinval() fix for PostgreSQL 9.0 support </li>

<li> Add buffer for pid </li>

<li> Change "long long" to "int64" to make things consistent with how PostgreSQL
  expresses XIDs.  </li>

<li> Similarly "%lld" in printf changed to INT64_FORMAT </li>

<li> slony1_extract_schema.sh checks Pg version numbers </li>

<li> Added tools/slony1_extract_for_upgrade.sh script </li>
</ul>


---
Slony-I 2.0.3  available
http://main.slony.info/downloads/2.0/source/slony1-2.0.3.tar.bz2
2010-04-09
Chris Browne

Slony-I 2.0.3 is now available.  It
makes the following changes since 2.0.2

<ul>

<li> Bug #103 - When adding snapshot entries, they should be "1:1:", not "0:0:"

<li> autoconf/C funcs change to cope with 8.5 change that ScanKeywordLookup has
  3 arguments rather than 1 (in previous versions)

<li> Remove Emacs fodder from tools (bug #108)

<li> Quoting problems in Perl script (bug #110)
<li> Add notes about flex/bison conflict (bug #109)

<li> <a href="http://lists.slony.info/pipermail/slony1-hackers/2010-January/000292.html"> Memory leak changes per Ulrich Weber</a>

<li> Logic error (if versus "else if") noticed by Richard Yen

<li> Bug #106 - misleading error message when setting up session configuration

<li> Improve test harness to report conninfo in case where connection fails

<li> Bug #55 - va_args cannot be used multiple times

<li> Bug # 113 - DROP cloneNodePrepare since the return type changes.
  Patch from Atte Peltomäki
<li> Improve configure complaint if it can't find PQunescapeBytea - this
  likely implies that configure couldn't find libpq.

<li> Copyright date changes

<li> Added discussion of synchronous commit to documentation

<li> Removed some discussion of behaviours relating to ancient versions
  of PostgreSQL that are no longer supported (David Fetter)

<li> SPI_getbinval() was being passed a NULL, which PostgreSQL 8.5 no
  longer accepts.  Add isnull variable in the relevant code block so
  there's a place to stow the bool result.

 <P> Reason for this noted by Alvaro Herrera - thanks!

<li> Change "long long" to "int64" to make things consistent with how
  PostgreSQL expresses XIDs.

<li> Similarly "%lld" in printf changed to INT64_FORMAT

<li> Fixing up detection by Slonik of PostgreSQL 8.4 (patch per Peter
  Eisentraut) - bug #116

<li>Updates to copyright dates on files

<li>Bug #98 - need WAIT ON parameter in slonik code generated by
  slonik_move_set altperl script.

<li>Change default $LOGDIR, so that distros won't need to patch it.

<li>Fix LOG_NAME_SUFFIX feature. Thanks to David Fetter and Andrew Dunstan.

<li>Improve documentation on EVENT NODE for STORE NODE command

<li>SLONLOG directory changes for Red Hat-related distributions

<li>Bug #97 - insert into sl_setsync upon FAILOVER had values() clause based on the
  pre-2.0 schema; fix to use 2.0.

<li>UPGRADE FUNCTIONS failing because functions had their return types changed.
  Added in "DROP FUNCTION IF EXISTS" (fine in 8.3+) in
  src/backend/slony1_funcs.sql to rectify this.

<li>As observed by Bernd Helmle, cloneNodePrepare returns an event ID,
  and hence should return BIGINT

<li>Introduced ShouldSlonyVacuumTable() function for 8.3 so we cope with
  differences in vacuum handling between 8.3 and 8.4+

<li>Fix 8.4-ism relating to subscription retries
  <a href="http://lists.slony.info/pipermail/slony1-commit/2009-October/002728.html"> see commit notes </a>

<li> Doc fixes
<li> Fixes to integer castings - don't assume this is automagically handled
<li> Changed return types of functions returning event numbers <tt>bigint</tt> 
<li> Fixes to altperl samples and such

<li>PostgreSQL 8.4 has been released; slonik needs to explicitly recognize it

<li>Add in slonikconfdump.sh tool, which generates a slonik script to duplicate
  the configuration of a Slony-I cluster

<li>Significant fixes to documentation to reflect 2.0 changes

<li>Add "OMIT COPY" option to the Slonik "SUBSCRIBE SET" command

<li>Document process for Slony-I 2.0 upgrade using OMIT COPY option

<li>Fix to race condition where file descriptor copies were being made at
  the wrong time in the scheduler

<li>Modify "testseqnames" regression test to create a whole bunch of
  sequences to validate that things don't break down with either lots of
  them, or where IDs are large numbers

<li>Change minimum debugging level to -1 to allow suppressing logging

<li>Bug #92 - compression of event numbers had a bug where events >
  2^31-1 would overflow the "int" value

<li>Autovacuum handling changes in PostgreSQL 8.4 - we pull metadata
  from pg_class.reloptions, instead of pg_autovacuum

<li>logswitch fix resolving a potential data loss + statement blocking
  bug...

  Before attempting to TRUNCATE the sl_log_* tables, we need to
  successfully request an exclusive lock.  By doing so in an
  exception block with NOWAIT option, this can "lose" gracefully.

<li>Add LOG_NAME_SUFFIX to altperl tools

</ul>
---
Slony-I 1.2.20 available
http://main.slony.info/downloads/1.2/source/slony1-1.2.20.tar.bz2
2009-12-09
Chris Browne

<P> Release 1.2.20 has the following changes:

<ul>
<li> Fix problem with logging where vsnprintf would, with very large
  output, clobber the byte after malloc()ed output</li>

<li> Change "long long" to "int64"</li>

</ul>

Yes, that's a rapid series of changes :-(
---
Slony-I 1.2.19 available
http://main.slony.info/downloads/1.2/source/slony1-1.2.19.tar.bz2
2009-12-09
Chris Browne

<P> Release 1.2.19 has the following changes:

<ul>
<li> Fix problems with drop_if_exists()</li>
<li> Add tests to duct tape tests that bump event numbers to test 2^31 "rollover" issue, and to run UPDATE FUNCTIONS</li>
</ul>
---
Slony-I 1.2.18 available
http://main.slony.info/downloads/1.2/source/slony1-1.2.18.tar.bz2
2009-12-01
Chris Browne

<P> Release 1.2.18 has the following changes:

<ul>
<li> autoconf change + change to src/backend/slony1_funcs.c to accomodate
  change in # of arguments for ScanKeywordLookup in PostgreSQL 8.5</li>

<li> Reloading of functions needs to have an emulation of
  "DROP FUNCTION IF EXISTS" because a couple of functions have had their
  return value type changed, which doesn't fit happily into
  CREATE OR REPLACE FUNCTION. </li>

<li> Revisions to copyright notices to indicate 2009 </li>

<li> Fixing 8.4ism in SUBSCRIBE SET process - see <a href="http://main.slony.info/viewcvs/viewvc.cgi/slony1-engine/src/slon/remote_worker.c?revision=1.124.2.39&view=markup&sortby=date&pathrev=REL_1_2_STABLE"> change in CVS </a></li>
</ul>
---

Slony-I 1.2.17 released
http://main.slony.info/downloads/1.2/source/slony1-1.2.17-rc.tar.bz2
2009-10-14
Chris Browne

Version <a href=
"http://main.slony.info/downloads/1.2/source/slony1-1.2.17.tar.bz2">
slony1-1.2.17.tar.bz2 </a> has been made available.

<P>Changes since 1.2.16 are as follows:
<ul>

<li> Apply changes to logshipper that went into the 2.0 branch but not
  1.2

<li> Change minimum debugging level to -1 to allow suppressing logging

<li> Bug #92 - compression of event numbers had a bug where events >
  2^31-1 would overflow the "int" value

<li> Fix to race condition where file descriptor copies were being made at
  the wrong time in the scheduler

<li> Fix return types to use bigint when returning event #'s

<li> Establish compatibility with PostgreSQL 8.4:

<ul>
  <li> autovac data is on pg_class rather than pg_autovacuum
  <li> Need to use GetActiveSnapshot() rather than expecting to have
    SerializableSnapshot in the backend

  <li> createdb needs to copy from template0 to ensure it can match locales

  <li> pg_class.reltriggers no longer exists in 8.4 and thus shouldn't be
    touched

</ul>
</ul>

---
Updated Online Docs to 2.0.2
http://www.slony.info/documentation
2009-07-14
Chris Browne

Updated the online documentation to reflect version 2.0.2; there have
been material changes to the docs since 2.0.1.
---
Slony-I 2.0.2 candidate released
http://main.slony.info/downloads/2.0/source/slony1-2.0.2.tar.bz2
2009-05-08
Chris Browne

Version <a href=
"http://main.slony.info/downloads/2.0/source/slony1-2.0.2.tar.bz2">
slony1-2.0.2.tar.bz2 </a> has been released.

<p>Changes since 2.0.1 are as follows:

<ul>
<li> PostgreSQL 8.4 compatibility - src/backend/slony1_funcs.c needed to
  #include "catalog/pg_type.h"; that is no longer implicitly included by
  the SPI #include

<li> Fix bug #71 - config dump was failing on string entries that were NULL

<li> Fix bug #76 - REPAIR CONFIG could have collisions where, when we 
  load a schema, one entry in sl_table already has an OID value
  that incorrectly matches a value that another update is trying to
  fix.

<P>  This would cause REPAIR CONFIG to fail.

<P>  Put in a query that updates the oids in sl_table and sl_sequence to
  randomly selected values from pg_class that couldn't match (since
  the values selected are from non-table/non-sequence objects)

<li> Updated release notes to indicate that 2.0 only supports PostgreSQL
  8.3+

<li> Change to configure.ac to allow it to run on autoconf 2.63; there was
  something unsuitable about SLONREL_VERSION processing

<li> Fixes to Makefile for admin guide

<li> Various fixes to admin guide material

<li> Added an extra test to Schema name test that validates that things
  can operate properly even if the DB lacks a "public" schema

<li> Fixed bug in tools/start_slon.sh

<li> Fixed pathname substitutions in a couple of altperl scripts

<li> Add a test which validates that the cluster schema name is valid; 
  pgAdminIII allowed setting up cluster names that slonik would refuse
  to connect to.

<li> Revised regression tests to use SYNC/WAIT FOR EVENT instead of
  queries that try to coordinate sl_status information with rather
  less determinacy...

</ul>
---
Slony-I 1.2.16 released
http://main.slony.info/downloads/1.2/source/slony1-1.2.16.tar.bz2
2009-05-08
Chris Browne

Version <a href=
"http://main.slony.info/downloads/1.2/source/slony1-1.2.16.tar.bz2">
slony1-1.2.16.tar.bz2 </a> has been released.

Changes since 1.2.15:
<ul>
<li> Fix problems with failover:
<ul>
<li> Failover would fail (ERROR) where there is no path to backup node - change this to a WARNING so that failover can complete; admin will need to fix up paths later  </li>
<li> Failover apparently never supported failing over to nodes that were not directly subscribing to the failed node
Fixed some broken logic in failedNode()
<li> Fixed a problem where slonik cannot perform a failover if multiple origins
fail at once.
</ul></li>
<li> Fixed autoconf 2.63 incompatibility </li>
<li> Draw in latest documentation updates from 2.0 branch </li>
</ul>
---
Slony-I 2.0.2 release candidate released
http://main.slony.info/downloads/2.0/source/slony1-2.0.2-rc.tar.bz2
2009-04-30
Chris Browne

The release candidate <a href=
"http://main.slony.info/downloads/2.0/source/slony1-2.0.2-rc.tar.bz2">
slony1-2.0.2-rc.tar.bz2 </a> has been generated.

<ul>
<li> PostgreSQL 8.4 compatibility - src/backend/slony1_funcs.c needed to
  #include "catalog/pg_type.h"; that is no longer implicitly included by
  the SPI #include

<li> Fix bug #71 - config dump was failing on string entries that were NULL

<li> Fix bug #76 - REPAIR CONFIG could have collisions where, when we 
  load a schema, one entry in sl_table already has an OID value
  that incorrectly matches a value that another update is trying to
  fix.

<P>  This would cause REPAIR CONFIG to fail.

<P>  Put in a query that updates the oids in sl_table and sl_sequence to
  randomly selected values from pg_class that couldn't match (since
  the values selected are from non-table/non-sequence objects)

<li> Updated release notes to indicate that 2.0 only supports PostgreSQL
  8.3+

<li> Change to configure.ac to allow it to run on autoconf 2.63; there was
  something unsuitable about SLONREL_VERSION processing

<li> Fixes to Makefile for admin guide

<li> Various fixes to admin guide material

<li> Added an extra test to Schema name test that validates that things
  can operate properly even if the DB lacks a "public" schema

<li> Fixed bug in tools/start_slon.sh

<li> Fixed pathname substitutions in a couple of altperl scripts

<li> Add a test which validates that the cluster schema name is valid; 
  pgAdminIII allowed setting up cluster names that slonik would refuse
  to connect to.

<li> Revised regression tests to use SYNC/WAIT FOR EVENT instead of
  queries that try to coordinate sl_status information with rather
  less determinacy...

</ul>
---
Slony-I 1.2.16 release candidate released
http://main.slony.info/downloads/1.2/source/slony1-1.2.16-rc.tar.bz2
2009-04-30
Chris Browne

The release candidate <a href=
"http://main.slony.info/downloads/1.2/source/slony1-1.2.16-rc.tar.bz2">
slony1-1.2.16-rc.tar.bz2 </a> has been generated.

Changes:
<ul>
<li> Fix problems with failover:
<ul>
<li> Failover would fail (ERROR) where there is no path to backup node - change this to a WARNING so that failover can complete; admin will need to fix up paths later  </li>
<li> Failover apparently never supported failing over to nodes that were not directly subscribing to the failed node
Fixed some broken logic in failedNode()
<li> Fixed a problem where slonik cannot perform a failover if multiple origins
fail at once.
</ul></li>
<li> Fixed autoconf 2.63 incompatibility </li>
<li> Draw in latest documentation updates from 2.0 branch </li>
</ul>
---
Slony-I Control Tools Released
http://slony1-ctl.projects.postgresql.org/
2009-04-13
Chris Browne

<a href="http://slony1-ctl.projects.postgresql.org/">
Slony1-ctl </a> is a set of shell scripts aiming at simplifying everyday
administration of a Slony1 replication.


<P> Licence: BSD

<P> <B>Principle:</B> 
<p>  Once replication nodes and relations between nodes have been defined, one can
  easily administrate the replication by calling one of the scripts, without
  need to write slonik scripts anymore.

<b>Features:</b>
<ul>
 <li> Initialising a replication
 <li> Adding/dropping nodes
 <li> Adding a set
 <li> Possibility to define cross-replication
 <li> adding objects
 <li> switchover/failover
 <li> Start/stop replication daemons
 <li> Executing DDL scripts
</ul>
---
Slony-I 2.0.1 Released
http://main.slony.info/downloads/2.0/source/slony1-2.0.1.tar.bz2
2009-02-26
Chris Browne

<P> This release addresses a number of issues found in 2.0.0

<ul>
<li> Bug #69 - vactables type was being referenced before UPGRADE FUNCTIONS could actually have created it, when upgrading from an earlier version.

<P>  This would cause UPGRADE FUNCTIONS to fail.

<li> Bug #64 - use of syslog levels had some inappropriate break statements so that some logging would get lost.

<P> If you had multiple clusters where one cluster name was a substring of the other, slon-tools.pm could find
  both when looking for slon processes relevant to the shorter cluster name.  Added a space to the relevant
  bit of slon-tools.pm

<li> Failover had an insert into sl_event where # of columns provided didn't match those expected.  This
  resulted from the change of snapshot handling which used to involve 3 columns where in 8.3+, there is
  now a snapshot type.

<li> Fix syntax error in tools/altperl/slon_watchdog.pl

<li> Add cleanup_interval example to sample slon.conf file

<li> Add cleanup_interval configuration configuration to regression tests

<li> Add documentation for complex failover scenario

<li> Revise installation notes to indicate that xxid.so no longer exists in Slony-I 2.0+

<li> Fix documentation typos

<li> Fixed error with cleanup code which was not purging old data in sl_log_1/sl_log_2

<li> Fix altperl/slontools errors

<li> Added in preliminaries for upgrade from 1.2 to 2.0 - discussion of what the tool
  needs to do

<li> Bug #63 - Array overrun in logtrigger()
</ul>

---
No way currently to upgrade from Slony-I 1.2.x to 2.0.x
http://www.slony.info/bugzilla/show_bug.cgi?id=69
2008-12-19
Chris Browne

<P> Unfortunately, it needs to be noted that there is not, as of yet,
an upgrade procedure to upgrade an installation of Slony-I 1.2.x to
2.0.  At present, upgrading to 2.0 will essentially require dropping
out replication and recreating it.

<P> We hope to have an answer as to how to deal with this in the new year.
---
Slony-I 2.0.0 Released
http://main.slony.info/downloads/2.0/source/slony1-2.0.0.tar.bz2
2008-11-24
Chris Browne

Differences from 1.2 stream

<ul>
<li> Removal of TABLE ADD KEY

<li> It drops all support for databases prior to Postgres version 8.3.

<p>This is required because we now make use of new functionality in
Postgres, namely the trigger and rule support for session replication
role. As of now, every node (origin/subscriber/mixed) can be dumped with
pg_dump and result in a consistent snapshot of the database.

<li> Still need alterTableRestore() for the upgrade from 1.2.x to 2.0.
upgradeSchema() will restore the system catalog to a consistent
state and define+configure the new versions of the log and deny_access
triggers. 

<li> Fix EXECUTE SCRIPT so that it records the ev_seqno for WAIT FOR EVENT
and make sure all DDL is executed in session_replication_role "local"
on the origin as well as all subscribers. This will cause the slony
triggers to ignore all DML statements while user triggers follow the
regular configuration options for ENABLE [REPLICA/ALWAYS] or DISABLE.

<li> Let the logshipping files also switch to session_replication_role =
"replica" or "local" (for DDL).

<li> Sequence tracking becomes enormously less expensive; rather than
polling *ALL* sequence values for each and every SYNC, the slon
stores the last value, and only records entries in sl_seqlog when
the value changes from that last value.  If most sequences are
relatively inactive, they won't require entries in sl_seqlog very
often.

<li> Change to tools/slony1_dump.sh (used to generate log shipping dump);
  change quoting of "\\\backslashes\\\" to get rid of warning

<li> Cleanup thread revised to push most of the logic to evaluate which
  tables are to be vacuumed into a pair of stored functions.

<P>  This fairly massively simplifies the C code.

<li> Revised logging levels so that most of the interesting messages are
  spit out at SLON_CONFIG and SLON_INFO levels.  This can allow users
  to drop out the higher DEBUG levels and still have useful logs.

<li> Changed log selection query to be less affected by long running
  transaction.  This should help, in particular, the scenario where
  it takes a very long time to subscribe to a set.  In that situation,
  we have had the problem where applying the later SYNCs gets
  extremely costly as the query selecting logs wound up forced into a
  Seq Scan rather than an index scan.

<li> Removed all support for STORE/DROP TRIGGER commands. Users 
  should use the ALTER TABLE [ENABLE|DISABLE] TRIGGER functionality 
  available directly in Postgres from now on.

<li> Improve Wiki page generation script so that it has an option to add in
  a set of [[Category:Foo]] tags to allow automated categorization.

<li> Documented how to fix tables that presently use Slony-I-generated
  primary key candidates generated by TABLE ADD KEY

<li> Add some specific timestamps during the 2007 "DST rule change
  ambiguous time" (e.g. - during the period which, under former rules,
  was not DST, but which now is, due to the recent rule change).

<P>  Bill Moran ran into some problems with such dates; varying
  PostgreSQL versions returned somewhat varying results.  This wasn't
  a Slony-I problem; the data was indeed being replicated correctly.

<li> Made configure a bit smarter about automatically locating
  docbook2man-spec.pl on Debian, Fedora, BSD.

<li> Tests now generate |pipe|delimited|output| indicating a number of
  attributes of each test, including system/platform information,
  versions, and whether or not the test succeeded or failed.

<li> Revised functions that generate listen paths

<li> tools/configure-replication.sh script permits specifying a
  destination path for generated config files.  This enables using
  it within automated processes, and makes it possible to use it to
  generate Slonik scripts for tests in the "test bed," which has
  the further merit of making tools/configure-replication.sh a
  regularly-regression-tested tool.

<li> Fix to bug #15 - where long cluster name (>40 chars) leads to
  things breaking when an index name is created that contains
  the cluster name.

  <P> Warn upon creating a long cluster name.
  <p> Give a useful exception that explains the cause rather
     than merely watching index creation fail.

<p><a href=   "http://www.slony.info/bugzilla/show_bug.cgi?id=15"> Bug 15 </a>

<li> Fix for bug #19 - added a script to help the administrator
  search for any triggers on the database that is the source for
  a schema that is to be used to initialize a log shipping node.

<p>  The problem is that some/most/sometimes all triggers and rules
  are likely to need to be dropped from the log shipping node lest
  they interfere with replication.

<li> Elimination of custom "xxid" functions

<P>  PostgreSQL 8.3 introduces a set of "txid" functions and a
  "txid_snapshot" type, which eliminates the need for Slony-I to have
  its own C functions for doing XID comparisons.

<p>  Note that this affects the structure of sl_event, and leads to some
  changes in the coding of the regression tests.

<p>  This eliminates the src/xxid directory and contents

<li> All of the interesting cleanup work is now done in the stored
  function, cleanupEvent(interval, boolean).

<p>  Interesting side-effect: You can now induce a cleanup manually,
  which will be useful for testing.

<li> cleanupEvent now has two parameters, passed in from slon config
  parameters:

<P>  interval - cleanup_interval (default '10 minutes')

<p>   This controls how quickly old events are trimmed out.  It used to
   be a hard-coded value.

<p>   Old events are trimmed out once the confirmations are aged by
   (cleanup_interval).

<p>   This then controls when the data in sl_log_1/sl_log_2 can be
   dropped.

<p>   Data in *those* tables is deleted when it is older than the
   earliest XID still captured in sl_event.

<p>  boolean - cleanup_deletelogs (default 'false')

<P>   This controls whether or not we DELETE data from sl_log_1/sl_log_2

<p>   By default, we now NEVER delete data from the log tables; we
   instead use TRUNCATE.

<li> We now consider initiating a log switch every time cleanupEvent()
  runs.

<P>  If the call to logswitch_finish() indicates that there was no log
  switch in progress, we initiate one.

<P>  This means that log switches will be initiated almost as often as
  possible.  That's a policy well worth debating :-).

<li> logswitch_finish() changes a fair bit...

<P>  It uses the same logic as in cleanupEvent() to determine if there
  are any *relevant* tuples left in sl_log_[whatever], rather than
  (potentially) scanning the table to see if there are any undeleted
  tuples left.

<li> At slon startup time, it logs (at SLON_CONFIG level) all of the
  parameter values.  Per <a href="http://www.slony.info/bugzilla/show_bug.cgi?id=21"> Bugzilla entry #21.</a>

  
<li> New slonik "CLONE PREPARE" and "CLONE FINISH" command to assist in
  creating duplicate nodes based on taking a copy of some existing
  subscriber node.

<li> We no longer use LISTEN/NOTIFY for events and confirmations, which
  eliminates the usage that has caused pg_listener bloat.  We instead
  poll against the event table.

<li> Various instances where slonik would use a default node ID of 1 have
  been changed to remove this.

<P>  Slonik scripts may need to be changed to indicate an EVENT NODE (or
  similar) after migration to v2.0 as a result.

<P>  The slonik commands involved:

<ul>
  <li> STORE NODE - EVENT NODE
  <li> DROP NODE - EVENT NODE
  <li> WAIT FOR EVENT - WAIT ON
  <li> FAILOVER - BACKUP NODE
  <li> EXECUTE SCRIPT - EVENT NODE
</ul>

<li> Fixed a problem where ACCEPT_SET would wait for the corresponding
  MOVE_SET or FAILOVER_SET to arrive while holding an exclusive lock
  on sl_config_lock, preventing the other remote worker to process
  that event.

<li> Bug #54 - quite a few Bash-isms in various scripts have been
  addressed so as to make the shell scripts more portable.

<li> Bug #18 - the function parameter for the logtrigger functions no
  longer requires any trailing v's

<P>  Add a test to "test1" to make sure this logic gets exercised.

<li> Created "start_slon.sh", an rc.d-style script for starting,
  stopping, and checking status of slon processes.

<P>  Integrated this into the regression tests, replacing previous
  logic for starting/stopping slons, so that this script can be
  considered carefully tested

<li> Bug #46 - incompatibility with PostgreSQL 8.4 addressed

<li> Use dollar quoting in stored functions

<li> Additional logging of the time spent running queries, broken out on
  a by-database basis

<li> Fixes to documentation of WAIT FOR EVENT

<li> Fix to bug #63 - cleanup thread had an imperative SELECT that needed
  to become part of an IF statement

<li> Enhancement - bug #61 - logshipper process should rescan the queue
  when it empties

<li> Note about "duct tape" tests:  There are many of these tests that
  reside in src/ducttape that reference features removed in v2.0.

<P>  We will eventually be replacing these with a more proper "test suite"
  so we're not remedying all the ducttape tests.
</ul>
----
Slony-I 2.0.0 second RC available
http://main.slony.info/downloads/2.0/source/slony1-2.0.0-rc2.tar.bz2
2008-09-24
Chris Browne

Now available is a second release candidate of version 2.0 of Slony-I,
fixing a number of issues found since the first release candidate.<BR>

<b>Differences from 2.0.0 RC1</b>
<BR>
<ul>
<li> Bug #54 - fixed various bash-isms </li>
<li> Bug #18 - function parameter for logtrigger no longer requires trailing "v"'s </li>
<li> Created start_slon.sh, an rc.d-style script to start, stop, and check status of a slon process, integrating its usage into regression tests </li>
<li> Bug #46 - incompatibility with PostgreSQL 8.4</li>
<li> Added an extended example of upgrading from one version of PostgreSQL to another </li>
<li> Use dollar quoting in stored functions </li>
<li> Added logging code that lists time spent running queries against different nodes to help when analyzing performance issues </li>
<li> A little more fixing-up of logging levels </li>
<li> Test suite uses non-zero lag_interval</li>
</ul>

---
Slony-I 1.2.15 available
http://main.slony.info/downloads/1.2/source/slony1-1.2.15.tar.bz2
2008-09-12
Chris Browne

Version 1.2.15 has been released.  Changes include:
<ul>
<li> Fix to STORE TRIGGER <p>- store trigger was running against all nodes
  upon subscription

  <P> <a href="http://www.slony.info/bugzilla/show_bug.cgi?id=56"> Bug #56 </a>

<li> Portability changes to some tools/ scripts, fixing some
  "bash-isms"

<li> Fix to switch statement in slonik.c; unknown how it broke

<li> Fix <a href=
  "http://bugs.slony.info/bugzilla/show_bug.cgi?id=52"> Bug #52 - 
memory leak</a>
</ul>

---
Slony-I 2.0.0 first RC available
http://main.slony.info/downloads/2.0/source/slony1-2.0.0-rc1.tar.bz2
2008-06-27
Chris Browne

Now available is a first release candidate of version 2.0 of Slony-I,
involving a large number of enhancements done over the last year or
so.<br>

<b>Differences from 1.2 stream</b>

<ul>
<li> Removal of TABLE ADD KEY

<li> It drops all support for databases prior to Postgres version 8.3.

<P> This is required because we now make use of new functionality in
Postgres, namely the trigger and rule support for session replication
role. As of now, every node (origin/subscriber/mixed) can be dumped with
pg_dump and result in a consistent snapshot of the database.

<li> Still need alterTableRestore() for the upgrade from 1.2.x to 2.0.
upgradeSchema() will restore the system catalog to a consistent
state and define+configure the new versions of the log and deny_access
triggers. 

<li> Fix EXECUTE SCRIPT so that it records the ev_seqno for WAIT FOR EVENT
and make sure all DDL is executed in session_replication_role "local"
on the origin as well as all subscribers. This will cause the slony
triggers to ignore all DML statements while user triggers follow the
regular configuration options for ENABLE [REPLICA/ALWAYS] or DISABLE.

<li> Let the logshipping files also switch to session_replication_role =
"replica" or "local" (for DDL).

<li> Sequence tracking becomes enormously less expensive; rather than
polling *ALL* sequence values for each and every SYNC, the slon
stores the last value, and only records entries in sl_seqlog when
the value changes from that last value.  If most sequences are
relatively inactive, they won't require entries in sl_seqlog very
often.

<li> Change to tools/slony1_dump.sh (used to generate log shipping dump);
  change quoting of "\\\backslashes\\\" to get rid of warning

<li> Cleanup thread revised to push most of the logic to evaluate which
  tables are to be vacuumed into a pair of stored functions.

<P>  This fairly massively simplifies the C code.

<li> Revised logging levels so that most of the interesting messages are
  spit out at SLON_CONFIG and SLON_INFO levels.  This can allow users
  to drop out the higher DEBUG levels and still have useful logs.

<li> Changed log selection query to be less affected by long running
  transaction.  This should help, in particular, the scenario where
  it takes a very long time to subscribe to a set.  In that situation,
  we have had the problem where applying the later SYNCs gets
  extremely costly as the query selecting logs wound up forced into a
  Seq Scan rather than an index scan.

<li> Removed all support for STORE/DROP TRIGGER commands. Users 
  should use the ALTER TABLE [ENABLE|DISABLE] TRIGGER functionality 
  available directly in Postgres from now on.

<li> Improve Wiki page generation script so that it has an option to add in
  a set of [[Category:Foo]] tags to allow automated categorization.

<li> Documented how to fix tables that presently use Slony-I-generated
  primary key candidates generated by TABLE ADD KEY

<li> Add some specific timestamps during the 2007 "DST rule change
  ambiguous time" (e.g. - during the period which, under former rules,
  was not DST, but which now is, due to the recent rule change).

<P>  Bill Moran ran into some problems with such dates; varying
  PostgreSQL versions returned somewhat varying results.  This wasn't
  a Slony-I problem; the data was indeed being replicated correctly.

<li> Made configure a bit smarter about automatically locating
  docbook2man-spec.pl on Debian, Fedora, BSD.

<li> Tests now generate |pipe|delimited|output| indicating a number of
  attributes of each test, including system/platform information,
  versions, and whether or not the test succeeded or failed.

<li> Revised functions that generate listen paths

<li> tools/configure-replication.sh script permits specifying a
  destination path for generated config files.  This enables using
  it within automated processes, and makes it possible to use it to
  generate Slonik scripts for tests in the "test bed," which has
  the further merit of making tools/configure-replication.sh a
  regularly-regression-tested tool.

<li> Fix to bug #15 - where long cluster name (>40 chars) leads to
  things breaking when an index name is created that contains
  the cluster name.

<ul>
  <li> Warn upon creating a long cluster name.
  <li> Give a useful exception that explains the cause rather
     than merely watching index creation fail.
</ul>

   See <a href="http://www.slony.info/bugzilla/show_bug.cgi?id=15"> Bug #15 </a>

<li> Fix for bug #19 - added a script to help the administrator
  search for any triggers on the database that is the source for
  a schema that is to be used to initialize a log shipping node.

<p>  The problem is that some/most/sometimes all triggers and rules
  are likely to need to be dropped from the log shipping node lest
  they interfere with replication.

<li> Elimination of custom "xxid" functions

<P>  PostgreSQL 8.3 introduces a set of "txid" functions and a
  "txid_snapshot" type, which eliminates the need for Slony-I to have
  its own C functions for doing XID comparisons.

<P>  Note that this affects the structure of sl_event, and leads to some
  changes in the coding of the regression tests.

<P>  This eliminates the src/xxid directory and contents

<li> All of the interesting cleanup work is now done in the stored
  function, cleanupEvent(interval, boolean).

<P>  Interesting side-effect: You can now induce a cleanup manually,
  which will be useful for testing.

<li> cleanupEvent now has two parameters, passed in from slon config
  parameters:

<P>  interval - cleanup_interval (default '10 minutes')

<P>   This controls how quickly old events are trimmed out.  It used to
   be a hard-coded value.

<P>   Old events are trimmed out once the confirmations are aged by
   (cleanup_interval).

<P>   This then controls when the data in sl_log_1/sl_log_2 can be
   dropped.

<P>   Data in <i>those</i> tables is deleted when it is older than the
   earliest XID still captured in sl_event.

<p>  boolean - cleanup_deletelogs (default 'false')

<P>   This controls whether or not we DELETE data from sl_log_1/sl_log_2

<P>   By default, we now NEVER delete data from the log tables; we
   instead use TRUNCATE.

<li> We now consider initiating a log switch every time cleanupEvent()
  runs.

<P>  If the call to logswitch_finish() indicates that there was no log
  switch in progress, we initiate one.

<P>  This means that log switches will be initiated almost as often as
  possible.  That's a policy well worth debating :-).

<li> logswitch_finish() changes a fair bit...

<P>  It uses the same logic as in cleanupEvent() to determine if there
  are any *relevant* tuples left in sl_log_[whatever], rather than
  (potentially) scanning the table to see if there are any undeleted
  tuples left.

<li> At slon startup time, it logs (at SLON_CONFIG level) all of the
parameter values.  Per <a
href="http://www.slony.info/bugzilla/show_bug.cgi?id=21"> Bugzilla
entry #21.</a>

<li> New slonik "CLONE PREPARE" and "CLONE FINISH" command to assist in
  creating duplicate nodes based on taking a copy of some existing
  subscriber node.

<li> We no longer use LISTEN/NOTIFY for events and confirmations, which
  eliminates the usage that has caused pg_listener bloat.  We instead
  poll against the event table.

<li> Various instances where slonik would use a default node ID of 1 have
  been changed to remove this.

<P>  Slonik scripts may need to be changed to indicate an EVENT NODE (or
  similar) after migration to v2.0 as a result.

<P>  The slonik commands involved:

<ul>
  <li> STORE NODE - EVENT NODE
  <li> DROP NODE - EVENT NODE
  <li> WAIT FOR EVENT - WAIT ON
  <li> FAILOVER - BACKUP NODE
  <li> EXECUTE SCRIPT - EVENT NODE
</ul>
<li> Fixed a problem where ACCEPT_SET would wait for the corresponding
  MOVE_SET or FAILOVER_SET to arrive while holding an exclusive lock
  on sl_config_lock, preventing the other remote worker to process
  that event.
</ul>
---
Slony-I 1.2.14 available
http://main.slony.info/downloads/1.2/source/slony1-1.2.14.tar.bz2
2008-05-16
Chris Browne

Version 1.2.14 has been released.  Changes include:
<ul>
<li> Fix typo in configure-replication.sh (missing CR)

<li> Per <a href="http://www.slony.info/bugzilla/show_bug.cgi?id=35">bug #35,</a>
  search the Slony share dir for scripts before falling back to the PG
  share dir on 8.0+

 <p> This has resulted in quite a lot of discussion on bug #35; we
 <i>need</i> agreement that this change is an apropos way to go...
  
<li> Change test framework to write out the test name into
  $TEMPDIR/TestName

<li> Patch that seems to resolve a race condition with
  ACCEPT_SET

<li> Fix bug #49 - mishandling by slony_logshipper of quotes and
  backslashes.

<li> Fix bug #50 - slony_logshipper had a variable access <i>after</i>
  memory was freed

</ul>
---
Docs for 1.2.13 updated to include png, man pages
http://main.slony.info/downloads/1.2/source/slony1-1.2.13-docs.tar.bz2
2008-02-29
Chris Browne

Vivek Khera observed that the documentation tarball did not include
.png files or man pages; added this in, and rebuilt the tarball.

<P>There is no change to the source code tarball.
---
Slony-I 1.2.13 available
http://main.slony.info/downloads/1.2/source/slony1-1.2.13.tar.bz2
2008-02-09
Chris Browne

<ul>
<li> Fixed problem with compatibility with PostgreSQL 8.3; function
  typenameTypeId() has 3 arguments as of 8.3.

  <p> This now allows Slony-I to work with the PostgreSQL 8.3.0 release.

<li> Added in logic to ensure that max # of SYNCs grouped together is
  actually constrained by config parameter sync_group_maxsize.

<li> Fix to show_slony_configuration - point to proper directory where
  slon/slonik are actually installed.

<li> Fix to slonik Makefile + slonik.c - Change slonik build to query
  Postgres for the share directory at runtime - per Dave Page

<li> Removed spurious NOTIFY on "_%s_Confirm"; this is no longer needed
  in the 1.2 branch, as there is no LISTEN on this notification.
  Noted in <a href="http://www.slony.info/bugzilla/show_bug.cgi?id=32"> bug #32</a>
</ul>
---
Slony-I Bugzilla available
http://bugs.slony.info/bugzilla/
2007-11-13
Christopher Browne

<P> Many thanks to Command Prompt staff for installing and configuring
a <a href="http://www.bugzilla.org/"> Bugzilla</a> instance for use in
tracking Slony-I bugs and feature requests.

<P> Feature and bug lists will be migrating into this over the next
little while...

---
Slony-I 1.2.12 available
http://slony.info/downloads/1.2/source/slony1-1.2.12.tar.bz2
2007-11-12
Christopher Browne

<P> Version 1.2.12 is now released
<ul>
<li>Fixed problem with DDL SCRIPT parser where C-style comments were
  not being processed properly

<li>Added stored functions and documentation for adding empty tables
  (notably *partitions*) to replication.  Note these functions
  do no work when not specifically requested.

  CAVEAT:  This functionality may not work as expected on versions
  of PostgreSQL earlier than 8.1.  Mind you, partitioning tends
  to function pretty poorly in earlier versions of PostgreSQL as
  there were substantial enhancements in 8.1 and following versions.

<li>Added a fairly substantial partitioning test to exercise the
  new stored functions above.

<li>Backport "listen path" generator function from CVS HEAD (2.0) to
  1.2 branch.

<li>Fixed a problem with "EXECUTE SCRIPT" (introduced in remote_worker.c
  version 1.124.2.13) where moving the relevant code into a subroutine
  at the end led to losing the "BEGIN; SET TRANSACTION ISOLATION LEVEL
  SERIALIZABLE;" query that needs to be the first thing run...

<li>Fixing the archive sequence generations (in log shipping).  All
  non-SYNC events must start the local transaction before creating the
  archive as well, so that the lock on the archive counter table
  serializes archive creation.

<li>Fixed logging done in local_listener.c - various places, there was
  no '\n' in some cases, which would lead to entries being folded
  together.

<li>Fix launch_slons.sh - was not stripping quotes from PID file name

<li>Error handling for "ERROR: could not serialize access due to
  concurrent update"

  <P> If this error is encountered when starting processing of
  sl_archive_counter, then two threads are fighting over access to
  this counter, and at least one has just failed.

  <P> Rather than waiting, we ask to restart the node immediately.

<li> Fixes to slonik_build_env script - it wasn't properly handling
  cases where there was just 1 table or 1 sequence, and had a
  problem with the -schema option - thanks, Bernd Helmle

<li> Don't bother building slony_logshipper on Win32 as it doesn't work
  there at this point.

<li> If slonik connects as other than a superuser, then generate error
  message indicating this to the user.
</ul>
---
Slony-I 1.2.11 released
http://slony.info/downloads/1.2/source/slony1-1.2.11.tar.bz2
2007-08-28
Christopher Browne

We are pleased to announce general availability of Slony-I 1.2.11.

<P> Fixes are the following:
<ul>
<li> Add in tools/mkservice scripts previously added to CVS HEAD

<li> During subscription, do UPDATE to pg_class.relhasindex *after* the
  TRUNCATE because, in 8.2+, TRUNCATE resets this attribute

<li> Fixed a problem with the setsync tracking with Log Shipping in cases
  where slon does an internal restart (thereby rereading the
  pset.ssy_seqno) and ignoring non-SYNC events because those don't
  change the sl_setsync table.

<li> More explicit type casting of text objects for compatibility with
  PostgreSQL 8.3

<li> Fixed problem with DDL SCRIPT statement parser: it wasn't 'quoting'
  semicolons inside parentheses (this notably occurs in CREATE RULE).

<li> Fixed problem with DDL SCRIPT statement submission; it was
  interpreting the statement as a format string, which would have
  ill effects in the presence of things that are interpreted such
  as format strings (%d, %f, %s) and \backslashed things like \\, \n.

<li> Further DDL Script issue: non-terminated statement at the end
  (e.g. - without trailing semicolon ";") would get omitted.

<li> Typo fix: when trying to disable a node, the logs would report
  "enableNode" rather than "disableNode".  Fixed.

<li> Add usage/version options to help output in slon.

<li> Fix archive logging for replicated sequences.

<li> Fix to log shipping - added another table, sl_archive_counter where
  the log writing slon simply tracks when it wrote the last offline
  archive file and maintains a counter. This counter is now tracked in
  the offline replica and must increment gap free.

<li> Change the filenames of archive logs to be based on internal archive
  tracking number.  This makes it easy for the mechanism applying
  archives to figure out what needs to be applied next - just look in
  sl_archive_tracking.

<li> Fix log shipping test to accomodate the new tracking scheme, and
  update documentation to describe this better.  
</ul>
---
Generating RPMS for Slony-I
http://slony.info/
2007-06-28
Devrim Gunduz

RPM "spec" files are a part of the Slony-I build; if you require RPMs
for your flavour of RPM-based distribution, try building Slony-I thus:

<pre>
./configure
make rpm
</pre>

For systems reasonably similar to Fedora and RHAS, this will generate
.rpm files that will be compatible with your system.
---
Turkish Documentation for Slony-I
http://www.enderunix.org/docs/postgresql/
2007-06-27
Ismail Yenigul

Ismail Yenigul has made available documentation written in Turkish in
<a href=
"http://www.enderunix.org/docs/postgresql/slony_replication.odt">
StarOffice Writer format </a> or <a href=
"http://www.enderunix.org/docs/postgresql/slony_replication.pdf"> PDF
</a>.
---
Slony-I 1.2.10 Windows Binaries Available
http://developer.pgadmin.org/~hiroshi/Slony-I/
2007-06-27
Hiroshi Saito

Slony-I 1.2.10 has been built for Windows; binaries are available <a
href="http://developer.pgadmin.org/~hiroshi/Slony-I/"> here. </a>
---
Slony-I 1.2.10 Released
http://lists.slony.info/downloads/1.2/source/slony1-1.2.10.tar.bz2
2007-06-26
Chris Browne

We are pleased to announce the release of Slony-I version 1.2.10.
Sources as well as pre-built documentation is available in the
download area; users of RPM-based systems and Windows will likely see
suitable packages soon.
---
Slony-I 1.2.10 pre-release tarball #2 uploaded
http://lists.slony.info/downloads/1.2/source/slony1-1.2.10-pre2.tar.bz2
2007-06-21
Chris Browne

I have uploaded a tarball for 1.2.10 based on the fixes that have come
in this week to <a href=
"http://main.slony.info/documentation/logshipping.html"> log shipping
</a>.

<P> I have run tests of this build on Debian/Unstable on the IA-32
architecture against each of PostgreSQL 7.4, 8.0, 8.1, 8.2, and a
recent copy of CVS HEAD (e.g. - 8.3).

<P> Please <i>do not</i> release binaries based on this tarball; that
could lead to the regrettable situation of people downloading
something that isn't the true final release of 1.2.10.  The license
permits such things, but <i>please</i> wait until we call this final...
---
Logshipping issue solved
http://lists.slony.info/pipermail/slony1-commit/2007-June/001827.html
2007-06-19
Chris Browne

Jan's Patch of June 19th evidently resolves the log shipping problems
to the point that it survives the "torture test."

<P> Retesting ongoes...
---
Version 1.2.10 - log shipping problem to solve
http://lists.slony.info/pipermail/slony1-bugs/2007-June/000017.html
2007-06-12
Chris Browne

Alas, I found a problem with log shipping.  I wrote a test where I
surrounded a DDL_SCRIPT event with a series of STORE_TRIGGER events;
this led to a fairly wacky set of SYNC ID numbers getting generated.
(See the "testlogship" test in the tests area for details on the
test.)

<P> Well, comprehensively breaking it hopefully leads to a
comprehensive fix...

<P> In more positive news, the test called "testmultiplemoves" seems
to be working well, so there's more testing taking place than ever...
---
Version 1.2.10 testing still under way
http://main.slony.info/downloads/1.2
2007-06-11
Chris Browne

I have done further updates to documentation after discovering a
problem with compatibility of UPDATE FUNCTIONS with versions 8.1.0
thru 8.1.3.  Alas, you won't have much success running UPDATE
FUNCTIONS on those versions.

<P> Jan Wieck has made various casting changes throughout the code to
address a change in how version 8.3 handles the automatic casting of
string values.  This has resulted in my needing to run the latest CVS
thru a comprehensive set of cross-PG-version tests, again, because
there is a potential for this to break compatibility with elder
versions of PostgreSQL.  (Hopefully not, but we'd better test, hadn't
we...)
---
Sample of configuring Slony-I on Windows
http://winpg.jp/~saito/Slony-I-sample/
2007-05-02
Hiroshi Saito
Here are <a href="http://winpg.jp/~saito/Slony-I-sample/">sample configuration files</a> for the usage of Slony-I 1.2.9 on Windows.
---
Slony-I Release - 1.2.9
http://main.slony.info/downloads/1.2
2007-03-22
Chris Browne
We are pleased to announce the release of version 1.2.9, which may be
found <a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.9.tar.bz2">here</a>.  
There is also a <a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.9-docs.tar.bz2">Documentation tarball </a>.

<P> This release fixes several problems that were found in the 1.2 stream:
<ul>
<li> Reverted change that tried to support elderly apache rotatelogs

<li> Added a patch file to apply if you need to support elderly apache rotatelogs (tools/altperl/old-apache-rotatelogs.patch)

<li> Bug in UPDATE FUNCTIONS - wrong quoting in plpgsql function

<li> Add a regression test that runs UPDATE FUNCTIONS to ensure that it at least has no syntax errors
</ul>
---
Slony-I Release - 1.1.9
http://main.slony.info/downloads/1.1
2007-03-22
Chris Browne
We are pleased to announce the release of version 1.1.9, which may be
found <a href="http://main.slony.info/downloads/1.1/source/slony1-1.1.9.tar.bz2">here</a>.  

<P> This release fixes several problems that were found in the 1.1 stream:
<ul>
<li> Missed adding v81 SQL base files to CVS

<li> Reverted change that tried to support elderly apache rotatelogs

<li> Added a patch file to apply if you need to support elderly apache rotatelogs (tools/altperl/old-apache-rotatelogs.patch)
</ul>
---
Slony-I Release - 1.2.8
http://main.slony.info/downloads/1.2
2007-03-16
Chris Browne
We are pleased to announce the release of version 1.2.8, which may be
found <a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.8.tar.bz2">here</a>.  
There is also a <a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.8-docs.tar.bz2">Documentation tarball </a>.

<P> This release fixes several problems that were found in the 1.2 stream:
<ul>
<li> Change to rotatelogs configuration to support older versions of Apache
log rotator

<li> Fix to altperl "execute script" script to pass the filename properly

<li> Fix to <tt>src/backend/slony1_funcs.v80.sql</tt> - comment on the right function in v8.0

<li> Fix to <tt>src/slonik/slonik.c</tt> - it wasn't pulling in the right version of slony1_funcs.?.sql in some cases (notably with versions 8.1 and 8.2)

<li> Updated docs on creating releases to describe the version mismatch problem found above in <tt>slonik.c</tt>
</ul>
---
Slony-I Release - 1.1.8
http://main.slony.info/downloads/1.1
2007-03-16
Chris Browne
We are pleased to announce the release of version 1.1.8, which may be
found <a href="http://main.slony.info/downloads/1.1/source/slony1-1.1.8.tar.bz2">here</a>.  

<P> This release fixes several problems that were found in the 1.1 stream:
<ul>
<li> Change to rotatelogs configuration to support older versions of Apache
log rotator

<li> Fix to altperl "execute script" script to pass the filename properly

<li> Fix to xxid Makefile: in the 1.1 branch, xxid.v73.sql is still in
use, and should be copied to generate the other versions.

<li> Fix to <tt>src/backend/slony1_funcs.v80.sql</tt> - comment on the right function in v8.0

<li> Fix to <tt>src/slonik/slonik.c</tt> - it wasn't pulling in the right version of slony1_funcs.?.sql in some cases (notably with versions 8.1 and 8.2)

</ul>
---
Slony-I Release - 1.2.7
http://main.slony.info/downloads/1.2
2007-03-07
Chris Browne
We are pleased to announce the release of version 1.2.7, which may be
found <a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.7.tar.bz2">here</a>.  
There is also a <a href="http://main.slony.info/downloads/1.2/source/slony1-1.2.7-docs.tar.bz2">Documentation tarball </a>.

<P> This release fixes several problems that were found in the 1.2 stream:
<ul>
<li> Add remote_listen_timeout parameter to slon.conf

<p> This addresses the problem where a slon times out when accessing
sl_event if a node has been out of commission for a long time (several
days)

<li> Resolve bug #1623

<p> In this bug, big "action lists" that need to get compressed could cause
a logging printf to blow up.  Changed the logging level so that detail
is only shown at level 4, which won't bite people by default.

<li> UNINSTALL NODE failures now show node # in slonik error messages

<P> If a user ran several UNINSTALL NODE requests in a single slonik
script, and one of them broke, you'd have no ready way to tell which
node this failed on.  Added code to report the node # where it failed.

<li> Added test to test1 for function generate_sync_event() and make_function_strict

<li> Added "v81" files (for slony1_base.v81.sql, slony1_funcs.v81.sql,
xxid.v81.sql), necessary to support 8.1 "ALTER FUNCTION ... STRICT";

<li> Fixed quoting problem in generate_sync_event()

<li> Added functionality to UPDATE FUNCTIONS to make xxidin() function
STRICT; the absence of this caused postmaster to fall over when
processing MOVE SET event in PG v8.2

<li> Added documentation of an issue surrounding NULLABLE columns to the
log analysis chapter of the admin guide and to the UPGRADING docs.

<li> When you run MOVE SET, this populates sl_setsync for the moved set
  even on nodes that are not subscribed.  If, subsequent to doing this, 
  you attempt a SUBSCRIBE SET for a formerly-unsubscribed node, the
  subscription will fail right at the end when the slon tries to insert a
  new value to sl_setsync.

<P>   The fix: DELETE from sl_setsync immediately before the INSERT.  This
  will silently blow away any 'offending' sl_setsync row.

<p>  (As observed by Afilias staff...)

<li> Log shipping fix - storage of sl_setsync_offline call had a wrong
  printf type; change from %d to %s
</ul>
---
Slony-I Release - 1.1.7
http://main.slony.info/downloads/1.1
2007-03-07
Chris Browne
We are pleased to announce the release of version 1.1.7, which may be
found <a href="http://main.slony.info/downloads/1.1/source/slony1-1.1.7.tar.bz2">here</a>.  
It fixes several problems that were found in the 1.2 stream that were readily back-ported to 1.1:
<ul>
<li>Add remote_listen_timeout parameter to <tt>slon.conf</tt>

<p> This addresses the problem where a slon times out when accessing
sl_event if a node has been out of commission for a long time (several
days)

<li> Add node numbers to error reports in slonik

<p> If portions of UNINSTALL NODE break, report in the error message which node
it was working on.  That way the gentle user gets an indication as to 
which node 'broke' if the slonik script contained multiple such
requests.

<li> Applied bug fix for #1538

<p> If cluster has only one node, then remove all events up to the last
SYNC.  That allows the cleanup loop to clear out sl_log_{1/2}.
Otherwise, the log tables will forever bloat until you add a second
node...

<li> Added test to test1 for function generate_sync_event() and make_function_strict

<li> Added "v81" files (for slony1_base.v81.sql, slony1_funcs.v81.sql,
xxid.v81.sql), necessary to support 8.1 "ALTER FUNCTION ... STRICT";

<li> Fixed quoting problem in generate_sync_event()

<li> Added functionality to UPDATE FUNCTIONS to make xxidin() function
STRICT; the absence of this caused postmaster to fall over when
processing MOVE SET event in PG v8.2 (not to say that Slony-I 1.1 now
*supports* 8.2; it does not)

<li> When you run MOVE SET, this populates sl_setsync for the moved set
  even on nodes that are not subscribed.  If, subsequent to doing this, 
  you attempt a SUBSCRIBE SET for a formerly-unsubscribed node, the
  subscription will fail right at the end when the slon tries to insert a
  new value to sl_setsync.

<p>  The fix: DELETE from sl_setsync immediately before the INSERT.  This
  will silently blow away any 'offending' sl_setsync row.

<P>  (As observed by Afilias staff...)

<li> Log shipping fix - storage of sl_setsync_offline call had a wrong
  printf type; change from %d to %s
</ul>
---
Slony-I New Web Site!
http://main.slony.info
2007-03-02
Chris Browne
We are pleased to announce the release of the new Slony-I web site at <tt>main.slony.info</tt>.
---
Slony-I New CVS Site!
http://main.slony.info/cvs.html
2007-01-20
<a href="mailto:cbbrowne@acm.org">Chris Browne</a>
The Slony-I project is now making active use of CVS repositories at <tt>cvs.slony.info</tt>; this replaces the former
CVS repositories at gBorg.  We thank the gBorg operators for their support over the last few years, and Command Prompt for their provision of hardware, administrative, and hosting services for <tt>cvs.slony.info</tt>.
---
