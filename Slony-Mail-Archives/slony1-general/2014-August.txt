From rdessort at evolix.fr  Fri Aug  1 05:15:06 2014
From: rdessort at evolix.fr (Romain Dessort)
Date: Fri, 01 Aug 2014 14:15:06 +0200
Subject: [Slony1-general] Initial sync copies tables infinitely
Message-ID: <1406887682-sup-6188@dual.evolix.net>

Hello,

I have a strange problem after adding a third node to my Slony cluster:

Up to now, I have a really simple Slony cluster: one master (node1), and one
slave (node2), which is subscribed to a unique set (set1). Everything
works fine for several years.
But now I have to add a second slave (node3) subscribed to the same set as
node2. So I followed the documentation?[1] to configure it and then started the
slon daemon on node3.
I see in the slon log file that tables are correctly copied.
Ok, I wait some days (about 50GB of data to copy), but here is the weird
problem: tables on the new slave seem to grow infinitely, but without data in
it!

Example with the table ?affectation?: normal size on master: 149MB.
But on the new slave:

    =# SELECT relname AS "relation", pg_size_pretty(pg_relation_size(C.oid)) AS "size"
      FROM pg_class C LEFT JOIN pg_namespace N ON (N.oid = C.relnamespace)
      WHERE nspname NOT IN ('pg_catalog', 'information_schema') AND relname='affectation';
      relation   |  size  
    -------------+--------
     affectation | 22 GB
    (1 row)

But the table is empty:

    =# select * from affectation;
     affectation_id | datedu | dateau | passager | produitchoisi 
    ----------------+--------+--------+----------+---------------
    (0 rows)

If a do a VACUUM on slave, all tables size goes to zero.

In the log file, tables are recopied each 11/12 minutes: 

    # grep '"public"."affectation"' /var/log/slony1/node3-gesto2.log
    [?]
    2014-08-01 12:06:14 CEST CONFIG remoteWorkerThread_1: prepare to copy table "public"."affectation"
    2014-08-01 12:06:20 CEST CONFIG remoteWorkerThread_1: copy table "public"."affectation"
    2014-08-01 12:06:20 CEST CONFIG remoteWorkerThread_1: Begin COPY of table "public"."affectation"
    NOTICE:  truncate of "public"."affectation" failed - doing delete
    2014-08-01 12:06:27 CEST CONFIG remoteWorkerThread_1: 124888731 bytes copied for table "public"."affectation"
    2014-08-01 12:06:31 CEST CONFIG remoteWorkerThread_1: 10.932 seconds to copy table "public"."affectation"
    2014-08-01 12:12:23 CEST CONFIG remoteWorkerThread_1: prepare to copy table "public"."affectation"
    2014-08-01 12:12:28 CEST CONFIG remoteWorkerThread_1: copy table "public"."affectation"
    2014-08-01 12:12:28 CEST CONFIG remoteWorkerThread_1: Begin COPY of table "public"."affectation"
    NOTICE:  truncate of "public"."affectation" failed - doing delete
    2014-08-01 12:12:35 CEST CONFIG remoteWorkerThread_1: 124892017 bytes copied for table "public"."affectation"
    2014-08-01 12:12:39 CEST CONFIG remoteWorkerThread_1: 10.954 seconds to copy table "public"."affectation"
    2014-08-01 12:18:33 CEST CONFIG remoteWorkerThread_1: prepare to copy table "public"."affectation"
    2014-08-01 12:18:38 CEST CONFIG remoteWorkerThread_1: copy table "public"."affectation"
    2014-08-01 12:18:38 CEST CONFIG remoteWorkerThread_1: Begin COPY of table "public"."affectation"
    NOTICE:  truncate of "public"."affectation" failed - doing delete
    2014-08-01 12:18:45 CEST CONFIG remoteWorkerThread_1: 124892761 bytes copied for table "public"."affectation"
    2014-08-01 12:18:49 CEST CONFIG remoteWorkerThread_1: 11.409 seconds to copy table "public"."affectation"
    [?]

Note the correct table size (124742845 bytes) is copied.

To isolate the problem, I tried to create a new table, add it to a second set and
subscribe it to node3: everything ok, the copy process finish successfully. So
the problem seems to come from the set1 specifically.

All nodes run Slony 2.1.4 and PostgreSQL 9.3.4 under the same configuration.

Do you have any ideas about this problem?
It seems that Slony don't/can't acknowledge that tables are copied and so redo
the copy again and again.

[1]?http://slony.info/documentation/2.1/modifyingthings.html#AEN1048

Thanks for any hint about that.
Regards,
-- 
Romain Dessort <rdessort at evolix.fr> GnuPG: 3072D/724BC532
Evolix ? H?bergement et Infog?rance Open Source http://www.evolix.fr/

From cbbrowne at afilias.info  Fri Aug  1 09:52:58 2014
From: cbbrowne at afilias.info (Christopher Browne)
Date: Fri, 1 Aug 2014 12:52:58 -0400
Subject: [Slony1-general] Initial sync copies tables infinitely
In-Reply-To: <1406887682-sup-6188@dual.evolix.net>
References: <1406887682-sup-6188@dual.evolix.net>
Message-ID: <CANfbgbaDafb4CusHmb1+mnpqNss9vzXJu7p_qwNiU3MiCsu8QA@mail.gmail.com>

I should expect that there'd be more in the log than that.

What you are showing seems perfectly appropriate; what I imagine is missing
is that at the end, something is going wrong, the set is treated as NOT
having subscribed successfully, and it (correctly, generally speaking)
tries again a bit later.

Unfortunately, the "something going wrong" is some persistent problem, so
the subscriptions to tables never succeed.

There should surely be more in the log.

Here's what the logs commonly look like at subscription time:

DEBUG2 remoteWorkerThread_1: Received event #1 from 5000000017
type:ENABLE_SUBSCRIPTION
INFO   copy_set 1 - omit=f - bool=0
INFO   omit is FALSE
CONFIG version for "dbname=slonyregress1 host=localhost user=postgres
port=7099" is 90304
DEBUG1 copy_set_1 "dbname=slonyregress1 host=localhost user=postgres
port=7099": backend pid = 19464
CONFIG remoteWorkerThread_1: connected to provider DB
CONFIG remoteWorkerThread_1: prepare to copy table "public"."table1"
CONFIG remoteWorkerThread_1: prepare to copy table "public"."table2"
CONFIG remoteWorkerThread_1: prepare to copy table "public"."table4"
CONFIG remoteWorkerThread_1: prepare to copy table "public"."table5"
CONFIG remoteWorkerThread_1: all tables for set 1 found on subscriber
CONFIG remoteWorkerThread_1: copy table "public"."table1"
CONFIG remoteWorkerThread_1: Begin COPY of table "public"."table1"
NOTICE:  truncate of "public"."table1" failed - doing delete
CONFIG remoteWorkerThread_1: 32 bytes copied for table "public"."table1"
CONFIG remoteWorkerThread_1: 0.150 seconds to copy table "public"."table1"
CONFIG remoteWorkerThread_1: copy table "public"."table2"
CONFIG remoteWorkerThread_1: Begin COPY of table "public"."table2"
NOTICE:  truncate of "public"."table2" succeeded
CONFIG remoteWorkerThread_1: 36 bytes copied for table "public"."table2"
CONFIG remoteWorkerThread_1: 0.219 seconds to copy table "public"."table2"
CONFIG remoteWorkerThread_1: copy table "public"."table4"
CONFIG remoteWorkerThread_1: Begin COPY of table "public"."table4"
NOTICE:  truncate of "public"."table4" succeeded
CONFIG remoteWorkerThread_1: 253 bytes copied for table "public"."table4"
CONFIG remoteWorkerThread_1: 0.238 seconds to copy table "public"."table4"
CONFIG remoteWorkerThread_1: copy table "public"."table5"
CONFIG remoteWorkerThread_1: Begin COPY of table "public"."table5"
NOTICE:  truncate of "public"."table5" succeeded
CONFIG remoteWorkerThread_1: 0 bytes copied for table "public"."table5"
CONFIG remoteWorkerThread_1: 0.167 seconds to copy table "public"."table5"
INFO   remoteWorkerThread_1: copy_set SYNC found, use event seqno
5000000015.
INFO   remoteWorkerThread_1: 0.004 seconds to build initial setsync status
DEBUG1 remoteWorkerThread_1: disconnected from provider DB
INFO   copy_set 1 done in 0.798 seconds
CONFIG enableSubscription: sub_set=1
DEBUG2 sched_wakeup_node(): no_id=1 (0 threads + worker signaled)
CONFIG storeListen: li_origin=1 li_receiver=2 li_provider=1
DEBUG2 sched_wakeup_node(): no_id=1 (0 threads + worker signaled)
DEBUG2 sched_wakeup_node(): no_id=1 (0 threads + worker signaled)
CONFIG remoteWorkerThread_1: update provider configuration
CONFIG remoteWorkerThread_1: added active set 1 to provider 1

If you have logging turned way down so all you're seeing is CONFIG and
higher, you should nonetheless see the bulk of the above (and note the bits
*after* the last line indicating 0.167 seconds to copy table5).

If an error occurred, that should surely be logged, and that would be the
reason to not get the lines...

INFO   copy_set 1 done in 0.798 seconds
CONFIG enableSubscription: sub_set=1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140801/e34caf4b/attachment.html 

From rdessort at evolix.fr  Sun Aug  3 08:13:49 2014
From: rdessort at evolix.fr (Romain Dessort)
Date: Sun, 03 Aug 2014 17:13:49 +0200
Subject: [Slony1-general] Initial sync copies tables infinitely
In-Reply-To: <CANfbgbaDafb4CusHmb1+mnpqNss9vzXJu7p_qwNiU3MiCsu8QA@mail.gmail.com>
References: <1406887682-sup-6188@dual.evolix.net>
	<CANfbgbaDafb4CusHmb1+mnpqNss9vzXJu7p_qwNiU3MiCsu8QA@mail.gmail.com>
Message-ID: <1407077145-sup-8353@dual.evolix.net>

Excerpts from Christopher Browne's message of 2014-08-01 18:52:58 +0200:
> I should expect that there'd be more in the log than that.
> 
> What you are showing seems perfectly appropriate; what I imagine is missing
> is that at the end, something is going wrong, the set is treated as NOT
> having subscribed successfully, and it (correctly, generally speaking)
> tries again a bit later.
> 
> Unfortunately, the "something going wrong" is some persistent problem, so
> the subscriptions to tables never succeed.
> 
> There should surely be more in the log.
> [?]

You have right, there is indeed an error message is the log? I haven't
seen it before because of a to high debug level and a huge amount of
tables and sequences in the set.

    2014-08-03 16:17:52 CEST CONFIG remoteWorkerThread_1: copy table "public"."selectiondeproduit_produit_map"
    2014-08-03 16:17:53 CEST ERROR  remoteWorkerThread_1: "lock table "_replication".sl_config_lock;select "_replication".setAddTable_int(1, 170, '"public"."selectiondeproduit_produit_map"', 'selectiondeproduit_produit_map_idx', 'Table public.selectiondeproduit_produit_map with primary key'); " PGRES_FATAL_ERROR ERROR:  Slony-I: setAddTable_int(): table "public"."selectiondeproduit_produit_map" has no index selectiondeproduit_produit_map_idx

The index of selectiondeproduit_produit_map has apparently been renamed on node1 but Slony was not been notified about this change and the old name is still present in sl_tables table.
I going to fix that.

Thanks for your help about this straightforward problem!
-- 
Romain Dessort <rdessort at evolix.fr> GnuPG: 3072D/724BC532
Evolix ? H?bergement et Infog?rance Open Source http://www.evolix.fr/

From nag1010 at gmail.com  Tue Aug  5 21:56:46 2014
From: nag1010 at gmail.com (Venkata Balaji N)
Date: Wed, 6 Aug 2014 14:56:46 +1000
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
Message-ID: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>

Hello,

Can anyone please help us know if there are Slony-1, preferably 2.X version
binaries available for Solaris 10 SPARC ?

Thanks in advance for your help !

Regards,
Venkata B N
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140806/18d7ddfd/attachment.htm 

From steve at ssinger.info  Wed Aug  6 04:25:54 2014
From: steve at ssinger.info (Steve Singer)
Date: Wed, 6 Aug 2014 07:25:54 -0400
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
Message-ID: <BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>

On Wed, 6 Aug 2014, Venkata Balaji N wrote:

> Hello,
> Can anyone please help us know if there are Slony-1, preferably 2.X version binaries available for
> Solaris 10 SPARC ?
> 
> Thanks in advance for your help !

I don't think you will find pre-built binaries for any recent version of 
slony for Solaris SPARC.  Your best bet is to compile your own binaries from 
source.




> 
> Regards,
> Venkata B N
> 
>


From nag1010 at gmail.com  Thu Aug  7 22:25:30 2014
From: nag1010 at gmail.com (Venkata Balaji N)
Date: Fri, 8 Aug 2014 15:25:30 +1000
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
Message-ID: <CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>

Hi Steve,

We are in the process of compiling our own binaries. Thank you for your
reply !

Regards,
Venkata B N


On Wed, Aug 6, 2014 at 9:25 PM, Steve Singer <steve at ssinger.info> wrote:

> On Wed, 6 Aug 2014, Venkata Balaji N wrote:
>
>  Hello,
>> Can anyone please help us know if there are Slony-1, preferably 2.X
>> version binaries available for
>> Solaris 10 SPARC ?
>>
>> Thanks in advance for your help !
>>
>
> I don't think you will find pre-built binaries for any recent version of
> slony for Solaris SPARC.  Your best bet is to compile your own binaries
> from source.
>
>
>
>
>
>> Regards,
>> Venkata B N
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140808/db734fd3/attachment.htm 

From nag1010 at gmail.com  Sat Aug  9 23:19:04 2014
From: nag1010 at gmail.com (Venkata Balaji N)
Date: Sun, 10 Aug 2014 16:19:04 +1000
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
	<CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>
Message-ID: <CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>

Hi Steve,

We are getting the following message while running *make *to install
Slony1-2.2.3 with PostgreSQL-9.2.6 on Solaris 10 SPARC.


ld: fatal: Symbol referencing errors. No output written to slonik
make[2]: *** [slonik] Error 1
make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
make: *** [all] Error 2


-bash-3.00$ uname -a
SunOS sunfire2 5.10 Generic sun4u sparc SUNW,Sun-Fire-V210

Can you please help us in this regard ?

Regards,
VBN


On Fri, Aug 8, 2014 at 3:25 PM, Venkata Balaji N <nag1010 at gmail.com> wrote:

> Hi Steve,
>
> We are in the process of compiling our own binaries. Thank you for your
> reply !
>
> Regards,
> Venkata B N
>
>
> On Wed, Aug 6, 2014 at 9:25 PM, Steve Singer <steve at ssinger.info> wrote:
>
>> On Wed, 6 Aug 2014, Venkata Balaji N wrote:
>>
>>  Hello,
>>> Can anyone please help us know if there are Slony-1, preferably 2.X
>>> version binaries available for
>>> Solaris 10 SPARC ?
>>>
>>> Thanks in advance for your help !
>>>
>>
>> I don't think you will find pre-built binaries for any recent version of
>> slony for Solaris SPARC.  Your best bet is to compile your own binaries
>> from source.
>>
>>
>>
>>
>>
>>> Regards,
>>> Venkata B N
>>>
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140810/1a22f1d6/attachment.htm 

From steve at ssinger.info  Sun Aug 10 08:35:42 2014
From: steve at ssinger.info (Steve Singer)
Date: Sun, 10 Aug 2014 11:35:42 -0400
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
	<CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>
	<CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>
Message-ID: <BLU437-SMTP300E32D6FB7C0AE008DEDDDCEC0@phx.gbl>

On Sun, 10 Aug 2014, Venkata Balaji N wrote:



> Hi Steve,
> We are getting the following message while running make to install Slony1-2.2.3 with PostgreSQL-9.2.6
> on Solaris 10 SPARC.?
> 
> 
> ld: fatal: Symbol referencing errors. No output written to slonik

What symbols is it having a problem referencing?  I suspect it says that 
somewhere in the error output from LD.


> make[2]: *** [slonik] Error 1
> make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
> make[1]: *** [all] Error 2
> make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
> make: *** [all] Error 2
> 
> 
> -bash-3.00$ uname -a
> SunOS sunfire2 5.10 Generic sun4u sparc SUNW,Sun-Fire-V210
> 
> Can you please help us in this regard ?
> 
> Regards,
> VBN
> 
> 
> On Fri, Aug 8, 2014 at 3:25 PM, Venkata Balaji N <nag1010 at gmail.com> wrote:
>       Hi Steve,
> We are in the process of compiling our own binaries. Thank you for your reply !
> 
> Regards,
> Venkata B N
> 
> 
> On Wed, Aug 6, 2014 at 9:25 PM, Steve Singer <steve at ssinger.info> wrote:
>       On Wed, 6 Aug 2014, Venkata Balaji N wrote:
>
>             Hello,
>             Can anyone please help us know if there are Slony-1, preferably 2.X
>             version binaries available for
>             Solaris 10 SPARC ?
>
>             Thanks in advance for your help !
> 
> 
> I don't think you will find pre-built binaries for any recent version of slony for
> Solaris SPARC. ?Your best bet is to compile your own binaries from source.
> 
> 
> 
> 
>
>       Regards,
>       Venkata B N
> 
> 
> 
> 
> 
> 
>

From nag1010 at gmail.com  Sun Aug 10 16:47:20 2014
From: nag1010 at gmail.com (Venkata Balaji N)
Date: Mon, 11 Aug 2014 09:47:20 +1000
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <BLU437-SMTP300E32D6FB7C0AE008DEDDDCEC0@phx.gbl>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
	<CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>
	<CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>
	<BLU437-SMTP300E32D6FB7C0AE008DEDDDCEC0@phx.gbl>
Message-ID: <CAEyp7J8=anjbdE0g9EnraZCXkrGenN-xEvFxgexqL+mVSob3Ew@mail.gmail.com>

Hi Steve,

Yes. It says error output from LD. Below is the complete output.

Any help would be appreciated. It is critical for us.

make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slonik'
/opt/SUNWspro/bin/cc -xO3 -xarch=v9 -xspace -W0,-Lt -W2,-Rcond_elim -Xa
-xildoff -xc99=none -xCC -I../../src/slonik -I../..
-DPGSHARE="\"/opt/postgres/9.2.6/share/\""  slonik.o dbutil.o parser.o
 ../parsestatements/scanner.o scan.o -L/opt/postgres/9.2.6/lib/ -lpq
 -lsocket -R/opt/postgres/9.2.6/lib/ -o slonik
Undefined                       first referenced
 symbol                             in file
alloca                              slonik.o
ld: fatal: Symbol referencing errors. No output written to slonik
make[2]: *** [slonik] Error 1
make[2]: Leaving directory `/home/arul/slony1-2.2.3/src/slonik'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/arul/slony1-2.2.3/src'
make: *** [all] Error 2

Regards,
vbn



On Mon, Aug 11, 2014 at 1:35 AM, Steve Singer <steve at ssinger.info> wrote:

> On Sun, 10 Aug 2014, Venkata Balaji N wrote:
>
>
>
>  Hi Steve,
>> We are getting the following message while running make to install
>> Slony1-2.2.3 with PostgreSQL-9.2.6
>> on Solaris 10 SPARC.
>>
>>
>> ld: fatal: Symbol referencing errors. No output written to slonik
>>
>
> What symbols is it having a problem referencing?  I suspect it says that
> somewhere in the error output from LD.
>
>
>
>  make[2]: *** [slonik] Error 1
>> make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
>> make[1]: *** [all] Error 2
>> make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
>> make: *** [all] Error 2
>>
>>
>> -bash-3.00$ uname -a
>> SunOS sunfire2 5.10 Generic sun4u sparc SUNW,Sun-Fire-V210
>>
>> Can you please help us in this regard ?
>>
>> Regards,
>> VBN
>>
>>
>> On Fri, Aug 8, 2014 at 3:25 PM, Venkata Balaji N <nag1010 at gmail.com>
>> wrote:
>>       Hi Steve,
>> We are in the process of compiling our own binaries. Thank you for your
>> reply !
>>
>> Regards,
>> Venkata B N
>>
>>
>> On Wed, Aug 6, 2014 at 9:25 PM, Steve Singer <steve at ssinger.info> wrote:
>>       On Wed, 6 Aug 2014, Venkata Balaji N wrote:
>>
>>             Hello,
>>             Can anyone please help us know if there are Slony-1,
>> preferably 2.X
>>             version binaries available for
>>             Solaris 10 SPARC ?
>>
>>             Thanks in advance for your help !
>>
>>
>> I don't think you will find pre-built binaries for any recent version of
>> slony for
>> Solaris SPARC.  Your best bet is to compile your own binaries from source.
>>
>>
>>
>>
>>
>>       Regards,
>>       Venkata B N
>>
>>
>>
>>
>>
>>
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140811/265f16d6/attachment.htm 

From nag1010 at gmail.com  Sun Aug 10 16:51:12 2014
From: nag1010 at gmail.com (Venkata Balaji N)
Date: Mon, 11 Aug 2014 09:51:12 +1000
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <CAEyp7J8=anjbdE0g9EnraZCXkrGenN-xEvFxgexqL+mVSob3Ew@mail.gmail.com>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
	<CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>
	<CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>
	<BLU437-SMTP300E32D6FB7C0AE008DEDDDCEC0@phx.gbl>
	<CAEyp7J8=anjbdE0g9EnraZCXkrGenN-xEvFxgexqL+mVSob3Ew@mail.gmail.com>
Message-ID: <CAEyp7J-M9bsrL2x=hQcV9TJsYJOUfUcwPECgChf21t0d5sR0-w@mail.gmail.com>

Sorry. Below is the complete output of make. If it might help

make[1]: Entering directory `/home/postgres/slony1-2.2.3/src'
make[2]: Entering directory
`/home/postgres/slony1-2.2.3/src/parsestatements'
./test-scanner < /dev/null > emptytestresult.log
./test-scanner < ./test_sql.sql > test_sql.log
./test-scanner < ./cstylecomments.sql > cstylecomments.log
make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/parsestatements'
make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slon'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slon'
make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slonik'
/opt/SUNWspro/bin/cc -xO3 -xarch=v9 -xspace -W0,-Lt -W2,-Rcond_elim -Xa
-xildoff -xc99=none -xCC -I../../src/slonik -I../..
-DPGSHARE="\"/opt/postgres/9.2.6/share/\""  slonik.o dbutil.o parser.o
 ../parsestatements/scanner.o scan.o -L/opt/postgres/9.2.6/lib/ -lpq
 -lsocket -R/opt/postgres/9.2.6/lib/ -o slonik
Undefined                       first referenced
 symbol                             in file
alloca                              slonik.o
ld: fatal: Symbol referencing errors. No output written to slonik
make[2]: *** [slonik] Error 1
make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
make: *** [all] Error 2

Regards,
VBN


On Mon, Aug 11, 2014 at 9:47 AM, Venkata Balaji N <nag1010 at gmail.com> wrote:

> Hi Steve,
>
> Yes. It says error output from LD. Below is the complete output.
>
> Any help would be appreciated. It is critical for us.
>
> make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slonik'
> /opt/SUNWspro/bin/cc -xO3 -xarch=v9 -xspace -W0,-Lt -W2,-Rcond_elim -Xa
> -xildoff -xc99=none -xCC -I../../src/slonik -I../..
> -DPGSHARE="\"/opt/postgres/9.2.6/share/\""  slonik.o dbutil.o parser.o
>  ../parsestatements/scanner.o scan.o -L/opt/postgres/9.2.6/lib/ -lpq
>  -lsocket -R/opt/postgres/9.2.6/lib/ -o slonik
> Undefined                       first referenced
>  symbol                             in file
> alloca                              slonik.o
> ld: fatal: Symbol referencing errors. No output written to slonik
> make[2]: *** [slonik] Error 1
> make[2]: Leaving directory `/home/arul/slony1-2.2.3/src/slonik'
> make[1]: *** [all] Error 2
> make[1]: Leaving directory `/home/arul/slony1-2.2.3/src'
> make: *** [all] Error 2
>
> Regards,
> vbn
>
>
>
> On Mon, Aug 11, 2014 at 1:35 AM, Steve Singer <steve at ssinger.info> wrote:
>
>> On Sun, 10 Aug 2014, Venkata Balaji N wrote:
>>
>>
>>
>>  Hi Steve,
>>> We are getting the following message while running make to install
>>> Slony1-2.2.3 with PostgreSQL-9.2.6
>>> on Solaris 10 SPARC.
>>>
>>>
>>> ld: fatal: Symbol referencing errors. No output written to slonik
>>>
>>
>> What symbols is it having a problem referencing?  I suspect it says that
>> somewhere in the error output from LD.
>>
>>
>>
>>  make[2]: *** [slonik] Error 1
>>> make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
>>> make[1]: *** [all] Error 2
>>> make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
>>> make: *** [all] Error 2
>>>
>>>
>>> -bash-3.00$ uname -a
>>> SunOS sunfire2 5.10 Generic sun4u sparc SUNW,Sun-Fire-V210
>>>
>>> Can you please help us in this regard ?
>>>
>>> Regards,
>>> VBN
>>>
>>>
>>> On Fri, Aug 8, 2014 at 3:25 PM, Venkata Balaji N <nag1010 at gmail.com>
>>> wrote:
>>>       Hi Steve,
>>> We are in the process of compiling our own binaries. Thank you for your
>>> reply !
>>>
>>> Regards,
>>> Venkata B N
>>>
>>>
>>> On Wed, Aug 6, 2014 at 9:25 PM, Steve Singer <steve at ssinger.info> wrote:
>>>       On Wed, 6 Aug 2014, Venkata Balaji N wrote:
>>>
>>>             Hello,
>>>             Can anyone please help us know if there are Slony-1,
>>> preferably 2.X
>>>             version binaries available for
>>>             Solaris 10 SPARC ?
>>>
>>>             Thanks in advance for your help !
>>>
>>>
>>> I don't think you will find pre-built binaries for any recent version of
>>> slony for
>>> Solaris SPARC.  Your best bet is to compile your own binaries from
>>> source.
>>>
>>>
>>>
>>>
>>>
>>>       Regards,
>>>       Venkata B N
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140811/3667b1b6/attachment.htm 

From nag1010 at gmail.com  Sun Aug 10 23:02:42 2014
From: nag1010 at gmail.com (Venkata Balaji N)
Date: Mon, 11 Aug 2014 16:02:42 +1000
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <CAEyp7J-M9bsrL2x=hQcV9TJsYJOUfUcwPECgChf21t0d5sR0-w@mail.gmail.com>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
	<CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>
	<CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>
	<BLU437-SMTP300E32D6FB7C0AE008DEDDDCEC0@phx.gbl>
	<CAEyp7J8=anjbdE0g9EnraZCXkrGenN-xEvFxgexqL+mVSob3Ew@mail.gmail.com>
	<CAEyp7J-M9bsrL2x=hQcV9TJsYJOUfUcwPECgChf21t0d5sR0-w@mail.gmail.com>
Message-ID: <CAEyp7J_6KW8Vc9tFORxMPQrHFq7f+ercTyaMf0OAh=yNDgpKbA@mail.gmail.com>

We are through this problem. Slony1-2.2.3 successfully installed with
PostgreSQL-9.2.6 on Solaris10 SPARC.

Thanks for your responses.

Regards,
VBN


On Mon, Aug 11, 2014 at 9:51 AM, Venkata Balaji N <nag1010 at gmail.com> wrote:

> Sorry. Below is the complete output of make. If it might help
>
> make[1]: Entering directory `/home/postgres/slony1-2.2.3/src'
> make[2]: Entering directory
> `/home/postgres/slony1-2.2.3/src/parsestatements'
> ./test-scanner < /dev/null > emptytestresult.log
> ./test-scanner < ./test_sql.sql > test_sql.log
> ./test-scanner < ./cstylecomments.sql > cstylecomments.log
> make[2]: Leaving directory
> `/home/postgres/slony1-2.2.3/src/parsestatements'
> make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slon'
> make[2]: Nothing to be done for `all'.
> make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slon'
> make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slonik'
> /opt/SUNWspro/bin/cc -xO3 -xarch=v9 -xspace -W0,-Lt -W2,-Rcond_elim -Xa
> -xildoff -xc99=none -xCC -I../../src/slonik -I../..
> -DPGSHARE="\"/opt/postgres/9.2.6/share/\""  slonik.o dbutil.o parser.o
>  ../parsestatements/scanner.o scan.o -L/opt/postgres/9.2.6/lib/ -lpq
>  -lsocket -R/opt/postgres/9.2.6/lib/ -o slonik
> Undefined                       first referenced
>  symbol                             in file
> alloca                              slonik.o
> ld: fatal: Symbol referencing errors. No output written to slonik
> make[2]: *** [slonik] Error 1
> make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
> make[1]: *** [all] Error 2
> make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
> make: *** [all] Error 2
>
> Regards,
> VBN
>
>
> On Mon, Aug 11, 2014 at 9:47 AM, Venkata Balaji N <nag1010 at gmail.com>
> wrote:
>
>> Hi Steve,
>>
>> Yes. It says error output from LD. Below is the complete output.
>>
>> Any help would be appreciated. It is critical for us.
>>
>> make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slonik'
>> /opt/SUNWspro/bin/cc -xO3 -xarch=v9 -xspace -W0,-Lt -W2,-Rcond_elim -Xa
>> -xildoff -xc99=none -xCC -I../../src/slonik -I../..
>> -DPGSHARE="\"/opt/postgres/9.2.6/share/\""  slonik.o dbutil.o parser.o
>>  ../parsestatements/scanner.o scan.o -L/opt/postgres/9.2.6/lib/ -lpq
>>  -lsocket -R/opt/postgres/9.2.6/lib/ -o slonik
>> Undefined                       first referenced
>>  symbol                             in file
>> alloca                              slonik.o
>> ld: fatal: Symbol referencing errors. No output written to slonik
>> make[2]: *** [slonik] Error 1
>> make[2]: Leaving directory `/home/arul/slony1-2.2.3/src/slonik'
>> make[1]: *** [all] Error 2
>> make[1]: Leaving directory `/home/arul/slony1-2.2.3/src'
>>  make: *** [all] Error 2
>>
>> Regards,
>> vbn
>>
>>
>>
>> On Mon, Aug 11, 2014 at 1:35 AM, Steve Singer <steve at ssinger.info> wrote:
>>
>>> On Sun, 10 Aug 2014, Venkata Balaji N wrote:
>>>
>>>
>>>
>>>  Hi Steve,
>>>> We are getting the following message while running make to install
>>>> Slony1-2.2.3 with PostgreSQL-9.2.6
>>>> on Solaris 10 SPARC.
>>>>
>>>>
>>>> ld: fatal: Symbol referencing errors. No output written to slonik
>>>>
>>>
>>> What symbols is it having a problem referencing?  I suspect it says that
>>> somewhere in the error output from LD.
>>>
>>>
>>>
>>>  make[2]: *** [slonik] Error 1
>>>> make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
>>>> make[1]: *** [all] Error 2
>>>> make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
>>>> make: *** [all] Error 2
>>>>
>>>>
>>>> -bash-3.00$ uname -a
>>>> SunOS sunfire2 5.10 Generic sun4u sparc SUNW,Sun-Fire-V210
>>>>
>>>> Can you please help us in this regard ?
>>>>
>>>> Regards,
>>>> VBN
>>>>
>>>>
>>>> On Fri, Aug 8, 2014 at 3:25 PM, Venkata Balaji N <nag1010 at gmail.com>
>>>> wrote:
>>>>       Hi Steve,
>>>> We are in the process of compiling our own binaries. Thank you for your
>>>> reply !
>>>>
>>>> Regards,
>>>> Venkata B N
>>>>
>>>>
>>>> On Wed, Aug 6, 2014 at 9:25 PM, Steve Singer <steve at ssinger.info>
>>>> wrote:
>>>>       On Wed, 6 Aug 2014, Venkata Balaji N wrote:
>>>>
>>>>             Hello,
>>>>             Can anyone please help us know if there are Slony-1,
>>>> preferably 2.X
>>>>             version binaries available for
>>>>             Solaris 10 SPARC ?
>>>>
>>>>             Thanks in advance for your help !
>>>>
>>>>
>>>> I don't think you will find pre-built binaries for any recent version
>>>> of slony for
>>>> Solaris SPARC.  Your best bet is to compile your own binaries from
>>>> source.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>       Regards,
>>>>       Venkata B N
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140811/63b9a371/attachment-0001.htm 

From david at fetter.org  Mon Aug 11 07:04:46 2014
From: david at fetter.org (David Fetter)
Date: Mon, 11 Aug 2014 07:04:46 -0700
Subject: [Slony1-general] How to get database profiling with slony
In-Reply-To: <53C7F4CC.4060406@wi3ck.info>
References: <CADK3HHK=sck2Jf-jm=9pAEpLbgSOEL-6cHp0nckECD5vVuKqPw@mail.gmail.com>
	<CANfbgba=h8bdk3HStFtCYgoBnTkQstJt-Tpez6EPTKKLgyCgoQ@mail.gmail.com>
	<CADK3HHKN8oE=M7q8g7umt=nQ26Q0Huyfm0F4Wri4NrP81K-e1w@mail.gmail.com>
	<CANfbgbbmougM1r_W-h_BYYNt-5LJbMFfHDgKMegDPcGcr7L6mA@mail.gmail.com>
	<53C7F4CC.4060406@wi3ck.info>
Message-ID: <20140811140446.GA10135@fetter.org>

On Thu, Jul 17, 2014 at 12:07:40PM -0400, Jan Wieck wrote:
> On 07/16/14 14:52, Christopher Browne wrote:
> > On Wed, Jul 16, 2014 at 1:14 PM, Dave Cramer <davecramer at gmail.com
> > <mailto:davecramer at gmail.com>> wrote:
> >
> >     Not sure I was clear enough. The goal is to find out what the
> >     read/write/tx profile of the application is as if slony wasn't there.
> >
> >
> > OK, that's a useful clarification.
> >
> > That makes things a bit harder, as Slony does a fair bit of activity
> > (e.g. - queries to manage events, queries to determine what data to
> > replicate,  cleanup of old data) that would also need to be accounted for.
> >
> > I'm not quite sure how to account for that load.
> >
> >     If your intent was to suggest that if we aggregated slony stats so
> >     that we could subsequently use them to get the net statistics then
> >     yes, this would work
> >
> >
> > Cool, sounds like it's a broadly helpful thing that should be helpful
> > for your case, and, I'd hope, others.
> >
> > BTW, Jan has had some thoughts about trying to run the cleanup more
> > often on the basis that if the cleanup frequency is higher than the
> > Postgres checkpoint frequency, we might be able to avoid pushing
> > sl_log_* to disk, which would mean that the cost of replication turns
> > out to be lower than people were thinking.
> 
> Correct. Not only lower in volume, but it would turn out that most of 
> the writes added by Slony go to WAL, which are sequential writes and 
> thus can often be included in just a slightly larger IO. So that would 
> be a double win.

Any ideas as to how to establish this frequency?  I'm guessing the
simplest approach would be to look at checkpoint_timeout and do
something less than that.

Up in the air is under what circumstances, if any, adjusting this
dynamically would be worthwhile.  Intuitively, in situations where
checkpoints are happening with extreme frequency, adding even more
load seems like it might be a net loss, but again that's a thing that
should be measured under a reasonable sampling of high loads, not
intuited.

Cheers,
David.
-- 
David Fetter <david at fetter.org> http://fetter.org/
Phone: +1 415 235 3778  AIM: dfetter666  Yahoo!: dfetter
Skype: davidfetter      XMPP: david.fetter at gmail.com
iCal: webcal://www.tripit.com/feed/ical/people/david74/tripit.ics

Remember to vote!
Consider donating to Postgres: http://www.postgresql.org/about/donate

From steve at ssinger.info  Mon Aug 11 07:26:05 2014
From: steve at ssinger.info (Steve Singer)
Date: Mon, 11 Aug 2014 10:26:05 -0400
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <CAEyp7J_6KW8Vc9tFORxMPQrHFq7f+ercTyaMf0OAh=yNDgpKbA@mail.gmail.com>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>	<CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>	<CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>	<BLU437-SMTP300E32D6FB7C0AE008DEDDDCEC0@phx.gbl>	<CAEyp7J8=anjbdE0g9EnraZCXkrGenN-xEvFxgexqL+mVSob3Ew@mail.gmail.com>	<CAEyp7J-M9bsrL2x=hQcV9TJsYJOUfUcwPECgChf21t0d5sR0-w@mail.gmail.com>
	<CAEyp7J_6KW8Vc9tFORxMPQrHFq7f+ercTyaMf0OAh=yNDgpKbA@mail.gmail.com>
Message-ID: <BLU436-SMTP159CD9BAF69F7C5E4CA9AB0DCED0@phx.gbl>

On 08/11/2014 02:02 AM, Venkata Balaji N wrote:
>
> We are through this problem. Slony1-2.2.3 successfully installed with
> PostgreSQL-9.2.6 on Solaris10 SPARC.
>
> Thanks for your responses.
>

What was the solution?

Do we need to make a change to the slony makefiles to get things to link 
properly on solaris sparc?


> Regards,
> VBN
>
>
> On Mon, Aug 11, 2014 at 9:51 AM, Venkata Balaji N <nag1010 at gmail.com
> <mailto:nag1010 at gmail.com>> wrote:
>
>     Sorry. Below is the complete output of make. If it might help
>
>     make[1]: Entering directory `/home/postgres/slony1-2.2.3/src'
>     make[2]: Entering directory
>     `/home/postgres/slony1-2.2.3/src/parsestatements'
>     ./test-scanner < /dev/null > emptytestresult.log
>     ./test-scanner < ./test_sql.sql > test_sql.log
>     ./test-scanner < ./cstylecomments.sql > cstylecomments.log
>     make[2]: Leaving directory
>     `/home/postgres/slony1-2.2.3/src/parsestatements'
>     make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slon'
>     make[2]: Nothing to be done for `all'.
>     make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slon'
>     make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slonik'
>     /opt/SUNWspro/bin/cc -xO3 -xarch=v9 -xspace -W0,-Lt -W2,-Rcond_elim
>     -Xa -xildoff -xc99=none -xCC -I../../src/slonik -I../..
>     -DPGSHARE="\"/opt/postgres/9.2.6/share/\""  slonik.o dbutil.o
>     parser.o  ../parsestatements/scanner.o scan.o
>     -L/opt/postgres/9.2.6/lib/ -lpq  -lsocket -R/opt/postgres/9.2.6/lib/
>     -o slonik
>     Undefined                       first referenced
>       symbol                             in file
>     alloca                              slonik.o
>     ld: fatal: Symbol referencing errors. No output written to slonik
>     make[2]: *** [slonik] Error 1
>     make[2]: Leaving directory `/home/postgres/slony1-2.2.3/src/slonik'
>     make[1]: *** [all] Error 2
>     make[1]: Leaving directory `/home/postgres/slony1-2.2.3/src'
>     make: *** [all] Error 2
>
>     Regards,
>     VBN
>
>
>     On Mon, Aug 11, 2014 at 9:47 AM, Venkata Balaji N <nag1010 at gmail.com
>     <mailto:nag1010 at gmail.com>> wrote:
>
>         Hi Steve,
>
>         Yes. It says error output from LD. Below is the complete output.
>
>         Any help would be appreciated. It is critical for us.
>
>         make[2]: Entering directory `/home/postgres/slony1-2.2.3/src/slonik'
>         /opt/SUNWspro/bin/cc -xO3 -xarch=v9 -xspace -W0,-Lt
>         -W2,-Rcond_elim -Xa -xildoff -xc99=none -xCC -I../../src/slonik
>         -I../.. -DPGSHARE="\"/opt/postgres/9.2.6/share/\""  slonik.o
>         dbutil.o parser.o  ../parsestatements/scanner.o scan.o
>         -L/opt/postgres/9.2.6/lib/ -lpq  -lsocket
>         -R/opt/postgres/9.2.6/lib/ -o slonik
>         Undefined                       first referenced
>           symbol                             in file
>         alloca                              slonik.o
>         ld: fatal: Symbol referencing errors. No output written to slonik
>         make[2]: *** [slonik] Error 1
>         make[2]: Leaving directory `/home/arul/slony1-2.2.3/src/slonik'
>         make[1]: *** [all] Error 2
>         make[1]: Leaving directory `/home/arul/slony1-2.2.3/src'
>         make: *** [all] Error 2
>
>         Regards,
>         vbn
>
>
>
>         On Mon, Aug 11, 2014 at 1:35 AM, Steve Singer
>         <steve at ssinger.info <mailto:steve at ssinger.info>> wrote:
>
>             On Sun, 10 Aug 2014, Venkata Balaji N wrote:
>
>
>
>                 Hi Steve,
>                 We are getting the following message while running make
>                 to install Slony1-2.2.3 with PostgreSQL-9.2.6
>                 on Solaris 10 SPARC.
>
>
>                 ld: fatal: Symbol referencing errors. No output written
>                 to slonik
>
>
>             What symbols is it having a problem referencing?  I suspect
>             it says that somewhere in the error output from LD.
>
>
>
>                 make[2]: *** [slonik] Error 1
>                 make[2]: Leaving directory
>                 `/home/postgres/slony1-2.2.3/__src/slonik'
>                 make[1]: *** [all] Error 2
>                 make[1]: Leaving directory
>                 `/home/postgres/slony1-2.2.3/__src'
>                 make: *** [all] Error 2
>
>
>                 -bash-3.00$ uname -a
>                 SunOS sunfire2 5.10 Generic sun4u sparc SUNW,Sun-Fire-V210
>
>                 Can you please help us in this regard ?
>
>                 Regards,
>                 VBN
>
>
>                 On Fri, Aug 8, 2014 at 3:25 PM, Venkata Balaji N
>                 <nag1010 at gmail.com <mailto:nag1010 at gmail.com>> wrote:
>                        Hi Steve,
>                 We are in the process of compiling our own binaries.
>                 Thank you for your reply !
>
>                 Regards,
>                 Venkata B N
>
>
>                 On Wed, Aug 6, 2014 at 9:25 PM, Steve Singer
>                 <steve at ssinger.info <mailto:steve at ssinger.info>> wrote:
>                        On Wed, 6 Aug 2014, Venkata Balaji N wrote:
>
>                              Hello,
>                              Can anyone please help us know if there are
>                 Slony-1, preferably 2.X
>                              version binaries available for
>                              Solaris 10 SPARC ?
>
>                              Thanks in advance for your help !
>
>
>                 I don't think you will find pre-built binaries for any
>                 recent version of slony for
>                 Solaris SPARC.  Your best bet is to compile your own
>                 binaries from source.
>
>
>
>
>
>                        Regards,
>                        Venkata B N
>
>
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>


From nag1010 at gmail.com  Wed Aug 13 02:24:57 2014
From: nag1010 at gmail.com (Venkata Balaji N)
Date: Wed, 13 Aug 2014 19:24:57 +1000
Subject: [Slony1-general] Slony1-2.2.X binaries for Solaris 10 SPARC
In-Reply-To: <BLU436-SMTP159CD9BAF69F7C5E4CA9AB0DCED0@phx.gbl>
References: <CAEyp7J9GBaZAu9pMWVgRf4k=TWBecLT2_r9CtUgjodxRuztcYw@mail.gmail.com>
	<BLU437-SMTP99776A194F60B5375B6611DCE00@phx.gbl>
	<CAEyp7J-Yp6jGNCgsYiA0S0sQW8cmhXKw45bO3cgnuB8TQVZxLw@mail.gmail.com>
	<CAEyp7J_axbycH4oUMzFfpcQB8pJ-1K=fGE4=ABWjMs5wwbOOQA@mail.gmail.com>
	<BLU437-SMTP300E32D6FB7C0AE008DEDDDCEC0@phx.gbl>
	<CAEyp7J8=anjbdE0g9EnraZCXkrGenN-xEvFxgexqL+mVSob3Ew@mail.gmail.com>
	<CAEyp7J-M9bsrL2x=hQcV9TJsYJOUfUcwPECgChf21t0d5sR0-w@mail.gmail.com>
	<CAEyp7J_6KW8Vc9tFORxMPQrHFq7f+ercTyaMf0OAh=yNDgpKbA@mail.gmail.com>
	<BLU436-SMTP159CD9BAF69F7C5E4CA9AB0DCED0@phx.gbl>
Message-ID: <CAEyp7J-HGcLuFUguoK2Yk7BG5KSZ9NL-Em2K67Nb173V4CBSLg@mail.gmail.com>

On Tue, Aug 12, 2014 at 12:26 AM, Steve Singer <steve at ssinger.info> wrote:

> On 08/11/2014 02:02 AM, Venkata Balaji N wrote:
>
>>
>> We are through this problem. Slony1-2.2.3 successfully installed with
>> PostgreSQL-9.2.6 on Solaris10 SPARC.
>>
>> Thanks for your responses.
>>
>>
> What was the solution?
>
> Do we need to make a change to the slony makefiles to get things to link
> properly on solaris sparc?
>

We had to add the following line in slonik.c file for successful
installation.

#include <alloca.h>

It is working on Linux without any issues. Not sure why.

Regards,
VBN
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140813/e3ee0cd2/attachment.htm 

From diptatapa at gmail.com  Thu Aug 14 16:55:52 2014
From: diptatapa at gmail.com (Soni M)
Date: Fri, 15 Aug 2014 06:55:52 +0700
Subject: [Slony1-general] cleanup_interval question
Message-ID: <CAAMgDXkDv3FxCW0Ri4qwF=_W_i1tBSxe=HgctFM5fg8svXB=fA@mail.gmail.com>

Hello Everyone,

I thought i got those cleanup event every 10 minutes, which is the default.
I desired another value for this parameter, but seems didn't work. I set
them to 20 minutes.
How can i change the value for cleanup event on slon process?

config :
cleanup_interval="20 minutes"

related log :
NOTICE:  Slony-I: log switch to sl_log_2 complete - truncate sl_log_1
CONTEXT:  PL/pgSQL function "cleanupevent" line 100 at assignment
2014-08-14 17:46:23 EDTINFO   cleanupThread:    0.060 seconds for
cleanupEvent()
NOTICE:  Slony-I: Logswitch to sl_log_1 initiated
CONTEXT:  SQL statement "SELECT "_slony_example".logswitch_start()"
PL/pgSQL function "cleanupevent" line 102 at PERFORM
2014-08-14 17:57:18 EDTINFO   cleanupThread:    0.005 seconds for
cleanupEvent()
NOTICE:  Slony-I: log switch to sl_log_1 still in progress - sl_log_2 not
truncated
CONTEXT:  PL/pgSQL function "cleanupevent" line 100 at assignment
2014-08-14 18:08:13 EDTINFO   cleanupThread:    0.043 seconds for
cleanupEvent()
NOTICE:  Slony-I: log switch to sl_log_1 complete - truncate sl_log_2
CONTEXT:  PL/pgSQL function "cleanupevent" line 100 at assignment
2014-08-14 18:19:02 EDTINFO   cleanupThread:    0.057 seconds for
cleanupEvent()
NOTICE:  Slony-I: Logswitch to sl_log_2 initiated
CONTEXT:  SQL statement "SELECT "_slony_example".logswitch_start()"
PL/pgSQL function "cleanupevent" line 102 at PERFORM
2014-08-14 18:29:52 EDTINFO   cleanupThread:    0.004 seconds for
cleanupEvent()
NOTICE:  Slony-I: log switch to sl_log_2 still in progress - sl_log_1 not
truncated
CONTEXT:  PL/pgSQL function "cleanupevent" line 100 at assignment
2014-08-14 18:41:15 EDTINFO   cleanupThread:    0.038 seconds for
cleanupEvent()

OS : Ubuntu 12.04 LTS
PG : 9.1 from ubuntu package
slony : 2.0.7 from ubuntu package

-- 
Thanks,

Soni Maula Harriz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140815/1be214b5/attachment.htm 

From brianf at consistentstate.com  Mon Aug 18 17:23:47 2014
From: brianf at consistentstate.com (Brian Fehrle)
Date: Mon, 18 Aug 2014 17:23:47 -0700
Subject: [Slony1-general] undefined symbol: HeapTupleHeaderGetDatum
Message-ID: <CAMC-nfvn=kG+r=__ZnggwUBX1pSBrw6s8H7VZ36GiSd0Vh41YQ@mail.gmail.com>

Hi All,

I'm trying to get a slony 2.2.3 cluster up and running on postgres 9.3.5,
and am running into the below error:

[postgres at localhost bin]$ ./init_cluster.sh ../etc/slony.cfg
<stdin>:305: loading of file /usr/pgsql-9.3/share//slony1_base.2.2.3.sql:
PGRES_FATAL_ERROR ERROR:  could not load library
"/usr/pgsql-9.3/lib/plpgsql.so": /usr/pgsql-9.3/lib/plpgsql.so: undefined
symbol: HeapTupleHeaderGetDatum
ERROR:  could not load library "/usr/pgsql-9.3/lib/plpgsql.so":
/usr/pgsql-9.3/lib/plpgsql.so: undefined symbol: HeapTupleHeaderGetDatum

Some system info:
cat /etc/redhat-release
Red Hat Enterprise Linux Server release 6.5 (Santiago)
(64 bit)

rpm -qa | grep slony
slony1-93-2.2.3-1.rhel6.x86_64

rpm -qa | grep postgres
postgresql93-devel-9.3.5-1PGDG.rhel6.x86_64
postgresql93-libs-9.3.5-1PGDG.rhel6.x86_64
postgresql93-9.3.5-1PGDG.rhel6.x86_64
postgresql93-contrib-9.3.5-1PGDG.rhel6.x86_64
postgresql93-server-9.3.5-1PGDG.rhel6.x86_64

I'm suspecting it's an issue with plpgsql itself, but not quite sure yet,
wondering if anyone has seen this recently.

Thanks,
- Brian F
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20140818/c11bf101/attachment.htm 

From jeff at pgexperts.com  Mon Aug 18 20:23:55 2014
From: jeff at pgexperts.com (Jeff Frost)
Date: Mon, 18 Aug 2014 20:23:55 -0700
Subject: [Slony1-general] undefined symbol: HeapTupleHeaderGetDatum
In-Reply-To: <CAMC-nfvn=kG+r=__ZnggwUBX1pSBrw6s8H7VZ36GiSd0Vh41YQ@mail.gmail.com>
References: <CAMC-nfvn=kG+r=__ZnggwUBX1pSBrw6s8H7VZ36GiSd0Vh41YQ@mail.gmail.com>
Message-ID: <8E4242DB-F4C5-4FD4-B006-65B40D3A0050@pgexperts.com>

On Aug 18, 2014, at 5:23 PM, Brian Fehrle <brianf at consistentstate.com> wrote:

> Hi All, 
> 
> I'm trying to get a slony 2.2.3 cluster up and running on postgres 9.3.5, and am running into the below error:
> 
> [postgres at localhost bin]$ ./init_cluster.sh ../etc/slony.cfg
> <stdin>:305: loading of file /usr/pgsql-9.3/share//slony1_base.2.2.3.sql: PGRES_FATAL_ERROR ERROR:  could not load library "/usr/pgsql-9.3/lib/plpgsql.so": /usr/pgsql-9.3/lib/plpgsql.so: undefined symbol: HeapTupleHeaderGetDatum
> ERROR:  could not load library "/usr/pgsql-9.3/lib/plpgsql.so": /usr/pgsql-9.3/lib/plpgsql.so: undefined symbol: HeapTupleHeaderGetDatum
> 
> Some system info:
> cat /etc/redhat-release
> Red Hat Enterprise Linux Server release 6.5 (Santiago)
> (64 bit)
> 
> rpm -qa | grep slony
> slony1-93-2.2.3-1.rhel6.x86_64
> 
> rpm -qa | grep postgres
> postgresql93-devel-9.3.5-1PGDG.rhel6.x86_64
> postgresql93-libs-9.3.5-1PGDG.rhel6.x86_64
> postgresql93-9.3.5-1PGDG.rhel6.x86_64
> postgresql93-contrib-9.3.5-1PGDG.rhel6.x86_64
> postgresql93-server-9.3.5-1PGDG.rhel6.x86_64
> 
> I'm suspecting it's an issue with plpgsql itself, but not quite sure yet, wondering if anyone has seen this recently. 

Any chance you've got more than one set of postgresql packages installed?

What does:

ldconfig /usr/pgsql-9.3/lib/plpgsql.so

return?


