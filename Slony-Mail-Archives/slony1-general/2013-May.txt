From glynastill at yahoo.co.uk  Wed May  1 02:48:03 2013
From: glynastill at yahoo.co.uk (Glyn Astill)
Date: Wed, 1 May 2013 10:48:03 +0100 (BST)
Subject: [Slony1-general] Slony multiple connections with database
In-Reply-To: <CABb3jG_hB=hhANh071GVVtVBCzivm8DTWaoHTbTbpyJvsZSouQ@mail.gmail.com>
References: <CABb3jG_hB=hhANh071GVVtVBCzivm8DTWaoHTbTbpyJvsZSouQ@mail.gmail.com>
Message-ID: <1367401683.91761.YahooMailNeo@web133202.mail.ir2.yahoo.com>


From: Neha Sharma <nehasharma7185 at gmail.com>
>To: slony1-general at lists.slony.info 
>Sent: Wednesday, 1 May 2013, 7:41
>Subject: [Slony1-general] Slony multiple connections with database
> 
>
>
>Hi,
>
>
>We are using slony to synchronise two postgres databases of two machines.?
>
>
>Generally slony creates 6 connections with the database - 4 with local db and 2 with remote db.
>
>
>But some problem is being observed on the machine having master db. Various slony remote connections are seen with the database.
>The limit of postgres connections is 100 and slony is consuming maximum connections due to which the db fails to respond after sometime. It was observed that connection reached to 104 out of which slony connections (which remote has created with db) were 74.
>We have to restart slony to clean all the connections.
>
>
>Ideally there should only be 2 connections from the remote - one created by listener and another by worker thread.
>
>
>There is no connectivity issue between the two machines.
>
>
>Could anyone please suggest what could be the reason for this weired behaviour of slony?
>Also, please tell if slony creates new connections without removing the older ones?
>
>-- 
>Neha Sharma 


Can you post the logs for both PostgreSQL and the slon daemons?


