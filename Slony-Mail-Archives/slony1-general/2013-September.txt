From ssinger at ca.afilias.info  Mon Sep  9 13:37:03 2013
From: ssinger at ca.afilias.info (Steve Singer)
Date: Mon, 09 Sep 2013 16:37:03 -0400
Subject: [Slony1-general] Slony 2.2.0 released
Message-ID: <522E316F.3060207@ca.afilias.info>

The Slony team is pleased to announce the first official release of 
version 2.2 of the Slony replication engine.

Slony 2.2.0 adds the following major features to Slony 2.1.x

* Slony now uses the COPY command for replicating data between providers 
and subscribers.  This will result in faster replication times and more 
efficient resource utilization on the replica for many workloads

* The FAILOVER command has been made more reliable for complex cluster 
configurations.   The FAILOVER command now supports the failure of 
multiple nodes at the same time.  All users of the FAILOVER should read 
the documentation to familiarize themselves with these changes

* Multiple versions of slony can now be installed under the same 
PostgreSQL cluster.  The Slony shared libraries, functions and .sql 
files are now versioned to support this


A full list of changes can be found in the release notes at
http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;hb=52e6127d264662997e69bf0d07f947aebf4c7c61

You can download Slony 2.2.0 at

http://main.slony.info/downloads/2.2/source/slony1-2.2.0.tar.bz2
http://main.slony.info/downloads/2.2/source/slony1-2.2.0-docs.tar.bz2


From devrim at gunduz.org  Tue Sep 10 02:24:59 2013
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=DCND=DCZ?=)
Date: Tue, 10 Sep 2013 12:24:59 +0300
Subject: [Slony1-general] Slony 2.2.0 released
In-Reply-To: <522E316F.3060207@ca.afilias.info>
References: <522E316F.3060207@ca.afilias.info>
Message-ID: <1378805099.25885.20.camel@lenovo01-laptop03.gunduz.org>


Hi,

Thanks! I added 2.2.0 to 9.3 PostgreSQL RPM repo.

Regards, Devrim

On Mon, 2013-09-09 at 16:37 -0400, Steve Singer wrote:
> The Slony team is pleased to announce the first official release of 
> version 2.2 of the Slony replication engine.
> 
> Slony 2.2.0 adds the following major features to Slony 2.1.x
> 
> * Slony now uses the COPY command for replicating data between providers 
> and subscribers.  This will result in faster replication times and more 
> efficient resource utilization on the replica for many workloads
> 
> * The FAILOVER command has been made more reliable for complex cluster 
> configurations.   The FAILOVER command now supports the failure of 
> multiple nodes at the same time.  All users of the FAILOVER should read 
> the documentation to familiarize themselves with these changes
> 
> * Multiple versions of slony can now be installed under the same 
> PostgreSQL cluster.  The Slony shared libraries, functions and .sql 
> files are now versioned to support this
> 
> 
> A full list of changes can be found in the release notes at
> http://git.postgresql.org/gitweb/?p=slony1-engine.git;a=blob_plain;f=RELEASE;hb=52e6127d264662997e69bf0d07f947aebf4c7c61
> 
> You can download Slony 2.2.0 at
> 
> http://main.slony.info/downloads/2.2/source/slony1-2.2.0.tar.bz2
> http://main.slony.info/downloads/2.2/source/slony1-2.2.0-docs.tar.bz2
> 
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general


-- 
Devrim G?ND?Z
Principal Systems Engineer @ EnterpriseDB: http://www.enterprisedb.com
PostgreSQL Dan??man?/Consultant, Red Hat Certified Engineer
Community: devrim~PostgreSQL.org, devrim.gunduz~linux.org.tr
http://www.gunduz.org  Twitter: http://twitter.com/devrimgunduz
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : http://lists.slony.info/pipermail/slony1-general/attachments/20130910/54912f5f/attachment.pgp 

From mjames at profitpoint.com  Tue Sep 10 07:58:49 2013
From: mjames at profitpoint.com (Mike James)
Date: Tue, 10 Sep 2013 14:58:49 +0000
Subject: [Slony1-general] Log shipping supplier crashed
Message-ID: <CE54ABE9.54FF%mjames@profitpoint.com>

I have been sending slony1 logs over a WAN to replicate to a remote server. A couple of days ago, the slave that was sending logs crashed. It was rebooted successfully a couple of hours later, but it looks like log shipping did not resume.

There are a few logs with 0 length on the provider, but they can't be consumed by the remote server on the other end of the WAN.

Is there any way to recover gracefully from this outage?

Thanks, Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130910/cee170ca/attachment.htm 

From steve at ssinger.info  Tue Sep 10 16:23:39 2013
From: steve at ssinger.info (Steve Singer)
Date: Tue, 10 Sep 2013 19:23:39 -0400
Subject: [Slony1-general] Log shipping supplier crashed
In-Reply-To: <CE54ABE9.54FF%mjames@profitpoint.com>
References: <CE54ABE9.54FF%mjames@profitpoint.com>
Message-ID: <BLU0-SMTP2026D22C8EE4C15D61504D9DC380@phx.gbl>

On Tue, 10 Sep 2013, Mike James wrote:

> I have been sending slony1 logs over a WAN to replicate to a remote server. A couple of days ago, the slave
> that was sending logs crashed. It was rebooted successfully a couple of hours later, but it looks like log
> shipping did not resume.
> 
> There are a few logs with 0 length on the provider, but they can't be consumed by the remote server on the
> other end of the WAN.
> 
> Is there any way to recover gracefully from this outage?

What version of slony are you running, and does slony_logshipper exit 
immediately after starting up  or stay running and but does nothing? Does it 
print anything in its logfile?


> Thanks, Mike
> 
>


From athanasios.kostopoulos at classmarkets.com  Thu Sep 12 03:41:45 2013
From: athanasios.kostopoulos at classmarkets.com (Athanasios Kostopoulos)
Date: Thu, 12 Sep 2013 12:41:45 +0200
Subject: [Slony1-general] Slony 2.1.1 will not build on Debian Wheezy
Message-ID: <CAFnWstO3sSWh5AR+d71aGf53Wy16DRiz-r2=EforTDQJR8uYtA@mail.gmail.com>

Dear list,
I have the following issue. I need to add a node to slony setup. The rest
of the nodes are Debian squeeze with slony 2.1.1 built from source (not my
decision). I tried adding a node with Debian Wheezy and slony
1.2.2+backported fixes - no luck I got a version incompatibility error. So
I decided to build Slony from source. ./configure goes around fine however
when I try to make the file I get the following warnings/errors:

gcc -g -O2 -Wall -Wmissing-prototypes -Wmissing-declarations -I../.. -fpic
-I/usr/include/postgresql/8.4/server/ -I/usr/include/postgresql/  -c -o
slony1_funcs.o slony1_funcs.c
slony1_funcs.c: In function ?_Slony_I_createEvent?:
slony1_funcs.c:146:10: warning: variable ?buf_size? set but not used
[-Wunused-but-set-variable]
slony1_funcs.c: In function ?_Slony_I_logTrigger?:
slony1_funcs.c:464:7: error: too many arguments to function
?set_config_option?
In file included from slony1_funcs.c:36:0:
/usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
slony1_funcs.c:509:13: error: too many arguments to function
?set_config_option?
In file included from slony1_funcs.c:36:0:
/usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
slony1_funcs.c:592:5: warning: implicit declaration of function
?compatible_oper_funcid? [-Wimplicit-function-declaration]
slony1_funcs.c:592:5: warning: implicit declaration of function ?makeList1?
[-Wimplicit-function-declaration]
slony1_funcs.c:638:10: error: too many arguments to function
?set_config_option?
In file included from slony1_funcs.c:36:0:
/usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
slony1_funcs.c:645:10: error: too many arguments to function
?set_config_option?
In file included from slony1_funcs.c:36:0:
/usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
make[2]: *** [slony1_funcs.o] Error 1
make[2]: Leaving directory `/root/slony1-2.1.1/src/backend'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/root/slony1-2.1.1/src'
make: *** [all] Error 2

Debian wheezy is using gcc (Debian 4.7.2-5) 4.7.2 whereas Debian Squeeze is
using gcc (Debian 4.4.5-8) 4.4.5

Am I missing something? Is it possible to build Slony 2.1.1 from vanilla
source under Debian Wheezy? Do I need to do a hack someplace?  Thanks in
advance for any replies.

-- 
 

classmarkets GmbH | Schumannstra?e 6 | 10117 Berlin | Deutschland
Tel: +49 (0)30 56 59 001-0 | Fax: +49 (0)30 56 59 001-99 | 
www.classmarkets.com

Amtsgericht Charlottenburg HRB 111815 B | USt.Id.Nr: DE 260731582
Gesch?ftsf?hrer: Veit M?rz, Fabian Str?hle

Diese Nachricht (inklusive aller Anh?nge) ist vertraulich. Sie darf 
ausschlie?lich durch den vorgesehenen Empf?nger und Adressaten gelesen, 
kopiert oder genutzt werden. Sollten Sie diese Nachricht versehentlich 
erhalten haben, bitten wir, den Absender (durch Antwort-E-Mail) hiervon 
unverz?glich zu informieren und die Nachricht zu l?schen. Jede unerlaubte 
Nutzung oder Weitergabe des Inhalts dieser Nachricht, sei es vollst?ndig 
oder teilweise, ist unzul?ssig. Bitte beachten Sie, dass E-Mail-Nachrichten 
an den Absender nicht f?r fristgebundene Mitteilungen geeignet sind. 
Fristgebundene Mitteilungen sind daher ausschlie?lich per Post oder per 
Telefax zu ?bersenden.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130912/42d0a868/attachment.htm 

From ssinger at ca.afilias.info  Thu Sep 12 05:43:49 2013
From: ssinger at ca.afilias.info (Steve Singer)
Date: Thu, 12 Sep 2013 08:43:49 -0400
Subject: [Slony1-general] Slony 2.1.1 will not build on Debian Wheezy
In-Reply-To: <CAFnWstO3sSWh5AR+d71aGf53Wy16DRiz-r2=EforTDQJR8uYtA@mail.gmail.com>
References: <CAFnWstO3sSWh5AR+d71aGf53Wy16DRiz-r2=EforTDQJR8uYtA@mail.gmail.com>
Message-ID: <5231B705.2020906@ca.afilias.info>

On 09/12/2013 06:41 AM, Athanasios Kostopoulos wrote:
> Dear list,
> I have the following issue. I need to add a node to slony setup. The
> rest of the nodes are Debian squeeze with slony 2.1.1 built from source
> (not my decision). I tried adding a node with Debian Wheezy and slony
> 1.2.2+backported fixes - no luck I got a version incompatibility error.
> So I decided to build Slony from source. ./configure goes around fine
> however when I try to make the file I get the following warnings/errors:
>


I suspect you are picking up header files from a different version of 
postgresql than configure is running against.   The answer lies in the 
output of your config.log file

I think your configure is picking up PG 9.2 but your building against PG 
8.4.  Make sure that your running configure with the --with-pgconfigdir 
option that points to the directory containing the pg_config binary for 
the PG version you want to build against.





> gcc -g -O2 -Wall -Wmissing-prototypes -Wmissing-declarations -I../..
> -fpic -I/usr/include/postgresql/8.4/server/ -I/usr/include/postgresql/
>   -c -o slony1_funcs.o slony1_funcs.c
> slony1_funcs.c: In function ?_Slony_I_createEvent?:
> slony1_funcs.c:146:10: warning: variable ?buf_size? set but not used
> [-Wunused-but-set-variable]
> slony1_funcs.c: In function ?_Slony_I_logTrigger?:
> slony1_funcs.c:464:7: error: too many arguments to function
> ?set_config_option?
> In file included from slony1_funcs.c:36:0:
> /usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
> slony1_funcs.c:509:13: error: too many arguments to function
> ?set_config_option?
> In file included from slony1_funcs.c:36:0:
> /usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
> slony1_funcs.c:592:5: warning: implicit declaration of function
> ?compatible_oper_funcid? [-Wimplicit-function-declaration]
> slony1_funcs.c:592:5: warning: implicit declaration of function
> ?makeList1? [-Wimplicit-function-declaration]
> slony1_funcs.c:638:10: error: too many arguments to function
> ?set_config_option?
> In file included from slony1_funcs.c:36:0:
> /usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
> slony1_funcs.c:645:10: error: too many arguments to function
> ?set_config_option?
> In file included from slony1_funcs.c:36:0:
> /usr/include/postgresql/8.4/server/utils/guc.h:265:13: note: declared here
> make[2]: *** [slony1_funcs.o] Error 1
> make[2]: Leaving directory `/root/slony1-2.1.1/src/backend'
> make[1]: *** [all] Error 2
> make[1]: Leaving directory `/root/slony1-2.1.1/src'
> make: *** [all] Error 2
>
> Debian wheezy is using gcc (Debian 4.7.2-5) 4.7.2 whereas Debian Squeeze
> is using gcc (Debian 4.4.5-8) 4.4.5
>
> Am I missing something? Is it possible to build Slony 2.1.1 from vanilla
> source under Debian Wheezy? Do I need to do a hack someplace?  Thanks in
> advance for any replies.
>
> classmarkets GmbH | Schumannstra?e 6 | 10117 Berlin | Deutschland
> Tel: +49 (0)30 56 59 001-0 | Fax: +49 (0)30 56 59 001-99 |
> www.classmarkets.com <http://www.classmarkets.com>
>
> Amtsgericht Charlottenburg HRB 111815 B | USt.Id.Nr <http://USt.Id.Nr>:
> DE 260731582
> Gesch?ftsf?hrer: Veit M?rz, Fabian Str?hle
>
> Diese Nachricht (inklusive aller Anh?nge) ist vertraulich. Sie darf
> ausschlie?lich durch den vorgesehenen Empf?nger und Adressaten gelesen,
> kopiert oder genutzt werden. Sollten Sie diese Nachricht versehentlich
> erhalten haben, bitten wir, den Absender (durch Antwort-E-Mail) hiervon
> unverz?glich zu informieren und die Nachricht zu l?schen. Jede
> unerlaubte Nutzung oder Weitergabe des Inhalts dieser Nachricht, sei es
> vollst?ndig oder teilweise, ist unzul?ssig. Bitte beachten Sie, dass
> E-Mail-Nachrichten an den Absender nicht f?r fristgebundene Mitteilungen
> geeignet sind. Fristgebundene Mitteilungen sind daher ausschlie?lich per
> Post oder per Telefax zu ?bersenden.
>
>
>
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>


From athanasios.kostopoulos at classmarkets.com  Thu Sep 12 05:49:27 2013
From: athanasios.kostopoulos at classmarkets.com (Athanasios Kostopoulos)
Date: Thu, 12 Sep 2013 14:49:27 +0200
Subject: [Slony1-general] Slony 2.1.1 will not build on Debian Wheezy
In-Reply-To: <5231B705.2020906@ca.afilias.info>
References: <CAFnWstO3sSWh5AR+d71aGf53Wy16DRiz-r2=EforTDQJR8uYtA@mail.gmail.com>
	<5231B705.2020906@ca.afilias.info>
Message-ID: <CAFnWstNJzHYt+N+XopQ7tW7Du-XOZViv5cuCSu+0nC_k=a_CDQ@mail.gmail.com>

Thanks for your reply Steven. However I do not think that is the case. Here
is an excerpt from my config log
PGBINDIR='/usr/lib/postgresql/8.4/bin/'
PGINCLUDEDIR='/usr/include/postgresql/'
PGINCLUDESERVERDIR='/usr/include/postgresql/8.4/server/'
PGLIBDIR='/usr/lib/'
PGPKGLIBDIR='/usr/lib/postgresql/8.4/lib/'
PGSHAREDIR='/usr/share/postgresql/8.4/'
PG_VERSION='8.4'
PG_VERSION_MAJOR='8'
PG_VERSION_MINOR='4'

This clearly indicates that I am trying to compile against 8.4, unless I am
grossly mislead :-)


On Thu, Sep 12, 2013 at 2:43 PM, Steve Singer <ssinger at ca.afilias.info>wrote:

> On 09/12/2013 06:41 AM, Athanasios Kostopoulos wrote:
>
>> Dear list,
>> I have the following issue. I need to add a node to slony setup. The
>> rest of the nodes are Debian squeeze with slony 2.1.1 built from source
>> (not my decision). I tried adding a node with Debian Wheezy and slony
>> 1.2.2+backported fixes - no luck I got a version incompatibility error.
>> So I decided to build Slony from source. ./configure goes around fine
>> however when I try to make the file I get the following warnings/errors:
>>
>>
>
> I suspect you are picking up header files from a different version of
> postgresql than configure is running against.   The answer lies in the
> output of your config.log file
>
> I think your configure is picking up PG 9.2 but your building against PG
> 8.4.  Make sure that your running configure with the --with-pgconfigdir
> option that points to the directory containing the pg_config binary for the
> PG version you want to build against.
>
>
>
>
>
>  gcc -g -O2 -Wall -Wmissing-prototypes -Wmissing-declarations -I../..
>> -fpic -I/usr/include/postgresql/8.4/**server/ -I/usr/include/postgresql/
>>   -c -o slony1_funcs.o slony1_funcs.c
>> slony1_funcs.c: In function ?_Slony_I_createEvent?:
>> slony1_funcs.c:146:10: warning: variable ?buf_size? set but not used
>> [-Wunused-but-set-variable]
>> slony1_funcs.c: In function ?_Slony_I_logTrigger?:
>> slony1_funcs.c:464:7: error: too many arguments to function
>> ?set_config_option?
>> In file included from slony1_funcs.c:36:0:
>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>> here
>> slony1_funcs.c:509:13: error: too many arguments to function
>> ?set_config_option?
>> In file included from slony1_funcs.c:36:0:
>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>> here
>> slony1_funcs.c:592:5: warning: implicit declaration of function
>> ?compatible_oper_funcid? [-Wimplicit-function-**declaration]
>> slony1_funcs.c:592:5: warning: implicit declaration of function
>> ?makeList1? [-Wimplicit-function-**declaration]
>> slony1_funcs.c:638:10: error: too many arguments to function
>> ?set_config_option?
>> In file included from slony1_funcs.c:36:0:
>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>> here
>> slony1_funcs.c:645:10: error: too many arguments to function
>> ?set_config_option?
>> In file included from slony1_funcs.c:36:0:
>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>> here
>> make[2]: *** [slony1_funcs.o] Error 1
>> make[2]: Leaving directory `/root/slony1-2.1.1/src/**backend'
>> make[1]: *** [all] Error 2
>> make[1]: Leaving directory `/root/slony1-2.1.1/src'
>> make: *** [all] Error 2
>>
>> Debian wheezy is using gcc (Debian 4.7.2-5) 4.7.2 whereas Debian Squeeze
>> is using gcc (Debian 4.4.5-8) 4.4.5
>>
>> Am I missing something? Is it possible to build Slony 2.1.1 from vanilla
>> source under Debian Wheezy? Do I need to do a hack someplace?  Thanks in
>> advance for any replies.
>>
>> classmarkets GmbH | Schumannstra?e 6 | 10117 Berlin | Deutschland
>> Tel: +49 (0)30 56 59 001-0 | Fax: +49 (0)30 56 59 001-99 |
>> www.classmarkets.com <http://www.classmarkets.com>
>>
>> Amtsgericht Charlottenburg HRB 111815 B | USt.Id.Nr <http://USt.Id.Nr>:
>> DE 260731582
>> Gesch?ftsf?hrer: Veit M?rz, Fabian Str?hle
>>
>> Diese Nachricht (inklusive aller Anh?nge) ist vertraulich. Sie darf
>> ausschlie?lich durch den vorgesehenen Empf?nger und Adressaten gelesen,
>> kopiert oder genutzt werden. Sollten Sie diese Nachricht versehentlich
>> erhalten haben, bitten wir, den Absender (durch Antwort-E-Mail) hiervon
>> unverz?glich zu informieren und die Nachricht zu l?schen. Jede
>> unerlaubte Nutzung oder Weitergabe des Inhalts dieser Nachricht, sei es
>> vollst?ndig oder teilweise, ist unzul?ssig. Bitte beachten Sie, dass
>> E-Mail-Nachrichten an den Absender nicht f?r fristgebundene Mitteilungen
>> geeignet sind. Fristgebundene Mitteilungen sind daher ausschlie?lich per
>> Post oder per Telefax zu ?bersenden.
>>
>>
>>
>> ______________________________**_________________
>> Slony1-general mailing list
>> Slony1-general at lists.slony.**info <Slony1-general at lists.slony.info>
>> http://lists.slony.info/**mailman/listinfo/slony1-**general<http://lists.slony.info/mailman/listinfo/slony1-general>
>>
>>
>

-- 
 

classmarkets GmbH | Schumannstra?e 6 | 10117 Berlin | Deutschland
Tel: +49 (0)30 56 59 001-0 | Fax: +49 (0)30 56 59 001-99 | 
www.classmarkets.com

Amtsgericht Charlottenburg HRB 111815 B | USt.Id.Nr: DE 260731582
Gesch?ftsf?hrer: Veit M?rz, Fabian Str?hle

Diese Nachricht (inklusive aller Anh?nge) ist vertraulich. Sie darf 
ausschlie?lich durch den vorgesehenen Empf?nger und Adressaten gelesen, 
kopiert oder genutzt werden. Sollten Sie diese Nachricht versehentlich 
erhalten haben, bitten wir, den Absender (durch Antwort-E-Mail) hiervon 
unverz?glich zu informieren und die Nachricht zu l?schen. Jede unerlaubte 
Nutzung oder Weitergabe des Inhalts dieser Nachricht, sei es vollst?ndig 
oder teilweise, ist unzul?ssig. Bitte beachten Sie, dass E-Mail-Nachrichten 
an den Absender nicht f?r fristgebundene Mitteilungen geeignet sind. 
Fristgebundene Mitteilungen sind daher ausschlie?lich per Post oder per 
Telefax zu ?bersenden.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130912/ed0a845c/attachment-0001.htm 

From athanasios.kostopoulos at classmarkets.com  Thu Sep 12 06:24:43 2013
From: athanasios.kostopoulos at classmarkets.com (Athanasios Kostopoulos)
Date: Thu, 12 Sep 2013 15:24:43 +0200
Subject: [Slony1-general] Slony 2.1.1 will not build on Debian Wheezy
In-Reply-To: <CAFnWstNJzHYt+N+XopQ7tW7Du-XOZViv5cuCSu+0nC_k=a_CDQ@mail.gmail.com>
References: <CAFnWstO3sSWh5AR+d71aGf53Wy16DRiz-r2=EforTDQJR8uYtA@mail.gmail.com>
	<5231B705.2020906@ca.afilias.info>
	<CAFnWstNJzHYt+N+XopQ7tW7Du-XOZViv5cuCSu+0nC_k=a_CDQ@mail.gmail.com>
Message-ID: <CAFnWstOU5pmVXi+0vzEWDwTrxXHGQ9DNjNqpfnR1WQkwUz9quQ@mail.gmail.com>

Filed a bug in Bugzilla
http://www.slony.info/bugzilla/show_bug.cgi?id=315


On Thu, Sep 12, 2013 at 2:49 PM, Athanasios Kostopoulos <
athanasios.kostopoulos at classmarkets.com> wrote:

> Thanks for your reply Steven. However I do not think that is the case.
> Here is an excerpt from my config log
> PGBINDIR='/usr/lib/postgresql/8.4/bin/'
> PGINCLUDEDIR='/usr/include/postgresql/'
> PGINCLUDESERVERDIR='/usr/include/postgresql/8.4/server/'
> PGLIBDIR='/usr/lib/'
> PGPKGLIBDIR='/usr/lib/postgresql/8.4/lib/'
> PGSHAREDIR='/usr/share/postgresql/8.4/'
> PG_VERSION='8.4'
> PG_VERSION_MAJOR='8'
> PG_VERSION_MINOR='4'
>
> This clearly indicates that I am trying to compile against 8.4, unless I
> am grossly mislead :-)
>
>
> On Thu, Sep 12, 2013 at 2:43 PM, Steve Singer <ssinger at ca.afilias.info>wrote:
>
>> On 09/12/2013 06:41 AM, Athanasios Kostopoulos wrote:
>>
>>> Dear list,
>>> I have the following issue. I need to add a node to slony setup. The
>>> rest of the nodes are Debian squeeze with slony 2.1.1 built from source
>>> (not my decision). I tried adding a node with Debian Wheezy and slony
>>> 1.2.2+backported fixes - no luck I got a version incompatibility error.
>>> So I decided to build Slony from source. ./configure goes around fine
>>> however when I try to make the file I get the following warnings/errors:
>>>
>>>
>>
>> I suspect you are picking up header files from a different version of
>> postgresql than configure is running against.   The answer lies in the
>> output of your config.log file
>>
>> I think your configure is picking up PG 9.2 but your building against PG
>> 8.4.  Make sure that your running configure with the --with-pgconfigdir
>> option that points to the directory containing the pg_config binary for the
>> PG version you want to build against.
>>
>>
>>
>>
>>
>>  gcc -g -O2 -Wall -Wmissing-prototypes -Wmissing-declarations -I../..
>>> -fpic -I/usr/include/postgresql/8.4/**server/ -I/usr/include/postgresql/
>>>   -c -o slony1_funcs.o slony1_funcs.c
>>> slony1_funcs.c: In function ?_Slony_I_createEvent?:
>>> slony1_funcs.c:146:10: warning: variable ?buf_size? set but not used
>>> [-Wunused-but-set-variable]
>>> slony1_funcs.c: In function ?_Slony_I_logTrigger?:
>>> slony1_funcs.c:464:7: error: too many arguments to function
>>> ?set_config_option?
>>> In file included from slony1_funcs.c:36:0:
>>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>>> here
>>> slony1_funcs.c:509:13: error: too many arguments to function
>>> ?set_config_option?
>>> In file included from slony1_funcs.c:36:0:
>>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>>> here
>>> slony1_funcs.c:592:5: warning: implicit declaration of function
>>> ?compatible_oper_funcid? [-Wimplicit-function-**declaration]
>>> slony1_funcs.c:592:5: warning: implicit declaration of function
>>> ?makeList1? [-Wimplicit-function-**declaration]
>>> slony1_funcs.c:638:10: error: too many arguments to function
>>> ?set_config_option?
>>> In file included from slony1_funcs.c:36:0:
>>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>>> here
>>> slony1_funcs.c:645:10: error: too many arguments to function
>>> ?set_config_option?
>>> In file included from slony1_funcs.c:36:0:
>>> /usr/include/postgresql/8.4/**server/utils/guc.h:265:13: note: declared
>>> here
>>> make[2]: *** [slony1_funcs.o] Error 1
>>> make[2]: Leaving directory `/root/slony1-2.1.1/src/**backend'
>>> make[1]: *** [all] Error 2
>>> make[1]: Leaving directory `/root/slony1-2.1.1/src'
>>> make: *** [all] Error 2
>>>
>>> Debian wheezy is using gcc (Debian 4.7.2-5) 4.7.2 whereas Debian Squeeze
>>> is using gcc (Debian 4.4.5-8) 4.4.5
>>>
>>> Am I missing something? Is it possible to build Slony 2.1.1 from vanilla
>>> source under Debian Wheezy? Do I need to do a hack someplace?  Thanks in
>>> advance for any replies.
>>>
>>> classmarkets GmbH | Schumannstra?e 6 | 10117 Berlin | Deutschland
>>> Tel: +49 (0)30 56 59 001-0 | Fax: +49 (0)30 56 59 001-99 |
>>> www.classmarkets.com <http://www.classmarkets.com>
>>>
>>> Amtsgericht Charlottenburg HRB 111815 B | USt.Id.Nr <http://USt.Id.Nr>:
>>> DE 260731582
>>> Gesch?ftsf?hrer: Veit M?rz, Fabian Str?hle
>>>
>>> Diese Nachricht (inklusive aller Anh?nge) ist vertraulich. Sie darf
>>> ausschlie?lich durch den vorgesehenen Empf?nger und Adressaten gelesen,
>>> kopiert oder genutzt werden. Sollten Sie diese Nachricht versehentlich
>>> erhalten haben, bitten wir, den Absender (durch Antwort-E-Mail) hiervon
>>> unverz?glich zu informieren und die Nachricht zu l?schen. Jede
>>> unerlaubte Nutzung oder Weitergabe des Inhalts dieser Nachricht, sei es
>>> vollst?ndig oder teilweise, ist unzul?ssig. Bitte beachten Sie, dass
>>> E-Mail-Nachrichten an den Absender nicht f?r fristgebundene Mitteilungen
>>> geeignet sind. Fristgebundene Mitteilungen sind daher ausschlie?lich per
>>> Post oder per Telefax zu ?bersenden.
>>>
>>>
>>>
>>> ______________________________**_________________
>>> Slony1-general mailing list
>>> Slony1-general at lists.slony.**info <Slony1-general at lists.slony.info>
>>> http://lists.slony.info/**mailman/listinfo/slony1-**general<http://lists.slony.info/mailman/listinfo/slony1-general>
>>>
>>>
>>
>

-- 
 

classmarkets GmbH | Schumannstra?e 6 | 10117 Berlin | Deutschland
Tel: +49 (0)30 56 59 001-0 | Fax: +49 (0)30 56 59 001-99 | 
www.classmarkets.com

Amtsgericht Charlottenburg HRB 111815 B | USt.Id.Nr: DE 260731582
Gesch?ftsf?hrer: Veit M?rz, Fabian Str?hle

Diese Nachricht (inklusive aller Anh?nge) ist vertraulich. Sie darf 
ausschlie?lich durch den vorgesehenen Empf?nger und Adressaten gelesen, 
kopiert oder genutzt werden. Sollten Sie diese Nachricht versehentlich 
erhalten haben, bitten wir, den Absender (durch Antwort-E-Mail) hiervon 
unverz?glich zu informieren und die Nachricht zu l?schen. Jede unerlaubte 
Nutzung oder Weitergabe des Inhalts dieser Nachricht, sei es vollst?ndig 
oder teilweise, ist unzul?ssig. Bitte beachten Sie, dass E-Mail-Nachrichten 
an den Absender nicht f?r fristgebundene Mitteilungen geeignet sind. 
Fristgebundene Mitteilungen sind daher ausschlie?lich per Post oder per 
Telefax zu ?bersenden.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130912/3194697a/attachment.htm 

From renancfuentes at gmail.com  Mon Sep 16 07:02:08 2013
From: renancfuentes at gmail.com (Renan Fuentes)
Date: Mon, 16 Sep 2013 11:02:08 -0300
Subject: [Slony1-general] Alter Subscribe forward = FALSE to TRUE
Message-ID: <CAMW+96yCF+GgL44bFXcY3xhOSJ6i+rquqeN_=39SJyWsYpMDfQ@mail.gmail.com>

Dear List!

Please, know tell me if it is possible to change the subscribe forward
setted false to true, to a node already running?

Tks!

-- 
*______________________________________
**Renan Catalani Fuentes de Campos*

*E-mail: **renancfuentes at gmail.com**
Skype:** renan_fuentes**

Telefone: (19) 9717-9845*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130916/0249891e/attachment.htm 

From frossard.nicolas at gmail.com  Tue Sep 17 06:23:46 2013
From: frossard.nicolas at gmail.com (Nicolas Frossard)
Date: Tue, 17 Sep 2013 13:23:46 +0000
Subject: [Slony1-general] Uninstall and deleting schema
Message-ID: <CAKjpkYbTLp=SER-GmbhSxU5q6X=4+qoMqZqe8-8srKaKK5XJzA@mail.gmail.com>

Hello Slony users,

I'm using Slony 2.1.3 and my question is: is it the same to uninstall a
node using the dedicated Slonik command and simply drop the schema ?

For some reason, I would like to uninstall a node and I can't use Slonik.
So I'm using 'DROP SCHEMA _blabla CASCADE;' and it seems to work. Is it
correct or should I avoid that ?

Thanks a lot ! :-)

Nicolas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130917/6408e3fd/attachment.htm 

From ssinger at ca.afilias.info  Tue Sep 17 07:04:32 2013
From: ssinger at ca.afilias.info (Steve Singer)
Date: Tue, 17 Sep 2013 09:04:32 -0500
Subject: [Slony1-general] Alter Subscribe forward = FALSE to TRUE
In-Reply-To: <CAMW+96yCF+GgL44bFXcY3xhOSJ6i+rquqeN_=39SJyWsYpMDfQ@mail.gmail.com>
References: <CAMW+96yCF+GgL44bFXcY3xhOSJ6i+rquqeN_=39SJyWsYpMDfQ@mail.gmail.com>
Message-ID: <52386170.7010305@ca.afilias.info>

On 09/16/2013 09:02 AM, Renan Fuentes wrote:
> Dear List!
>
> Please, know tell me if it is possible to change the subscribe forward
> setted false to true, to a node already running?

It should be possible to issue a SUBSCRIBE SET command with the same 
set/provider/receiver tuple and the forward option changed to true.



>
> Tks!
>
> --
> *______________________________________
> */*Renan Catalani Fuentes de Campos*/
>
> */E-mail: /*/renancfuentes at gmail.com <mailto:renancfuentes at gmail.com>/*/
> Skype:/*/renan_fuentes/*/
>
> Telefone: (19) 9717-9845/*
>
>
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>


From renancfuentes at gmail.com  Tue Sep 17 07:21:55 2013
From: renancfuentes at gmail.com (Renan Fuentes)
Date: Tue, 17 Sep 2013 11:21:55 -0300
Subject: [Slony1-general] Alter Subscribe forward = FALSE to TRUE
In-Reply-To: <52386170.7010305@ca.afilias.info>
References: <CAMW+96yCF+GgL44bFXcY3xhOSJ6i+rquqeN_=39SJyWsYpMDfQ@mail.gmail.com>
	<52386170.7010305@ca.afilias.info>
Message-ID: <CAMW+96xtHLc6Jdq25DKhLxZLyvt1goYeTHhRzL+o4YN11iGq=A@mail.gmail.com>

Steve,
But would start from scratch the replication, or resume from where it
stopped?

Thank you!


2013/9/17 Steve Singer <ssinger at ca.afilias.info>

> On 09/16/2013 09:02 AM, Renan Fuentes wrote:
> > Dear List!
> >
> > Please, know tell me if it is possible to change the subscribe forward
> > setted false to true, to a node already running?
>
> It should be possible to issue a SUBSCRIBE SET command with the same
> set/provider/receiver tuple and the forward option changed to true.
>
>
>
> >
> > Tks!
> >
> > --
> > *______________________________________
> > */*Renan Catalani Fuentes de Campos*/
> >
> > */E-mail: /*/renancfuentes at gmail.com <mailto:renancfuentes at gmail.com>/*/
> > Skype:/*/renan_fuentes/*/
> >
> > Telefone: (19) 9717-9845/*
> >
> >
> > _______________________________________________
> > Slony1-general mailing list
> > Slony1-general at lists.slony.info
> > http://lists.slony.info/mailman/listinfo/slony1-general
> >
>
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>



-- 
*______________________________________
**Renan Catalani Fuentes de Campos*

*E-mail: **renancfuentes at gmail.com**
Skype:** renan_fuentes**

Telefone: (19) 9717-9845*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130917/99e283ae/attachment.htm 

From ssinger at ca.afilias.info  Tue Sep 17 08:27:29 2013
From: ssinger at ca.afilias.info (Steve Singer)
Date: Tue, 17 Sep 2013 10:27:29 -0500
Subject: [Slony1-general] Alter Subscribe forward = FALSE to TRUE
In-Reply-To: <CAMW+96xtHLc6Jdq25DKhLxZLyvt1goYeTHhRzL+o4YN11iGq=A@mail.gmail.com>
References: <CAMW+96yCF+GgL44bFXcY3xhOSJ6i+rquqeN_=39SJyWsYpMDfQ@mail.gmail.com>
	<52386170.7010305@ca.afilias.info>
	<CAMW+96xtHLc6Jdq25DKhLxZLyvt1goYeTHhRzL+o4YN11iGq=A@mail.gmail.com>
Message-ID: <523874E1.9020600@ca.afilias.info>

On 09/17/2013 09:21 AM, Renan Fuentes wrote:
> Steve,
> But would start from scratch the replication, or resume from where it
> stopped?

It will just resume (assuming you don't issue an UNSUBSCRIBE SET in between)


>
> Thank you!
>
>
> 2013/9/17 Steve Singer <ssinger at ca.afilias.info
> <mailto:ssinger at ca.afilias.info>>
>
>     On 09/16/2013 09:02 AM, Renan Fuentes wrote:
>      > Dear List!
>      >
>      > Please, know tell me if it is possible to change the subscribe
>     forward
>      > setted false to true, to a node already running?
>
>     It should be possible to issue a SUBSCRIBE SET command with the same
>     set/provider/receiver tuple and the forward option changed to true.
>
>
>
>      >
>      > Tks!
>      >
>      > --
>      > *______________________________________
>      > */*Renan Catalani Fuentes de Campos*/
>      >
>      > */E-mail: /*/renancfuentes at gmail.com
>     <mailto:renancfuentes at gmail.com> <mailto:renancfuentes at gmail.com
>     <mailto:renancfuentes at gmail.com>>/*/
>      > Skype:/*/renan_fuentes/*/
>      >
>      > Telefone: (19) 9717-9845/*
>      >
>      >
>      > _______________________________________________
>      > Slony1-general mailing list
>      > Slony1-general at lists.slony.info
>     <mailto:Slony1-general at lists.slony.info>
>      > http://lists.slony.info/mailman/listinfo/slony1-general
>      >
>
>     _______________________________________________
>     Slony1-general mailing list
>     Slony1-general at lists.slony.info <mailto:Slony1-general at lists.slony.info>
>     http://lists.slony.info/mailman/listinfo/slony1-general
>
>
>
>
> --
> *______________________________________
> */*Renan Catalani Fuentes de Campos*/
>
> */E-mail: /*/renancfuentes at gmail.com <mailto:renancfuentes at gmail.com>/*/
> Skype:/*/renan_fuentes/*/
>
> Telefone: (19) 9717-9845/*


From stephane.schildknecht at postgres.fr  Wed Sep 18 00:34:20 2013
From: stephane.schildknecht at postgres.fr (=?UTF-8?B?U3TDqXBoYW5lIFNjaGlsZGtuZWNodA==?=)
Date: Wed, 18 Sep 2013 09:34:20 +0200
Subject: [Slony1-general] Uninstall and deleting schema
In-Reply-To: <CAKjpkYbTLp=SER-GmbhSxU5q6X=4+qoMqZqe8-8srKaKK5XJzA@mail.gmail.com>
References: <CAKjpkYbTLp=SER-GmbhSxU5q6X=4+qoMqZqe8-8srKaKK5XJzA@mail.gmail.com>
Message-ID: <5239577C.6080702@postgres.fr>

Le 17/09/2013 15:23, Nicolas Frossard a ?crit :
> Hello Slony users,
>
> I'm using Slony 2.1.3 and my question is: is it the same to uninstall a node 
> using the dedicated Slonik command and simply drop the schema ?
>
> For some reason, I would like to uninstall a node and I can't use Slonik. So 
> I'm using 'DROP SCHEMA _blabla CASCADE;' and it seems to work. Is it correct 
> or should I avoid that ?
>
> Thanks a lot ! :-)
>
> Nicolas

Hello,

Yes it's correct with this version.
Previous version (1.2 and older) altered the system catalog, and therefore, you 
had to restore it before droppping the schema. That was done by the 
uninstall_node() procedure.

ISTM the uninstall_node() now just tells you you can drop the schema.

Best regards,

-- 
St?phane Schildknecht
Contact r?gional PostgreSQL pour l'Europe francophone
Loxodata - Conseil, expertise et formations


From mjames at profitpoint.com  Thu Sep 19 09:01:47 2013
From: mjames at profitpoint.com (Mike James)
Date: Thu, 19 Sep 2013 16:01:47 +0000
Subject: [Slony1-general] Log shipping supplier crashed
In-Reply-To: <BLU0-SMTP2026D22C8EE4C15D61504D9DC380@phx.gbl>
Message-ID: <CE609518.5F55%mjames@profitpoint.com>

I've resolved this issue. But I had to ship the databases to the remote
location and reload them again to do it. I inherited this system and we
are working on updating it to postgesql 9.3, but here's where we are:

Master - postgres 8.3.9, ubuntu 8.04.4, slony 2.0.3 RC2
Slave1 - postgres 8.3.7, ubuntu 8.04.3, slony 2.0.3 RC2

Slave1 cascades to Remote1, using log shipping (starting slon with -a
option)
Remote1 - Postgres 9.2.4, RHEL 5.9, slony1-92-2.1.3-1.rhel5

The problem occurred when Slave1 crashed due to a hardware failure. There
were a few logs created with 0 length, but correct sequence number.
Remote1 couldn't process those log files, they have no sql inside.

So, in the end, I got the databases on Slave1 back in sync with Master,
then dumped them and sent the data to Remote1, where I reload the
databases and restarted log shipping.

Mike

On 9/10/13 7:23 PM, "Steve Singer" <steve at ssinger.info> wrote:

>On Tue, 10 Sep 2013, Mike James wrote:
>
>> I have been sending slony1 logs over a WAN to replicate to a remote
>>server. A couple of days ago, the slave
>> that was sending logs crashed. It was rebooted successfully a couple of
>>hours later, but it looks like log
>> shipping did not resume.
>> 
>> There are a few logs with 0 length on the provider, but they can't be
>>consumed by the remote server on the
>> other end of the WAN.
>> 
>> Is there any way to recover gracefully from this outage?
>
>What version of slony are you running, and does slony_logshipper exit
>immediately after starting up  or stay running and but does nothing? Does
>it 
>print anything in its logfile?
>
>
>> Thanks, Mike
>> 
>>
>


From renancfuentes at gmail.com  Thu Sep 19 19:54:59 2013
From: renancfuentes at gmail.com (Renan Fuentes)
Date: Thu, 19 Sep 2013 23:54:59 -0300
Subject: [Slony1-general] Alter Subscribe forward = FALSE to TRUE
In-Reply-To: <523874E1.9020600@ca.afilias.info>
References: <CAMW+96yCF+GgL44bFXcY3xhOSJ6i+rquqeN_=39SJyWsYpMDfQ@mail.gmail.com>
	<52386170.7010305@ca.afilias.info>
	<CAMW+96xtHLc6Jdq25DKhLxZLyvt1goYeTHhRzL+o4YN11iGq=A@mail.gmail.com>
	<523874E1.9020600@ca.afilias.info>
Message-ID: <CAMW+96zmNJwVWH1i0FPwFxM3dmqCT4oh6UHstwjqhhCm9fqdpw@mail.gmail.com>

Steve,


2013/9/17 Steve Singer <ssinger at ca.afilias.info>

> On 09/17/2013 09:21 AM, Renan Fuentes wrote:
>
>> Steve,
>> But would start from scratch the replication, or resume from where it
>> stopped?
>>
>
> It will just resume (assuming you don't issue an UNSUBSCRIBE SET in
> between)
>
> thanks for the help!
>
It worked perfectly!
>
>>
>> Thank you!
>>
>>
>> 2013/9/17 Steve Singer <ssinger at ca.afilias.info
>> <mailto:ssinger at ca.afilias.**info <ssinger at ca.afilias.info>>>
>>
>>
>>     On 09/16/2013 09:02 AM, Renan Fuentes wrote:
>>      > Dear List!
>>      >
>>      > Please, know tell me if it is possible to change the subscribe
>>     forward
>>      > setted false to true, to a node already running?
>>
>>     It should be possible to issue a SUBSCRIBE SET command with the same
>>     set/provider/receiver tuple and the forward option changed to true.
>>
>>
>>
>>      >
>>      > Tks!
>>      >
>>      > --
>>      > *_____________________________**_________
>>      > */*Renan Catalani Fuentes de Campos*/
>>      >
>>      > */E-mail: /*/renancfuentes at gmail.com
>>     <mailto:renancfuentes at gmail.**com <renancfuentes at gmail.com>> <mailto:
>> renancfuentes at gmail.**com <renancfuentes at gmail.com>
>>
>>     <mailto:renancfuentes at gmail.**com <renancfuentes at gmail.com>>>/*/
>>      > Skype:/*/renan_fuentes/*/
>>      >
>>      > Telefone: (19) 9717-9845/*
>>      >
>>      >
>>      > ______________________________**_________________
>>      > Slony1-general mailing list
>>      > Slony1-general at lists.slony.**info<Slony1-general at lists.slony.info>
>>     <mailto:Slony1-general at lists.**slony.info<Slony1-general at lists.slony.info>
>> >
>>
>>      > http://lists.slony.info/**mailman/listinfo/slony1-**general<http://lists.slony.info/mailman/listinfo/slony1-general>
>>      >
>>
>>     ______________________________**_________________
>>     Slony1-general mailing list
>>     Slony1-general at lists.slony.**info <Slony1-general at lists.slony.info><mailto:
>> Slony1-general at lists.**slony.info <Slony1-general at lists.slony.info>>
>>     http://lists.slony.info/**mailman/listinfo/slony1-**general<http://lists.slony.info/mailman/listinfo/slony1-general>
>>
>>
>>
>>
>>
>> --
>> *_____________________________**_________
>> */*Renan Catalani Fuentes de Campos*/
>>
>> */E-mail: /*/renancfuentes at gmail.com <mailto:renancfuentes at gmail.**com<renancfuentes at gmail.com>
>> >/*/
>> Skype:/*/renan_fuentes/*/
>>
>> Telefone: (19) 9717-9845/*
>>
>
>


-- 
*______________________________________
**Renan Catalani Fuentes de Campos*

*E-mail: **renancfuentes at gmail.com**
Skype:** renan_fuentes**

Telefone: (19) 9717-9845*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20130919/c72f0276/attachment.htm 

