From jan at wi3ck.info  Tue Nov  3 05:50:31 2015
From: jan at wi3ck.info (Jan Wieck)
Date: Tue, 3 Nov 2015 08:50:31 -0500
Subject: [Slony1-general] Slony Replication Startup Speed
In-Reply-To: <CAHD_kvm=hUgL6d86zeQ_zuNLSV58f=bCkZccv+FgdRJ+TzGSOA@mail.gmail.com>
References: <CAHD_kvnWruCyJsX_=xFHMiWkvxahY1U0wLtKpRonCLAHBAUQag@mail.gmail.com>
	<CAOR=d=01EHSAEm80iFyQBbqzFkHrf8e6WZnVOhS9yZnL7ER27g@mail.gmail.com>
	<CAHD_kvkNTx7zm2fmiJGYO96x9OT21kcsLa7JM=vmj6ekzn5+hw@mail.gmail.com>
	<CAOR=d=3m8HwyzDLdpwq9d6Ptfc8A_-BVUB5PeZECFAkcFwJAWg@mail.gmail.com>
	<CAHD_kvk+C-HAgAY+KmqNUPWs4TsH4gOFS14-Mg-BVam0+ticOA@mail.gmail.com>
	<CAOR=d=3zx_vBDQoE3yNdcNvnnSWdBC75UyMgE9hDrdD=_p6Tzw@mail.gmail.com>
	<CAHD_kvm=hUgL6d86zeQ_zuNLSV58f=bCkZccv+FgdRJ+TzGSOA@mail.gmail.com>
Message-ID: <5638BBA7.1030204@wi3ck.info>

On 10/29/2015 09:49 PM, Sung Hsin Lei wrote:
> Actually, node 2 is correct. I have 2 different clusters. Each cluster
> has node 1 and node 2. Each cluster replicates to 1 db.

What is the reason for this setup? If the two slaves are subscribed to 
different sets of tables, then the same can be achieved by creating 
multiple sets and subscribing the slaves to individual combinations of 
them.


Regards, Jan


>
> On Thu, Oct 29, 2015 at 8:39 PM, Scott Marlowe <scott.marlowe at gmail.com
> <mailto:scott.marlowe at gmail.com>> wrote:
>
>     On Thu, Oct 29, 2015 at 6:06 PM, Sung Hsin Lei <sungh.lei at gmail.com
>     <mailto:sungh.lei at gmail.com>> wrote:
>     > Hello,
>     >
>     > I successfully update the main db and one replicated db with the following:
>     >
>     > cluster name = slony_rep1
>     >
>     > node 1 admin conninfo = 'dbname = MyDB host = localhost user = slony1
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>     > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4 user = slony1
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>     >
>     > EXECUTE SCRIPT
>     > (
>     >     SQL = 'ALTER TABLE operators RENAME COLUMN firstname TO lastname;',
>     >     EVENT NODE = 1
>     > );
>     >
>     >
>     >
>     >
>     > However, I have 1 main db to 2 replicated db. The second replicated db has
>     > the following cluster name and node information:
>     >
>     > cluster name = slony_rep2
>     >
>     > node 1 admin conninfo = 'dbname = MyDB host = localhost user = slony2
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>     > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.17 user = slony2
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>
>     Shouldn't that be node 3 not node 2?
>
>     > Do I need to run slonik twice with different cluster and node indo? That
>     > does not seem right. After running the first time, the main db and the first
>     > replicated db will be consistent but not the second replicated db. Also, if
>     > I run it a second time, wouldn't the main db already be updated hence the
>     > sql statements used for the original update will surely fail?
>
>     You can just run it on all three at once.
>
>     node 1 admin conninfo = 'dbname = MyDB host = localhost user = slony1
>     password = Ejhfg33EdddsufhErR76 port = 6234';
>     node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4 user = slony1
>     password = Ejhfg33EdddsufhErR76 port = 6234';
>     node 3 admin conninfo = 'dbname = MyDB host = 86.88.5.17 user = slony2
>     password = Ejhfg33EdddsufhErR76 port = 6234';
>
>     EXECUTE SCRIPT
>     (
>          SQL = 'ALTER TABLE operators RENAME COLUMN firstname TO lastname;',
>          EVENT NODE = 1
>     );
>
>
>
>
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>


-- 
Jan Wieck
Senior Software Engineer
http://slony.info

