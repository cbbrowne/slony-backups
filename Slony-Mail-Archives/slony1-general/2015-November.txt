From jan at wi3ck.info  Tue Nov  3 05:50:31 2015
From: jan at wi3ck.info (Jan Wieck)
Date: Tue, 3 Nov 2015 08:50:31 -0500
Subject: [Slony1-general] Slony Replication Startup Speed
In-Reply-To: <CAHD_kvm=hUgL6d86zeQ_zuNLSV58f=bCkZccv+FgdRJ+TzGSOA@mail.gmail.com>
References: <CAHD_kvnWruCyJsX_=xFHMiWkvxahY1U0wLtKpRonCLAHBAUQag@mail.gmail.com>
	<CAOR=d=01EHSAEm80iFyQBbqzFkHrf8e6WZnVOhS9yZnL7ER27g@mail.gmail.com>
	<CAHD_kvkNTx7zm2fmiJGYO96x9OT21kcsLa7JM=vmj6ekzn5+hw@mail.gmail.com>
	<CAOR=d=3m8HwyzDLdpwq9d6Ptfc8A_-BVUB5PeZECFAkcFwJAWg@mail.gmail.com>
	<CAHD_kvk+C-HAgAY+KmqNUPWs4TsH4gOFS14-Mg-BVam0+ticOA@mail.gmail.com>
	<CAOR=d=3zx_vBDQoE3yNdcNvnnSWdBC75UyMgE9hDrdD=_p6Tzw@mail.gmail.com>
	<CAHD_kvm=hUgL6d86zeQ_zuNLSV58f=bCkZccv+FgdRJ+TzGSOA@mail.gmail.com>
Message-ID: <5638BBA7.1030204@wi3ck.info>

On 10/29/2015 09:49 PM, Sung Hsin Lei wrote:
> Actually, node 2 is correct. I have 2 different clusters. Each cluster
> has node 1 and node 2. Each cluster replicates to 1 db.

What is the reason for this setup? If the two slaves are subscribed to 
different sets of tables, then the same can be achieved by creating 
multiple sets and subscribing the slaves to individual combinations of 
them.


Regards, Jan


>
> On Thu, Oct 29, 2015 at 8:39 PM, Scott Marlowe <scott.marlowe at gmail.com
> <mailto:scott.marlowe at gmail.com>> wrote:
>
>     On Thu, Oct 29, 2015 at 6:06 PM, Sung Hsin Lei <sungh.lei at gmail.com
>     <mailto:sungh.lei at gmail.com>> wrote:
>     > Hello,
>     >
>     > I successfully update the main db and one replicated db with the following:
>     >
>     > cluster name = slony_rep1
>     >
>     > node 1 admin conninfo = 'dbname = MyDB host = localhost user = slony1
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>     > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4 user = slony1
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>     >
>     > EXECUTE SCRIPT
>     > (
>     >     SQL = 'ALTER TABLE operators RENAME COLUMN firstname TO lastname;',
>     >     EVENT NODE = 1
>     > );
>     >
>     >
>     >
>     >
>     > However, I have 1 main db to 2 replicated db. The second replicated db has
>     > the following cluster name and node information:
>     >
>     > cluster name = slony_rep2
>     >
>     > node 1 admin conninfo = 'dbname = MyDB host = localhost user = slony2
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>     > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.17 user = slony2
>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>
>     Shouldn't that be node 3 not node 2?
>
>     > Do I need to run slonik twice with different cluster and node indo? That
>     > does not seem right. After running the first time, the main db and the first
>     > replicated db will be consistent but not the second replicated db. Also, if
>     > I run it a second time, wouldn't the main db already be updated hence the
>     > sql statements used for the original update will surely fail?
>
>     You can just run it on all three at once.
>
>     node 1 admin conninfo = 'dbname = MyDB host = localhost user = slony1
>     password = Ejhfg33EdddsufhErR76 port = 6234';
>     node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4 user = slony1
>     password = Ejhfg33EdddsufhErR76 port = 6234';
>     node 3 admin conninfo = 'dbname = MyDB host = 86.88.5.17 user = slony2
>     password = Ejhfg33EdddsufhErR76 port = 6234';
>
>     EXECUTE SCRIPT
>     (
>          SQL = 'ALTER TABLE operators RENAME COLUMN firstname TO lastname;',
>          EVENT NODE = 1
>     );
>
>
>
>
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>


-- 
Jan Wieck
Senior Software Engineer
http://slony.info

From sungh.lei at gmail.com  Thu Nov  5 20:04:39 2015
From: sungh.lei at gmail.com (Sung Hsin Lei)
Date: Thu, 5 Nov 2015 23:04:39 -0500
Subject: [Slony1-general] Slony Replication Startup Speed
In-Reply-To: <5638BBA7.1030204@wi3ck.info>
References: <CAHD_kvnWruCyJsX_=xFHMiWkvxahY1U0wLtKpRonCLAHBAUQag@mail.gmail.com>
	<CAOR=d=01EHSAEm80iFyQBbqzFkHrf8e6WZnVOhS9yZnL7ER27g@mail.gmail.com>
	<CAHD_kvkNTx7zm2fmiJGYO96x9OT21kcsLa7JM=vmj6ekzn5+hw@mail.gmail.com>
	<CAOR=d=3m8HwyzDLdpwq9d6Ptfc8A_-BVUB5PeZECFAkcFwJAWg@mail.gmail.com>
	<CAHD_kvk+C-HAgAY+KmqNUPWs4TsH4gOFS14-Mg-BVam0+ticOA@mail.gmail.com>
	<CAOR=d=3zx_vBDQoE3yNdcNvnnSWdBC75UyMgE9hDrdD=_p6Tzw@mail.gmail.com>
	<CAHD_kvm=hUgL6d86zeQ_zuNLSV58f=bCkZccv+FgdRJ+TzGSOA@mail.gmail.com>
	<5638BBA7.1030204@wi3ck.info>
Message-ID: <CAHD_kvnFAnM4=DasvHxHDVGLBLYwMB+8hp1UsoqqsYVkYs69ig@mail.gmail.com>

No reason besides we were new to slony and had no idea what we were doing
at the beginning and now it will be a hassle to change for everyone that
has this.

On Tue, Nov 3, 2015 at 8:50 AM, Jan Wieck <jan at wi3ck.info> wrote:

> On 10/29/2015 09:49 PM, Sung Hsin Lei wrote:
>
>> Actually, node 2 is correct. I have 2 different clusters. Each cluster
>> has node 1 and node 2. Each cluster replicates to 1 db.
>>
>
> What is the reason for this setup? If the two slaves are subscribed to
> different sets of tables, then the same can be achieved by creating
> multiple sets and subscribing the slaves to individual combinations of them.
>
>
> Regards, Jan
>
>
>
>> On Thu, Oct 29, 2015 at 8:39 PM, Scott Marlowe <scott.marlowe at gmail.com
>> <mailto:scott.marlowe at gmail.com>> wrote:
>>
>>     On Thu, Oct 29, 2015 at 6:06 PM, Sung Hsin Lei <sungh.lei at gmail.com
>>     <mailto:sungh.lei at gmail.com>> wrote:
>>     > Hello,
>>     >
>>     > I successfully update the main db and one replicated db with the
>> following:
>>     >
>>     > cluster name = slony_rep1
>>     >
>>     > node 1 admin conninfo = 'dbname = MyDB host = localhost user =
>> slony1
>>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>>     > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4 user =
>> slony1
>>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>>     >
>>     > EXECUTE SCRIPT
>>     > (
>>     >     SQL = 'ALTER TABLE operators RENAME COLUMN firstname TO
>> lastname;',
>>     >     EVENT NODE = 1
>>     > );
>>     >
>>     >
>>     >
>>     >
>>     > However, I have 1 main db to 2 replicated db. The second replicated
>> db has
>>     > the following cluster name and node information:
>>     >
>>     > cluster name = slony_rep2
>>     >
>>     > node 1 admin conninfo = 'dbname = MyDB host = localhost user =
>> slony2
>>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>>     > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.17 user =
>> slony2
>>     > password = Ejhfg33EdddsufhErR76 port = 6234';
>>
>>     Shouldn't that be node 3 not node 2?
>>
>>     > Do I need to run slonik twice with different cluster and node indo?
>> That
>>     > does not seem right. After running the first time, the main db and
>> the first
>>     > replicated db will be consistent but not the second replicated db.
>> Also, if
>>     > I run it a second time, wouldn't the main db already be updated
>> hence the
>>     > sql statements used for the original update will surely fail?
>>
>>     You can just run it on all three at once.
>>
>>     node 1 admin conninfo = 'dbname = MyDB host = localhost user = slony1
>>     password = Ejhfg33EdddsufhErR76 port = 6234';
>>     node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4 user = slony1
>>     password = Ejhfg33EdddsufhErR76 port = 6234';
>>     node 3 admin conninfo = 'dbname = MyDB host = 86.88.5.17 user = slony2
>>     password = Ejhfg33EdddsufhErR76 port = 6234';
>>
>>     EXECUTE SCRIPT
>>     (
>>          SQL = 'ALTER TABLE operators RENAME COLUMN firstname TO
>> lastname;',
>>          EVENT NODE = 1
>>     );
>>
>>
>>
>>
>> _______________________________________________
>> Slony1-general mailing list
>> Slony1-general at lists.slony.info
>> http://lists.slony.info/mailman/listinfo/slony1-general
>>
>>
>
> --
> Jan Wieck
> Senior Software Engineer
> http://slony.info
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20151105/1e9c0216/attachment.htm 

From ssinger at ca.afilias.info  Mon Nov  9 13:12:57 2015
From: ssinger at ca.afilias.info (Steve Singer)
Date: Mon, 09 Nov 2015 16:12:57 -0500
Subject: [Slony1-general] adding a replication node instructions update?
In-Reply-To: <CAJKUy5jr=Ua-deX=DQGL4ZkEQk-q3P6u=B2Qp5F3E2tuccf+yA@mail.gmail.com>
References: <87d1wltbwv.fsf@alice.fifthhorseman.net>
	<CAJKUy5jr=Ua-deX=DQGL4ZkEQk-q3P6u=B2Qp5F3E2tuccf+yA@mail.gmail.com>
Message-ID: <56410C59.8090105@ca.afilias.info>

On 10/29/2015 03:58 PM, Jaime Casanova wrote:
\
>> namespace into the new replication database.  This causes the subsequent
>> STORE NODE command to fail with a complaint that the _$CLUSTER_NAME
>> schema is already present.
>>
>> I think if you add -N _$CLUSTERNAME to the pg_dump side of the pipeline,
>> then the rest of the directions should complete OK.
>>
>> Is this a bug in the documentation, or have i misunderstood something?
>>
>
> looks like a bug in documentation, yes
>

I've committed a change to the documentation to include a 
--exclude-schema on the pg_dump command in that sample


From jan at wi3ck.info  Mon Nov  9 14:23:16 2015
From: jan at wi3ck.info (Jan Wieck)
Date: Mon, 9 Nov 2015 17:23:16 -0500
Subject: [Slony1-general] Slony Replication Startup Speed
In-Reply-To: <CAHD_kvnFAnM4=DasvHxHDVGLBLYwMB+8hp1UsoqqsYVkYs69ig@mail.gmail.com>
References: <CAHD_kvnWruCyJsX_=xFHMiWkvxahY1U0wLtKpRonCLAHBAUQag@mail.gmail.com>
	<CAOR=d=01EHSAEm80iFyQBbqzFkHrf8e6WZnVOhS9yZnL7ER27g@mail.gmail.com>
	<CAHD_kvkNTx7zm2fmiJGYO96x9OT21kcsLa7JM=vmj6ekzn5+hw@mail.gmail.com>
	<CAOR=d=3m8HwyzDLdpwq9d6Ptfc8A_-BVUB5PeZECFAkcFwJAWg@mail.gmail.com>
	<CAHD_kvk+C-HAgAY+KmqNUPWs4TsH4gOFS14-Mg-BVam0+ticOA@mail.gmail.com>
	<CAOR=d=3zx_vBDQoE3yNdcNvnnSWdBC75UyMgE9hDrdD=_p6Tzw@mail.gmail.com>
	<CAHD_kvm=hUgL6d86zeQ_zuNLSV58f=bCkZccv+FgdRJ+TzGSOA@mail.gmail.com>
	<5638BBA7.1030204@wi3ck.info>
	<CAHD_kvnFAnM4=DasvHxHDVGLBLYwMB+8hp1UsoqqsYVkYs69ig@mail.gmail.com>
Message-ID: <56411CD4.2020404@wi3ck.info>

On 11/05/2015 11:04 PM, Sung Hsin Lei wrote:
> No reason besides we were new to slony and had no idea what we were
> doing at the beginning and now it will be a hassle to change for
> everyone that has this.

The hassle right now seems to be that you can submit the EXECUTE SCRIPT 
only to one of the two clusters. With this setup it is impossible to do 
it for both.

So you can either deal with the hassle of changing the setup to a single 
cluster with multiple subscriber (slave) nodes, or figure out a way to 
do the schema changes without using EXECUTE SCRIPT. Pick your lesser hassle.


Regards, Jan


>
> On Tue, Nov 3, 2015 at 8:50 AM, Jan Wieck <jan at wi3ck.info
> <mailto:jan at wi3ck.info>> wrote:
>
>     On 10/29/2015 09:49 PM, Sung Hsin Lei wrote:
>
>         Actually, node 2 is correct. I have 2 different clusters. Each
>         cluster
>         has node 1 and node 2. Each cluster replicates to 1 db.
>
>
>     What is the reason for this setup? If the two slaves are subscribed
>     to different sets of tables, then the same can be achieved by
>     creating multiple sets and subscribing the slaves to individual
>     combinations of them.
>
>
>     Regards, Jan
>
>
>
>         On Thu, Oct 29, 2015 at 8:39 PM, Scott Marlowe
>         <scott.marlowe at gmail.com <mailto:scott.marlowe at gmail.com>
>         <mailto:scott.marlowe at gmail.com
>         <mailto:scott.marlowe at gmail.com>>> wrote:
>
>              On Thu, Oct 29, 2015 at 6:06 PM, Sung Hsin Lei
>         <sungh.lei at gmail.com <mailto:sungh.lei at gmail.com>
>              <mailto:sungh.lei at gmail.com <mailto:sungh.lei at gmail.com>>>
>         wrote:
>              > Hello,
>              >
>              > I successfully update the main db and one replicated db
>         with the following:
>              >
>              > cluster name = slony_rep1
>              >
>              > node 1 admin conninfo = 'dbname = MyDB host = localhost
>         user = slony1
>              > password = Ejhfg33EdddsufhErR76 port = 6234';
>              > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4
>         user = slony1
>              > password = Ejhfg33EdddsufhErR76 port = 6234';
>              >
>              > EXECUTE SCRIPT
>              > (
>              >     SQL = 'ALTER TABLE operators RENAME COLUMN firstname
>         TO lastname;',
>              >     EVENT NODE = 1
>              > );
>              >
>              >
>              >
>              >
>              > However, I have 1 main db to 2 replicated db. The second
>         replicated db has
>              > the following cluster name and node information:
>              >
>              > cluster name = slony_rep2
>              >
>              > node 1 admin conninfo = 'dbname = MyDB host = localhost
>         user = slony2
>              > password = Ejhfg33EdddsufhErR76 port = 6234';
>              > node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.17
>         user = slony2
>              > password = Ejhfg33EdddsufhErR76 port = 6234';
>
>              Shouldn't that be node 3 not node 2?
>
>              > Do I need to run slonik twice with different cluster and
>         node indo? That
>              > does not seem right. After running the first time, the
>         main db and the first
>              > replicated db will be consistent but not the second
>         replicated db. Also, if
>              > I run it a second time, wouldn't the main db already be
>         updated hence the
>              > sql statements used for the original update will surely fail?
>
>              You can just run it on all three at once.
>
>              node 1 admin conninfo = 'dbname = MyDB host = localhost
>         user = slony1
>              password = Ejhfg33EdddsufhErR76 port = 6234';
>              node 2 admin conninfo = 'dbname = MyDB host = 86.88.5.4
>         user = slony1
>              password = Ejhfg33EdddsufhErR76 port = 6234';
>              node 3 admin conninfo = 'dbname = MyDB host = 86.88.5.17
>         user = slony2
>              password = Ejhfg33EdddsufhErR76 port = 6234';
>
>              EXECUTE SCRIPT
>              (
>                   SQL = 'ALTER TABLE operators RENAME COLUMN firstname
>         TO lastname;',
>                   EVENT NODE = 1
>              );
>
>
>
>
>         _______________________________________________
>         Slony1-general mailing list
>         Slony1-general at lists.slony.info
>         <mailto:Slony1-general at lists.slony.info>
>         http://lists.slony.info/mailman/listinfo/slony1-general
>
>
>
>     --
>     Jan Wieck
>     Senior Software Engineer
>     http://slony.info
>
>


-- 
Jan Wieck
Senior Software Engineer
http://slony.info

From ludovic.toinel at capgemini.com  Tue Nov 10 01:51:29 2015
From: ludovic.toinel at capgemini.com (TOINEL, Ludovic)
Date: Tue, 10 Nov 2015 09:51:29 +0000
Subject: [Slony1-general] Network connection from slaves to the master
Message-ID: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>

Hi,

I would like to use Slony without any network connection from the slaves to the master.
The network allows only flows from master to slaves.

Is there any option that I missed to do that ?

Thank-you in advance.

Regards,

Ludovic Toinel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20151110/e0842f24/attachment.htm 

From ajs at crankycanuck.ca  Tue Nov 10 03:26:05 2015
From: ajs at crankycanuck.ca (Andrew Sullivan)
Date: Tue, 10 Nov 2015 06:26:05 -0500
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
Message-ID: <20151110112605.GA18808@crankycanuck.ca>

On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
> The network allows only flows from master to slaves.
> 
> Is there any option that I missed to do that ?

Not really.  In principle you could do this with the log shipping
mode, but I don't recall whether doing that on the master was not
possible or just a really bad idea.  (You could do this with the
built-in standby mechanisms of Postgres, though.

I do wonder why you have it set up this way, however.  Why do you
control the flows this way?

A

-- 
Andrew Sullivan
ajs at crankycanuck.ca

From ludovic.toinel at capgemini.com  Tue Nov 10 05:03:07 2015
From: ludovic.toinel at capgemini.com (TOINEL, Ludovic)
Date: Tue, 10 Nov 2015 13:03:07 +0000
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <20151110112605.GA18808@crankycanuck.ca>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
	<20151110112605.GA18808@crankycanuck.ca>
Message-ID: <6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>

Thanks Andrew,

We are not allowed to have network connection from the slaves to the master (for security constraints). Only master can communicate with slaves.
We need database on slaves with mix replicates tables and read/write tables.

The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ? 

[slony slaves] <-----> [slony master - Standby node] <----(log shipping)--|firewall|-- [master protected somewhere]

Do you think this solution can work with slony ?

Regards,

Ludovic Toinel

-----Message d'origine-----
De?: slony1-general-bounces at lists.slony.info [mailto:slony1-general-bounces at lists.slony.info] De la part de Andrew Sullivan
Envoy??: mardi 10 novembre 2015 12:26
??: slony1-general at lists.slony.info
Objet?: Re: [Slony1-general] Network connection from slaves to the master

On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
> The network allows only flows from master to slaves.
> 
> Is there any option that I missed to do that ?

Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.

I do wonder why you have it set up this way, however.  Why do you control the flows this way?

A

--
Andrew Sullivan
ajs at crankycanuck.ca
_______________________________________________
Slony1-general mailing list
Slony1-general at lists.slony.info
http://lists.slony.info/mailman/listinfo/slony1-general

From guillaume at lelarge.info  Tue Nov 10 05:16:57 2015
From: guillaume at lelarge.info (Guillaume Lelarge)
Date: Tue, 10 Nov 2015 14:16:57 +0100
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
	<20151110112605.GA18808@crankycanuck.ca>
	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
Message-ID: <CAECtzeWStSQoai40QOQoqgPwRLM1x1aKjWzzJ2AUFxQs1Y0t8Q@mail.gmail.com>

Le 10 nov. 2015 2:03 PM, "TOINEL, Ludovic" <ludovic.toinel at capgemini.com> a
?crit :
>
> Thanks Andrew,
>
> We are not allowed to have network connection from the slaves to the
master (for security constraints). Only master can communicate with slaves.
> We need database on slaves with mix replicates tables and read/write
tables.
>
> The solution could be maybe that solution using a slony master has an Hot
standby of a master protected somewhere ?
>
> [slony slaves] <-----> [slony master - Standby node] <----(log
shipping)--|firewall|-- [master protected somewhere]
>
> Do you think this solution can work with slony ?
>

This will work as long as you don't try to execute write queries on the
slony master, because it's a standby node and, as such, can only execute
read queries. Meaning I'm wondering why you would use such a scheme.

> Regards,
>
> Ludovic Toinel
>
> -----Message d'origine-----
> De : slony1-general-bounces at lists.slony.info [mailto:
slony1-general-bounces at lists.slony.info] De la part de Andrew Sullivan
> Envoy? : mardi 10 novembre 2015 12:26
> ? : slony1-general at lists.slony.info
> Objet : Re: [Slony1-general] Network connection from slaves to the master
>
> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
> > The network allows only flows from master to slaves.
> >
> > Is there any option that I missed to do that ?
>
> Not really.  In principle you could do this with the log shipping mode,
but I don't recall whether doing that on the master was not possible or
just a really bad idea.  (You could do this with the built-in standby
mechanisms of Postgres, though.
>
> I do wonder why you have it set up this way, however.  Why do you control
the flows this way?
>
> A
>
> --
> Andrew Sullivan
> ajs at crankycanuck.ca
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20151110/cc897fac/attachment-0001.htm 

From ludovic.toinel at capgemini.com  Tue Nov 10 05:43:07 2015
From: ludovic.toinel at capgemini.com (TOINEL, Ludovic)
Date: Tue, 10 Nov 2015 13:43:07 +0000
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <CAECtzeWStSQoai40QOQoqgPwRLM1x1aKjWzzJ2AUFxQs1Y0t8Q@mail.gmail.com>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
	<20151110112605.GA18808@crankycanuck.ca>
	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
	<CAECtzeWStSQoai40QOQoqgPwRLM1x1aKjWzzJ2AUFxQs1Y0t8Q@mail.gmail.com>
Message-ID: <6DE56644D894504CB303B3830CEEB36126B9760A@DE-CM-MBX06.corp.capgemini.com>

I?m trying to find the best way to separate the master from the slaves for security requirements.

In terms of network, I?m not allow to get connection from slaves to master.
In terms of database, I use per table granularity replication.

Any other idea ?

De : Guillaume Lelarge [mailto:guillaume at lelarge.info]
Envoy? : mardi 10 novembre 2015 14:17
? : TOINEL, Ludovic
Cc : slony1-general at lists.slony.info; Andrew Sullivan
Objet : Re: [Slony1-general] Network connection from slaves to the master


Le 10 nov. 2015 2:03 PM, "TOINEL, Ludovic" <ludovic.toinel at capgemini.com<mailto:ludovic.toinel at capgemini.com>> a ?crit :
>
> Thanks Andrew,
>
> We are not allowed to have network connection from the slaves to the master (for security constraints). Only master can communicate with slaves.
> We need database on slaves with mix replicates tables and read/write tables.
>
> The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ?
>
> [slony slaves] <-----> [slony master - Standby node] <----(log shipping)--|firewall|-- [master protected somewhere]
>
> Do you think this solution can work with slony ?
>

This will work as long as you don't try to execute write queries on the slony master, because it's a standby node and, as such, can only execute read queries. Meaning I'm wondering why you would use such a scheme.

> Regards,
>
> Ludovic Toinel
>
> -----Message d'origine-----
> De : slony1-general-bounces at lists.slony.info<mailto:slony1-general-bounces at lists.slony.info> [mailto:slony1-general-bounces at lists.slony.info<mailto:slony1-general-bounces at lists.slony.info>] De la part de Andrew Sullivan
> Envoy? : mardi 10 novembre 2015 12:26
> ? : slony1-general at lists.slony.info<mailto:slony1-general at lists.slony.info>
> Objet : Re: [Slony1-general] Network connection from slaves to the master
>
> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
> > The network allows only flows from master to slaves.
> >
> > Is there any option that I missed to do that ?
>
> Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.
>
> I do wonder why you have it set up this way, however.  Why do you control the flows this way?
>
> A
>
> --
> Andrew Sullivan
> ajs at crankycanuck.ca<mailto:ajs at crankycanuck.ca>
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info<mailto:Slony1-general at lists.slony.info>
> http://lists.slony.info/mailman/listinfo/slony1-general
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info<mailto:Slony1-general at lists.slony.info>
> http://lists.slony.info/mailman/listinfo/slony1-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.slony.info/pipermail/slony1-general/attachments/20151110/8a080143/attachment.htm 

From stephane.schildknecht at postgres.fr  Tue Nov 10 05:45:17 2015
From: stephane.schildknecht at postgres.fr (=?UTF-8?B?U3TDqXBoYW5lIFNjaGlsZGtuZWNodA==?=)
Date: Tue, 10 Nov 2015 14:45:17 +0100
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>	<20151110112605.GA18808@crankycanuck.ca>
	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
Message-ID: <5641F4ED.3010909@postgres.fr>

On 10/11/2015 14:03, TOINEL, Ludovic wrote:
> Thanks Andrew,
> 
> We are not allowed to have network connection from the slaves to the master (for security constraints).

You really should think about a VPN between nodes. It would simplify your
architecture.

But, in theory, subscriber nodes could be on a DMZ. They can be accessed by
daemons, but you don't need them to access providers.
Your daemons would run on a node that can access every other node.


BTW, there are no real master and slaves in Slony. There are nodes, which can
be subscribers (receiving modifications readonly), and providers (read/write).
And you can have a subscriber of a set that is provider of another.

 Only master can communicate with slaves.
> We need database on slaves with mix replicates tables and read/write tables.
> 
> The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ? 
> 
> [slony slaves] <-----> [slony master - Standby node] <----(log shipping)--|firewall|-- [master protected somewhere]
> 
> Do you think this solution can work with slony ?
> 
> Regards,
> 
> Ludovic Toinel
> 
> -----Message d'origine-----
> De : slony1-general-bounces at lists.slony.info [mailto:slony1-general-bounces at lists.slony.info] De la part de Andrew Sullivan
> Envoy? : mardi 10 novembre 2015 12:26
> ? : slony1-general at lists.slony.info
> Objet : Re: [Slony1-general] Network connection from slaves to the master
> 
> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
>> The network allows only flows from master to slaves.
>>
>> Is there any option that I missed to do that ?
> 
> Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.
> 
> I do wonder why you have it set up this way, however.  Why do you control the flows this way?
> 
> A
> 
> --
> Andrew Sullivan
> ajs at crankycanuck.ca


-- 
St?phane Schildknecht
Contact r?gional PostgreSQL pour l'Europe francophone
Loxodata - Conseil, expertise et formations
06.17.11.37.42

From ludovic.toinel at capgemini.com  Tue Nov 10 05:49:52 2015
From: ludovic.toinel at capgemini.com (TOINEL, Ludovic)
Date: Tue, 10 Nov 2015 13:49:52 +0000
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <5641F4ED.3010909@postgres.fr>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
	<20151110112605.GA18808@crankycanuck.ca>
	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
	<5641F4ED.3010909@postgres.fr>
Message-ID: <6DE56644D894504CB303B3830CEEB36126B976E7@DE-CM-MBX06.corp.capgemini.com>

Is there a way to have subscribers with no direct SQL access to the provider ? 

The provider write the data on the subscribers directly.

-----Message d'origine-----
De?: slony1-general-bounces at lists.slony.info [mailto:slony1-general-bounces at lists.slony.info] De la part de St?phane Schildknecht
Envoy??: mardi 10 novembre 2015 14:45
??: slony1-general at lists.slony.info
Objet?: Re: [Slony1-general] Network connection from slaves to the master

On 10/11/2015 14:03, TOINEL, Ludovic wrote:
> Thanks Andrew,
> 
> We are not allowed to have network connection from the slaves to the master (for security constraints).

You really should think about a VPN between nodes. It would simplify your architecture.

But, in theory, subscriber nodes could be on a DMZ. They can be accessed by daemons, but you don't need them to access providers.
Your daemons would run on a node that can access every other node.


BTW, there are no real master and slaves in Slony. There are nodes, which can be subscribers (receiving modifications readonly), and providers (read/write).
And you can have a subscriber of a set that is provider of another.

 Only master can communicate with slaves.
> We need database on slaves with mix replicates tables and read/write tables.
> 
> The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ? 
> 
> [slony slaves] <-----> [slony master - Standby node] <----(log 
> shipping)--|firewall|-- [master protected somewhere]
> 
> Do you think this solution can work with slony ?
> 
> Regards,
> 
> Ludovic Toinel
> 
> -----Message d'origine-----
> De : slony1-general-bounces at lists.slony.info 
> [mailto:slony1-general-bounces at lists.slony.info] De la part de Andrew 
> Sullivan Envoy? : mardi 10 novembre 2015 12:26 ? : 
> slony1-general at lists.slony.info Objet : Re: [Slony1-general] Network 
> connection from slaves to the master
> 
> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
>> The network allows only flows from master to slaves.
>>
>> Is there any option that I missed to do that ?
> 
> Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.
> 
> I do wonder why you have it set up this way, however.  Why do you control the flows this way?
> 
> A
> 
> --
> Andrew Sullivan
> ajs at crankycanuck.ca


--
St?phane Schildknecht
Contact r?gional PostgreSQL pour l'Europe francophone Loxodata - Conseil, expertise et formations
06.17.11.37.42
_______________________________________________
Slony1-general mailing list
Slony1-general at lists.slony.info
http://lists.slony.info/mailman/listinfo/slony1-general

From stephane.schildknecht at postgres.fr  Tue Nov 10 06:23:35 2015
From: stephane.schildknecht at postgres.fr (=?UTF-8?B?U3TDqXBoYW5lIFNjaGlsZGtuZWNodA==?=)
Date: Tue, 10 Nov 2015 15:23:35 +0100
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <6DE56644D894504CB303B3830CEEB36126B976E7@DE-CM-MBX06.corp.capgemini.com>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>	<20151110112605.GA18808@crankycanuck.ca>	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
	<5641F4ED.3010909@postgres.fr>
	<6DE56644D894504CB303B3830CEEB36126B976E7@DE-CM-MBX06.corp.capgemini.com>
Message-ID: <5641FDE7.5010603@postgres.fr>

On 10/11/2015 14:49, TOINEL, Ludovic wrote:
> Is there a way to have subscribers with no direct SQL access to the provider ? 
> 
> The provider write the data on the subscribers directly.

(Top-posting makes it really hard to follow discussions in a thread.)

Your slon daemons need to run on a node that can see everyone.

So, for instance, you can have them on node A which is provider for SET 1 and
2, but subscriber of SET 3 from node B.
And you can't psql from NodeB to NodeA.


Should work.

(The provider logs modification on a log table, which is read by daemons. And
propagated to other nodes.)

> 
> -----Message d'origine-----
> De : slony1-general-bounces at lists.slony.info [mailto:slony1-general-bounces at lists.slony.info] De la part de St?phane Schildknecht
> Envoy? : mardi 10 novembre 2015 14:45
> ? : slony1-general at lists.slony.info
> Objet : Re: [Slony1-general] Network connection from slaves to the master
> 
> On 10/11/2015 14:03, TOINEL, Ludovic wrote:
>> Thanks Andrew,
>>
>> We are not allowed to have network connection from the slaves to the master (for security constraints).
> 
> You really should think about a VPN between nodes. It would simplify your architecture.
> 
> But, in theory, subscriber nodes could be on a DMZ. They can be accessed by daemons, but you don't need them to access providers.
> Your daemons would run on a node that can access every other node.
> 
> 
> BTW, there are no real master and slaves in Slony. There are nodes, which can be subscribers (receiving modifications readonly), and providers (read/write).
> And you can have a subscriber of a set that is provider of another.
> 
>  Only master can communicate with slaves.
>> We need database on slaves with mix replicates tables and read/write tables.
>>
>> The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ? 
>>
>> [slony slaves] <-----> [slony master - Standby node] <----(log 
>> shipping)--|firewall|-- [master protected somewhere]
>>
>> Do you think this solution can work with slony ?
>>
>> Regards,
>>
>> Ludovic Toinel
>>
>> -----Message d'origine-----
>> De : slony1-general-bounces at lists.slony.info 
>> [mailto:slony1-general-bounces at lists.slony.info] De la part de Andrew 
>> Sullivan Envoy? : mardi 10 novembre 2015 12:26 ? : 
>> slony1-general at lists.slony.info Objet : Re: [Slony1-general] Network 
>> connection from slaves to the master
>>
>> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
>>> The network allows only flows from master to slaves.
>>>
>>> Is there any option that I missed to do that ?
>>
>> Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.
>>
>> I do wonder why you have it set up this way, however.  Why do you control the flows this way?
>>
>> A
>>
>> --
>> Andrew Sullivan
>> ajs at crankycanuck.ca
> 
> 
> --
> St?phane Schildknecht
> Contact r?gional PostgreSQL pour l'Europe francophone Loxodata - Conseil, expertise et formations
> 06.17.11.37.42
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
> 


-- 
St?phane Schildknecht
Contact r?gional PostgreSQL pour l'Europe francophone
Loxodata - Conseil, expertise et formations
06.17.11.37.42

From ssinger at ca.afilias.info  Tue Nov 10 06:36:29 2015
From: ssinger at ca.afilias.info (Steve Singer)
Date: Tue, 10 Nov 2015 09:36:29 -0500
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <6DE56644D894504CB303B3830CEEB36126B976E7@DE-CM-MBX06.corp.capgemini.com>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>	<20151110112605.GA18808@crankycanuck.ca>	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>	<5641F4ED.3010909@postgres.fr>
	<6DE56644D894504CB303B3830CEEB36126B976E7@DE-CM-MBX06.corp.capgemini.com>
Message-ID: <564200ED.4050301@ca.afilias.info>

On 11/10/2015 08:49 AM, TOINEL, Ludovic wrote:
> Is there a way to have subscribers with no direct SQL access to the provider ?
>
> The provider write the data on the subscribers directly.
>

To repeat what Stephane said

The slon daemon doesn't need to run on the same server as the replica 
database.

You can put the slon dameons for both the replicas and the orign on the 
origin node (or some other node that can access all nodes).  That way 
the replica database server doesn't need to open network connections 
anywhere.

The slon for the replica (which you are running on the originr or 
somewhere similar) can connect to both the replica and origin database 
servers.




> -----Message d'origine-----
> De : slony1-general-bounces at lists.slony.info [mailto:slony1-general-bounces at lists.slony.info] De la part de St?phane Schildknecht
> Envoy? : mardi 10 novembre 2015 14:45
> ? : slony1-general at lists.slony.info
> Objet : Re: [Slony1-general] Network connection from slaves to the master
>
> On 10/11/2015 14:03, TOINEL, Ludovic wrote:
>> Thanks Andrew,
>>
>> We are not allowed to have network connection from the slaves to the master (for security constraints).
>
> You really should think about a VPN between nodes. It would simplify your architecture.
>
> But, in theory, subscriber nodes could be on a DMZ. They can be accessed by daemons, but you don't need them to access providers.
> Your daemons would run on a node that can access every other node.
>
>
> BTW, there are no real master and slaves in Slony. There are nodes, which can be subscribers (receiving modifications readonly), and providers (read/write).
> And you can have a subscriber of a set that is provider of another.
>
>   Only master can communicate with slaves.
>> We need database on slaves with mix replicates tables and read/write tables.
>>
>> The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ?
>>
>> [slony slaves] <-----> [slony master - Standby node] <----(log
>> shipping)--|firewall|-- [master protected somewhere]
>>
>> Do you think this solution can work with slony ?
>>
>> Regards,
>>
>> Ludovic Toinel
>>
>> -----Message d'origine-----
>> De : slony1-general-bounces at lists.slony.info
>> [mailto:slony1-general-bounces at lists.slony.info] De la part de Andrew
>> Sullivan Envoy? : mardi 10 novembre 2015 12:26 ? :
>> slony1-general at lists.slony.info Objet : Re: [Slony1-general] Network
>> connection from slaves to the master
>>
>> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
>>> The network allows only flows from master to slaves.
>>>
>>> Is there any option that I missed to do that ?
>>
>> Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.
>>
>> I do wonder why you have it set up this way, however.  Why do you control the flows this way?
>>
>> A
>>
>> --
>> Andrew Sullivan
>> ajs at crankycanuck.ca
>
>
> --
> St?phane Schildknecht
> Contact r?gional PostgreSQL pour l'Europe francophone Loxodata - Conseil, expertise et formations
> 06.17.11.37.42
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>


From jan at wi3ck.info  Tue Nov 10 06:36:37 2015
From: jan at wi3ck.info (Jan Wieck)
Date: Tue, 10 Nov 2015 09:36:37 -0500
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
	<20151110112605.GA18808@crankycanuck.ca>
	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
Message-ID: <564200F5.5050004@wi3ck.info>

On 11/10/2015 08:03 AM, TOINEL, Ludovic wrote:
> Thanks Andrew,
>
> We are not allowed to have network connection from the slaves to the master (for security constraints). Only master can communicate with slaves.
> We need database on slaves with mix replicates tables and read/write tables.

I presume that this is a restriction on your routers or gateways and 
that the initiating SYN packet for a new TCP connection cannot come from 
what you envision to be the Slave.

If that is correct, you can run all the slon daemons on what you 
consider the Master. All TCP connections are then initiated from the 
Master. This has little to no effect on how Slony functions.


Regards, Jan


>
> The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ?
>
> [slony slaves] <-----> [slony master - Standby node] <----(log shipping)--|firewall|-- [master protected somewhere]
>
> Do you think this solution can work with slony ?
>
> Regards,
>
> Ludovic Toinel
>
> -----Message d'origine-----
> De : slony1-general-bounces at lists.slony.info [mailto:slony1-general-bounces at lists.slony.info] De la part de Andrew Sullivan
> Envoy? : mardi 10 novembre 2015 12:26
> ? : slony1-general at lists.slony.info
> Objet : Re: [Slony1-general] Network connection from slaves to the master
>
> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
>> The network allows only flows from master to slaves.
>>
>> Is there any option that I missed to do that ?
>
> Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.
>
> I do wonder why you have it set up this way, however.  Why do you control the flows this way?
>
> A
>
> --
> Andrew Sullivan
> ajs at crankycanuck.ca
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
> _______________________________________________
> Slony1-general mailing list
> Slony1-general at lists.slony.info
> http://lists.slony.info/mailman/listinfo/slony1-general
>


-- 
Jan Wieck
Senior Software Engineer
http://slony.info

From ludovic.toinel at capgemini.com  Tue Nov 10 06:59:29 2015
From: ludovic.toinel at capgemini.com (TOINEL, Ludovic)
Date: Tue, 10 Nov 2015 14:59:29 +0000
Subject: [Slony1-general] Network connection from slaves to the master
In-Reply-To: <564200ED.4050301@ca.afilias.info>
References: <6DE56644D894504CB303B3830CEEB36126B96E95@DE-CM-MBX06.corp.capgemini.com>
	<20151110112605.GA18808@crankycanuck.ca>
	<6DE56644D894504CB303B3830CEEB36126B971E6@DE-CM-MBX06.corp.capgemini.com>
	<5641F4ED.3010909@postgres.fr>
	<6DE56644D894504CB303B3830CEEB36126B976E7@DE-CM-MBX06.corp.capgemini.com>,
	<564200ED.4050301@ca.afilias.info>
Message-ID: <B695AF2A-4703-4375-BDBC-CED9BBE589C8@capgemini.com>

Excellent ! That solution solve my problem. We can deploy the Slony subscriber on the protected zone.

Thank-you for your feedbacks.

Regards,

Ludovic Toinel


> Le 10 nov. 2015 ? 15:36, Steve Singer <ssinger at ca.afilias.info> a ?crit :
> 
>> On 11/10/2015 08:49 AM, TOINEL, Ludovic wrote:
>> Is there a way to have subscribers with no direct SQL access to the provider ?
>> 
>> The provider write the data on the subscribers directly.
> 
> To repeat what Stephane said
> 
> The slon daemon doesn't need to run on the same server as the replica database.
> 
> You can put the slon dameons for both the replicas and the orign on the origin node (or some other node that can access all nodes).  That way the replica database server doesn't need to open network connections anywhere.
> 
> The slon for the replica (which you are running on the originr or somewhere similar) can connect to both the replica and origin database servers.
> 
> 
> 
> 
>> -----Message d'origine-----
>> De : slony1-general-bounces at lists.slony.info [mailto:slony1-general-bounces at lists.slony.info] De la part de St?phane Schildknecht
>> Envoy? : mardi 10 novembre 2015 14:45
>> ? : slony1-general at lists.slony.info
>> Objet : Re: [Slony1-general] Network connection from slaves to the master
>> 
>>> On 10/11/2015 14:03, TOINEL, Ludovic wrote:
>>> Thanks Andrew,
>>> 
>>> We are not allowed to have network connection from the slaves to the master (for security constraints).
>> 
>> You really should think about a VPN between nodes. It would simplify your architecture.
>> 
>> But, in theory, subscriber nodes could be on a DMZ. They can be accessed by daemons, but you don't need them to access providers.
>> Your daemons would run on a node that can access every other node.
>> 
>> 
>> BTW, there are no real master and slaves in Slony. There are nodes, which can be subscribers (receiving modifications readonly), and providers (read/write).
>> And you can have a subscriber of a set that is provider of another.
>> 
>>  Only master can communicate with slaves.
>>> We need database on slaves with mix replicates tables and read/write tables.
>>> 
>>> The solution could be maybe that solution using a slony master has an Hot standby of a master protected somewhere ?
>>> 
>>> [slony slaves] <-----> [slony master - Standby node] <----(log
>>> shipping)--|firewall|-- [master protected somewhere]
>>> 
>>> Do you think this solution can work with slony ?
>>> 
>>> Regards,
>>> 
>>> Ludovic Toinel
>>> 
>>> -----Message d'origine-----
>>> De : slony1-general-bounces at lists.slony.info
>>> [mailto:slony1-general-bounces at lists.slony.info] De la part de Andrew
>>> Sullivan Envoy? : mardi 10 novembre 2015 12:26 ? :
>>> slony1-general at lists.slony.info Objet : Re: [Slony1-general] Network
>>> connection from slaves to the master
>>> 
>>>> On Tue, Nov 10, 2015 at 09:51:29AM +0000, TOINEL, Ludovic wrote:
>>>> The network allows only flows from master to slaves.
>>>> 
>>>> Is there any option that I missed to do that ?
>>> 
>>> Not really.  In principle you could do this with the log shipping mode, but I don't recall whether doing that on the master was not possible or just a really bad idea.  (You could do this with the built-in standby mechanisms of Postgres, though.
>>> 
>>> I do wonder why you have it set up this way, however.  Why do you control the flows this way?
>>> 
>>> A
>>> 
>>> --
>>> Andrew Sullivan
>>> ajs at crankycanuck.ca
>> 
>> 
>> --
>> St?phane Schildknecht
>> Contact r?gional PostgreSQL pour l'Europe francophone Loxodata - Conseil, expertise et formations
>> 06.17.11.37.42
>> _______________________________________________
>> Slony1-general mailing list
>> Slony1-general at lists.slony.info
>> http://lists.slony.info/mailman/listinfo/slony1-general
>> _______________________________________________
>> Slony1-general mailing list
>> Slony1-general at lists.slony.info
>> http://lists.slony.info/mailman/listinfo/slony1-general
> 
This message contains information that may be privileged or confidential and is the property of the Capgemini Group. It is intended only for the person to whom it is addressed. If you are not the intended recipient, you are not authorized to read, print, retain, copy, disseminate, distribute, or use this message or any part thereof. If you receive this message in error, please notify the sender immediately and delete all copies of this message.


