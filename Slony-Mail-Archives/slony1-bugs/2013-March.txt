From bugzilla-daemon at main.slony.info  Mon Mar 18 13:47:47 2013
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Mon, 18 Mar 2013 13:47:47 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 286] New: PG 9.3 has changed
 LookupExplicitNamespace to take two arguments
Message-ID: <bug-286-4@http.www.slony.info/bugzilla/>

http://www.slony.info/bugzilla/show_bug.cgi?id=286

           Summary: PG 9.3 has changed LookupExplicitNamespace to take two
                    arguments
           Product: Slony-I
           Version: devel
          Platform: PC
        OS/Version: Linux
            Status: NEW
          Severity: enhancement
          Priority: low
         Component: trigger SPI
        AssignedTo: slony1-bugs at lists.slony.info
        ReportedBy: ssinger at ca.afilias.info
                CC: slony1-bugs at lists.slony.info
   Estimated Hours: 0.0


The slony log triggers fail to compile against PG 9.3 because
LookupExplicitNamespace now takes two arguments.

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

From bugzilla-daemon at main.slony.info  Mon Mar 18 13:50:25 2013
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Mon, 18 Mar 2013 13:50:25 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 286] PG 9.3 has changed LookupExplicitNamespace
 to take two arguments
In-Reply-To: <bug-286-4@http.www.slony.info/bugzilla/>
References: <bug-286-4@http.www.slony.info/bugzilla/>
Message-ID: <20130318205025.2E30E2911A8@main.slony.info>

http://www.slony.info/bugzilla/show_bug.cgi?id=286

--- Comment #1 from Steve Singer <ssinger at ca.afilias.info> 2013-03-18 13:50:25 PDT ---
Created an attachment (id=158)
 --> (http://www.slony.info/bugzilla/attachment.cgi?id=158)
Add a configure check to use the proper number of arugments

This patch will get master (2.2) working against PG 9.3

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

From bugzilla-daemon at main.slony.info  Wed Mar 20 16:54:21 2013
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Wed, 20 Mar 2013 16:54:21 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 287] New: UPDATE FUNCTIONS in 2.2 doesn't work
Message-ID: <bug-287-4@http.www.slony.info/bugzilla/>

http://www.slony.info/bugzilla/show_bug.cgi?id=287

           Summary: UPDATE FUNCTIONS in 2.2 doesn't work
           Product: Slony-I
           Version: devel
          Platform: PC
        OS/Version: Linux
            Status: NEW
          Severity: enhancement
          Priority: low
         Component: slonik
        AssignedTo: slony1-bugs at lists.slony.info
        ReportedBy: ssinger at ca.afilias.info
                CC: slony1-bugs at lists.slony.info
   Estimated Hours: 0.0


When updating a slony 2.2.0 b1 instance to 2.2.0 B3

We get the following

update functions(id=1);
<stdin>:2: PGRES_FATAL_ERROR select max(ev_seqno) FROM "_test".sl_event ,
"_test".sl_node  where ev_origin="_test".getLocalNodeId('_test')  AND ev_type
<> 'SYNC'  AND sl_node.no_id= ev_origin - ERROR:  could not access file
"$libdir/slony1_funcs.2.2.0.b1": No such file or directory
error: unable to query event history on node 1
<stdin>:2: PGRES_FATAL_ERROR select "_test".getLocalNodeId('_test'); - ERROR: 
current transaction is aborted, commands ignored until end of transaction block
<stdin>:2: database specified in ???V:1 reports no_id -1


If 2.2.0 b1 is no longer installed.

I think this will effect any upgrade to 2.2.0 where the old shared library is
not installed anymore.

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

