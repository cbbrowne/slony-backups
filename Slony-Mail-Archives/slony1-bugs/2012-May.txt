From bugzilla-daemon at main.slony.info  Thu May  3 10:23:49 2012
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Thu,  3 May 2012 10:23:49 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 265] New: Slony 2.2(master) fails to load
	against 8.3
Message-ID: <bug-265-4@http.www.slony.info/bugzilla/>

http://www.slony.info/bugzilla/show_bug.cgi?id=265

           Summary: Slony 2.2(master) fails to load against 8.3
           Product: Slony-I
           Version: devel
          Platform: PC
        OS/Version: Linux
            Status: NEW
          Severity: blocker
          Priority: low
         Component: stored procedures
        AssignedTo: slony1-bugs at lists.slony.info
        ReportedBy: ssinger at ca.afilias.info
                CC: slony1-bugs at lists.slony.info
   Estimated Hours: 0.0


When I try to run cluster test against 2.2(master) I get

2012-05-03 13:14:44,688 [slonik init stdout] DEBUG
info.slony.clustertest.testcoordinator.slony.SlonikScript slonik init:j
ava.lang.UNIXProcess at 2a8ab08f - <stdin>:38: loading of file
/usr/local/pgsql8.3/share//slony1_funcs.2.2.0.sql: PGRES_FATAL
_ERROR ERROR:  syntax error at or near "]"
2012-05-03 13:14:44,686 [slonik initexit] INFO 
info.slony.clustertest.testcoordinator.slony.ShellExecScript slonik init:j
ava.lang.UNIXProcess at 2a8ab08f - exit with return code:255
2012-05-03 13:14:44,688 [slonik init stdout] DEBUG
info.slony.clustertest.testcoordinator.slony.SlonikScript slonik init:j
ava.lang.UNIXProcess at 2a8ab08f - LINE 1: ...plica".sl_action_seq'),  $3 ,  $4 ,
'T', 0, array[]::text[])
2012-05-03 13:14:44,688 [slonik init stdout] DEBUG
info.slony.clustertest.testcoordinator.slony.SlonikScript slonik init:j
ava.lang.UNIXProcess at 2a8ab08f -                                                
             ^
2012-05-03 13:14:44,688 [slonik init stdout] DEBUG
info.slony.clustertest.testcoordinator.slony.SlonikScript slonik init:j
ava.lang.UNIXProcess at 2a8ab08f - QUERY:  insert into
"_disorder_replica".sl_log_1 ( log_origin, log_txid, log_tableid, log_
actionseq, log_tablenspname, log_tablerelname, log_cmdtype, log_cmdupdncols,
log_cmdargs ) values (  $1 , pg_catalog.txid_
current(),  $2 , nextval('"_disorder_replica".sl_action_seq'),  $3 ,  $4 , 'T',
0, array[]::text[])
2012-05-03 13:14:44,688 [slonik init stdout] DEBUG
info.slony.clustertest.testcoordinator.slony.SlonikScript slonik init:j
ava.lang.UNIXProcess at 2a8ab08f - CONTEXT:  SQL statement in PL/PgSQL function
"log_truncate" near line 22


This is reported against: b6b409b34ec5a1008c8434f96df5443814658c41

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

From bugzilla-daemon at main.slony.info  Tue May 15 08:19:38 2012
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Tue, 15 May 2012 08:19:38 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 265] Slony 2.2(master) fails to load against 8.3
In-Reply-To: <bug-265-4@http.www.slony.info/bugzilla/>
References: <bug-265-4@http.www.slony.info/bugzilla/>
Message-ID: <20120515151938.297C3290464@main.slony.info>

http://www.slony.info/bugzilla/show_bug.cgi?id=265

--- Comment #1 from Jan Wieck <janwieck at yahoo.com> 2012-05-15 08:19:37 PDT ---
Proposed fix for this bug:

https://github.com/wieck/slony1-engine/tree/bug265

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

From bugzilla-daemon at main.slony.info  Tue May 15 12:02:09 2012
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Tue, 15 May 2012 12:02:09 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 266] New: Slony-I: old key column
 tbl_stock_2012.comments IS NULL on UPDATE
Message-ID: <bug-266-4@http.www.slony.info/bugzilla/>

http://www.slony.info/bugzilla/show_bug.cgi?id=266

           Summary: Slony-I: old key column tbl_stock_2012.comments IS
                    NULL on UPDATE
           Product: Slony-I
           Version: 1.2
          Platform: Other
        OS/Version: Linux
            Status: NEW
          Severity: blocker
          Priority: low
         Component: slon
        AssignedTo: slony1-bugs at lists.slony.info
        ReportedBy: kndee at hotmail.com
                CC: slony1-bugs at lists.slony.info
   Estimated Hours: 0.0


I have been using Slony (Version - 1.2.20) with Postgres (Version 8.2.13)
successfully for over two years.

I had few new columns added to the tables in the replication. As my usual
practice, I first added the columns in slave DB and thereafter in the master
DB. 

After adding, I started getting the following error intermittently and failing
any updates to this table - tbl_stock_2012 :

          Slony-I: old key column tbl_stock_2012.comments IS NULL on UPDATE.

I could not think of a reason as the DDL is similar in both master and slave
and other configurations are also identical. I have not done any other changes
to Slony or the replication set recently or updated Slony software.

I think this issue is similar to that of BUG 67 or BUG 73, if so, what I could
do to resolve this issue in Slony version 1.2 ?

Let me know if I need to provide  more information to describe the issue.

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

From bugzilla-daemon at main.slony.info  Tue May 15 12:02:53 2012
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Tue, 15 May 2012 12:02:53 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 266] Slony-I: old key column
 tbl_stock_2012.comments IS NULL on UPDATE
In-Reply-To: <bug-266-4@http.www.slony.info/bugzilla/>
References: <bug-266-4@http.www.slony.info/bugzilla/>
Message-ID: <20120515190253.E342F290CAF@main.slony.info>

http://www.slony.info/bugzilla/show_bug.cgi?id=266

GEETH <kndee at hotmail.com> changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
           Priority|low                         |urgent

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

